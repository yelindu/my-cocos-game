System.register("chunks:///_virtual/123.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,r,i,s,a,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,s=e._decorator,a=e.sp,l=e.Component}],execute:function(){var c,p,u,f,y;i._RF.push({},"fd1f2gXLkxNsqXmYGwW6ppu","123",void 0);var h=s.ccclass,k=s.property;e("NewComponent",(c=h("NewComponent"),p=k({type:a.Skeleton,displayName:"骨骼动画"}),c((y=t((f=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i))||this,o(t,"skeleton",y,r(t)),t}n(t,e);var i=t.prototype;return i.start=function(){console.warn("骨骼动画已播放")},i.update=function(e){this.skeleton.setSkin("run_LookDown"),this.skeleton.setAnimation(0,"run",!0)},t}(l)).prototype,"skeleton",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=f))||u));i._RF.pop()}}}));

System.register("chunks:///_virtual/ActorBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActorConfig.ts","./SpineUtils.ts","./Contants.ts"],(function(t){var i,e,o,n,a,r,s,c,h,l,p,u,d,m,f,g,k;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.createClass},function(t){r=t.cclegacy,s=t._decorator,c=t.Node,h=t.ProgressBar,l=t.sp,p=t.tween,u=t.Color,d=t.math,m=t.Component},function(t){f=t.ActorConfig},function(t){g=t.SpineUtils},function(t){k=t.GroupDefine}],execute:function(){var A,C,N,y,b,B,v;r._RF.push({},"508c7GDfjhDCL/61QxK0jEv","ActorBase",void 0);var D=s.ccclass,S=s.property;t("ActorBase",(A=D("ActorBase"),C=S({type:c,displayName:"主节点"}),N=S({type:c,displayName:"血条"}),A((B=i((b=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return i=t.call.apply(t,[this].concat(a))||this,o(i,"mainNode",B,n(i)),o(i,"bloodBar",v,n(i)),i.animNode=null,i.actorConfig=void 0,i.hp=0,i.maxHp=0,i.moveSpeed=0,i.attack=0,i.attackRadius=0,i.attackTime=0,i.curSkillTime=0,i.skillTime=0,i.skillIndex=0,i.skillAttack=0,i.findEnemyDis=0,i.target=null,i.curActorName="",i.id=0,i.curActorGrounp=null,i.isDead=!1,i.lastAttackTime=0,i.curAnimName="",i.skillRange=0,i}e(i,t);var r=i.prototype;return r.init=function(t,i,e,o){this.id=t,this.curActorName=i,this.curActorGrounp=e,this.curActorGrounp==k.P?this.animNode=this.mainNode:this.curActorGrounp==k.M?this.animNode=this.mainNode.children[0]:(this.curActorGrounp==k.E||this.curActorGrounp==k.S||(this.curActorGrounp=k.B))&&(this.animNode=this.mainNode),this.animNode&&(this.animNode.active=!0),this.actorConfig=f.actorData[this.curActorName],this.hp=this.actorConfig.maxHp,this.maxHp=this.actorConfig.maxHp,this.moveSpeed=this.actorConfig.speed,this.attack=this.actorConfig.attack,this.attackRadius=this.actorConfig.attackRadius,this.attackTime=this.actorConfig.attackTime,this.skillTime=this.actorConfig.skillTime,this.skillAttack=this.actorConfig.skillAttack,this.findEnemyDis=this.actorConfig.findEnemyDis,this.bloodBar&&(this.bloodBar.active=!1,this.bloodBar.getComponent(h).progress=this.hpPercent),this.clearTarget()},r.subHp=function(t,i,e){!this.isDead&&t&&(this.hp=i?this.hp-i:this.hp-t.attack,"ZhaLan"!==this.node.name&&"PlayerController"!==this.node.name||this.hp<=100&&(this.hp=100),this.node.name.includes("Door")&&this.hp<20&&(this.hp=20),this.node.name.includes("Player")&&this.hp<30&&(this.hp=30),this.node.name.startsWith("Soldier_Work")&&this.hp<20&&(this.hp=20),this.bloodBar&&(this.bloodBar.active=!0,this.bloodBar.getComponent(h).progress=this.hpPercent),this.hp<=0&&(this.hp=0,this.bloodBar&&(this.bloodBar.active=!1),t.target===this&&(t.target=null)))},r.doDie=function(){},r.clearTarget=function(){this.target=null},r.findEnemy=function(){return this},r.dieAnimation=function(t,i){var e=this;this.animNode&&(this.animNode.getComponent(l.Skeleton).timeScale=1.5,g.setAnimationCall(this.animNode,"die",(function(){p(e.animNode.getComponent(l.Skeleton)).to(.3,{color:new u(255,255,255,0)}).call((function(){return i()})).start()})))},a(i,[{key:"hpPercent",get:function(){return d.clamp01(this.hp/this.maxHp)}}]),i}(m)).prototype,"mainNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(b.prototype,"bloodBar",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=b))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/ActorCar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesDistributivePoint.ts","./Icarus.ts","./GameGlobal.ts","./AudioManager.ts","./ActorBase.ts","./Contants.ts"],(function(t){var i,o,e,n,s,r,a,h,l,u,c,d,b,p,w,f,m,g,P;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.Node,h=t.Prefab,l=t.Vec3,u=t.sp,c=t.instantiate,d=t.v3,b=t.tween},function(t){p=t.ResourcesDistributivePoint},function(t){w=t.Icarus},function(t){f=t.GameGlobal},function(t){m=t.AudioManager},function(t){g=t.ActorBase},function(t){P=t.GroupDefine}],execute:function(){var y,S,v,T,k,A,_,R,D,F,L;s._RF.push({},"c546eK+ljFAgK9A+8PEBQBC","ActorCar",void 0);var B=r.ccclass,G=r.property;t("ActorCar",(y=B("ActorCar"),S=G({type:p,displayName:"剑资源点"}),v=G({type:a,displayName:"引路点"}),T=G({type:a,displayName:"气泡节点"}),k=G({type:h,displayName:"金币预制体"}),y((R=i((_=function(t){function i(){for(var i,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,e(i,"swordTable",R,n(i)),e(i,"point",D,n(i)),e(i,"bubble",F,n(i)),e(i,"goldPrefab",L,n(i)),i.moving=!1,i.targetPos=new l,i.startPos=new l,i.waiting=!1,i.hasSword=!1,i.isKnockingBack=!1,i.postKnockbackTarget=null,i.isAttackComplete=!1,i.readyToAttack=!1,i.controller=null,i.isLeader=!1,i.readyToFetch=!1,i.stopFetch=!1,i.isDown=!1,i.isAttack=!1,i.moneyRoot=null,i.anim=null,i}o(i,t);var s=i.prototype;return s.start=function(){t.prototype.init.call(this,0,"ActorSoldier",P.S),this.swordTable=f.getMeatPosition2,this.bubble&&(this.bubble.active=!1),this.anim=this.animNode.getComponent(u.Skeleton),this.moneyRoot=f.moneyPoint,this.moveSpeed=340},s.update=function(t){var i=this;if(this.moving){var o=w.lerp_move_by_speed(this.startPos,this.node.worldPosition,this.targetPos,this.moveSpeed,t),e=o.position,n=o.step;if(this.node.setWorldPosition(e),n>=1){if(this.moving=!1,"ActorSoldier-001"==this.node.name&&(this.moveSpeed=0),this.point&&!this.isLeader)return;if(!this.hasSword&&this.isLeader&&this.bubble){if("ActorSoldier-001"==this.node.name)return void this.showBubble();this.showBubble()}this.hasSword&&!f.BossDead?(this.bubble&&(this.bubble.active=!1),this.goToPoint(this.controller.endPoints[1].worldPosition),this.ToRun_DownLeft(),this.scheduleOnce((function(){i.node.destroy()}),5)):!this.hasSword&&this.isLeader&&this.waitForSword()}}},s.submitMoney=function(){if(this.goldPrefab){var t=c(this.goldPrefab);t.setParent(this.node.parent),t.setWorldPosition(this.node.worldPosition.clone()),this.moneyRoot.submit_resources(t,new l(0,0,0),30,.25,!0)}},s.showBubble=function(){this.bubble&&(this.bubble.active=!0,this.bubble.scale=d(0,0,0),b(this.bubble).to(.05,{scale:d(1,1,1)}).start())},s.hideBubble=function(){var t=this;this.bubble&&b(this.bubble).to(.05,{scale:d(0,0,0)}).call((function(){t.bubble.active=!1})).start()},s.setQueuePoint=function(t,i){t&&(this.point=t,this.controller=i,this.goToPoint(t.worldPosition))},s.allowFetchSword=function(){this.isLeader=!0,this.waiting=!0,this.schedule(this.tryGetSword,.5),this.point&&(this.readyToFetch=!0,this.goToPoint(this.point.worldPosition))},s.onPlayerTouchSword=function(){this.allowFetchSword()},s.stopFetchSword=function(){this.stopFetch=!0,this.waiting=!1,this.unschedule(this.tryGetSword)},s.goToPoint=function(t){var i=this;this.isDead||(this.startPos=this.node.worldPosition.clone(),this.targetPos=t.clone(),this.moving=!0,this.scheduleOnce((function(){i.hasSword||i.ToRun_UpRight()}),.1))},s.resumeAfterKnockback=function(){this.postKnockbackTarget&&(this.goToPoint(this.postKnockbackTarget),this.postKnockbackTarget=null)},s.waitForSword=function(){this.stopFetch||this.hasSword||"ActorSoldier-001"!=this.node.name&&(this.waiting=!0,this.schedule(this.tryGetSword,.5))},s.tryGetSword=function(){var t=this;if(this.waiting&&this.swordTable&&!this.hasSword&&!f.stopget2){if(this.stopFetch)return this.unschedule(this.tryGetSword),void(this.waiting=!1);if("ActorSoldier-001"!=this.node.name&&!(this.swordTable.resources_count()<=0)){var i=this.swordTable;if(i){var o=!1;i.request_resources(this.node,new l(0,1,0),(function(i){o||(o=!0,t.hasSword=!0,t.waiting=!1,t.unschedule(t.tryGetSword),m.soundPlay("submit_money"),t.bubble&&t.hideBubble(),t.submitMoney(),t.controller&&t.controller.soldierFinished(t),t.animNode.setScale(1,1),t.goToPoint(t.controller.endPoints[0].worldPosition),t.ToRun_DownRight())}),new l(0,90,0),!1)}}}},s.ToRun_UpRight=function(){this.anim.setSkin("car_LookUpRight"),this.anim.setAnimation(0,"run",!0),this.anim.setSlotsToSetupPose()},s.ToRun_DownLeft=function(){this.anim.setSkin("meatcar_LookDownLeft"),this.anim.setAnimation(0,"run",!0),this.anim.setSlotsToSetupPose()},s.ToRun_DownRight=function(){this.anim.setSkin("meatcar_LookDownRight"),this.anim.setAnimation(0,"run",!0),this.anim.setSlotsToSetupPose()},i}(g)).prototype,"swordTable",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(_.prototype,"point",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(_.prototype,"bubble",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(_.prototype,"goldPrefab",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=_))||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/ActorConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,a,i,n;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,i=t._decorator,n=t.Component}],execute:function(){var c,l;a._RF.push({},"ed9b2oqn/lOeIFueZ8oEkbd","ActorConfig",void 0);var s=i.ccclass;i.property,t("ActorConfig",s("ActorConfig")(((l=function(t){function a(){return t.apply(this,arguments)||this}return e(a,t),a}(n)).actorData={playerController:{name:"主角",maxHp:200,speed:300,attack:5,attackRadius:250,attackTime:600,skillTime:0,skillAttack:0,skillRange:0,findEnemyDis:600},ActorSoldier:{name:"士兵",maxHp:200,speed:250,attack:1,attackRadius:100,attackTime:1e3,skillTime:0,skillAttack:0,skillRange:500,findEnemyDis:800},Enemy:{name:"大熊",maxHp:600,speed:150,attack:50,attackRadius:10,attackTime:4e3,skillTime:0,skillAttack:0,skillRange:0,findEnemyDis:1e3},EnemySoldier:{name:"小熊",maxHp:10,speed:100,attack:1,attackRadius:130,attackTime:1500,skillTime:0,skillAttack:0,skillRange:0,findEnemyDis:300}},c=l))||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/ActorController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActorSoldier.ts"],(function(e){var t,i,n,o,r,u,s,a,l,c,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,u=e._decorator,s=e.Prefab,a=e.Node,l=e.instantiate,c=e.Component},function(e){h=e.ActorSoldier}],execute:function(){var f,d,p,P,g,w,b,y,Q,v,q;r._RF.push({},"2428eEKyHdF6YGkBY8H6fy2","ActorController",void 0);var S=u.ccclass,A=u.property;e("ActorController",(f=S("ActorController"),d=A(s),p=A(a),P=A([a]),g=A(a),f((y=t((b=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),u=0;u<i;u++)r[u]=arguments[u];return t=e.call.apply(e,[this].concat(r))||this,n(t,"soldierPrefab",y,o(t)),n(t,"spawnPoint",Q,o(t)),n(t,"queuePoints",v,o(t)),n(t,"parentNode",q,o(t)),t.soldiers=[],t.queueIndex=0,t.waitingQueue=[],t}i(t,e);var r=t.prototype;return r.onLoad=function(){},r.start=function(){this.queuePoints.forEach((function(e){e.designWorldPos=e.getWorldPosition().clone()}))},r.creat5soldier=function(){var e=this,t=0;this.schedule((function(){e.createSoldier(),++t>=5&&e.unscheduleAllCallbacks()}),.5)},r.createSoldier=function(){if(this.soldierPrefab&&this.spawnPoint){var e=l(this.soldierPrefab);"ActorController"==this.node.name?e.setParent(this.parentNode):e.setParent(this.node),e.setWorldPosition(this.spawnPoint.worldPosition);var t=e.getComponent(h);t&&this.assignQueuePoint(t)}},r.assignQueuePoint=function(e){var t=this.waitingQueue.length%this.queuePoints.length,i=this.queuePoints[t];e.setQueuePoint(i,this),this.waitingQueue.push(e),1===this.waitingQueue.length&&e.allowFetchSword()},r.soldierFinished=function(e){var t=this,i=this.waitingQueue.indexOf(e);i>=0&&this.waitingQueue.splice(i,1),this.waitingQueue.forEach((function(e,i){e.setQueuePoint(t.queuePoints[i],t)})),this.waitingQueue.length>0&&this.waitingQueue[0].allowFetchSword(),this.createSoldier()},r.getNextQueuePoint=function(){for(var e,t=this,i=function(e){if(!t.waitingQueue.find((function(i){return i.point===t.queuePoints[e]})))return{v:t.queuePoints[e]}},n=0;n<this.queuePoints.length;n++)if(e=i(n))return e.v;return null},r.notifyPlayerTouchedSword=function(){if(this.waitingQueue.length>0){var e=this.waitingQueue[0];e.onPlayerTouchSword&&e.onPlayerTouchSword()}},r.resetQueue=function(){this.queueIndex=0},t}(c)).prototype,"soldierPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(b.prototype,"spawnPoint",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(b.prototype,"queuePoints",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=t(b.prototype,"parentNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=b))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/ActorCustomer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesDistributivePoint.ts","./Icarus.ts","./GameGlobal.ts","./AudioManager.ts","./ActorBase.ts","./Contants.ts"],(function(t){var i,o,e,n,s,r,a,h,l,u,c,d,b,p,f,w,m,g,S;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.Node,h=t.Prefab,l=t.Vec3,u=t.sp,c=t.v3,d=t.tween,b=t.instantiate},function(t){p=t.ResourcesDistributivePoint},function(t){f=t.Icarus},function(t){w=t.GameGlobal},function(t){m=t.AudioManager},function(t){g=t.ActorBase},function(t){S=t.GroupDefine}],execute:function(){var P,y,v,T,k,A,_,R,D,F,L;s._RF.push({},"fe470kjDH9Bp5gqZbjZphUY","ActorCustomer",void 0);var B=r.ccclass,G=r.property;t("ActorCustomer",(P=B("ActorCustomer"),y=G({type:p,displayName:"剑资源点"}),v=G({type:a,displayName:"引路点"}),T=G({type:a,displayName:"气泡节点"}),k=G({type:h,displayName:"金币预制体"}),P((R=i((_=function(t){function i(){for(var i,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,e(i,"swordTable",R,n(i)),e(i,"point",D,n(i)),e(i,"bubble",F,n(i)),e(i,"goldPrefab",L,n(i)),i.moving=!1,i.targetPos=new l,i.startPos=new l,i.waiting=!1,i.hasSword=!1,i.isKnockingBack=!1,i.postKnockbackTarget=null,i.isAttackComplete=!1,i.readyToAttack=!1,i.controller=null,i.isLeader=!1,i.readyToFetch=!1,i.stopFetch=!1,i.isDown=!1,i.isAttack=!1,i.moneyRoot=null,i.anim=null,i}o(i,t);var s=i.prototype;return s.start=function(){t.prototype.init.call(this,0,"ActorSoldier",S.S),this.swordTable=w.getMeatPosition1,this.bubble&&(this.bubble.active=!1),this.anim=this.animNode.getComponent(u.Skeleton),this.moneyRoot=w.moneyPoint},s.update=function(t){var i=this;if(this.moving){var o=f.lerp_move_by_speed(this.startPos,this.node.worldPosition,this.targetPos,this.moveSpeed,t),e=o.position,n=o.step;if(this.node.setWorldPosition(e),n>=1){if(this.moving=!1,this.ToIdle(),"ActorSoldier-001"==this.node.name&&(this.moveSpeed=0),this.point&&!this.isLeader)return;if(!this.hasSword&&this.isLeader&&this.bubble){if(this.ToIdle(),"ActorSoldier-001"==this.node.name)return this.animNode.setScale(-1,1),void this.showBubble();this.animNode.setScale(1,1),this.showBubble()}this.hasSword&&!w.BossDead?(this.bubble&&(this.bubble.active=!1),this.goToPoint(this.controller.endPoints[1].worldPosition),this.animNode.setScale(1,1),this.ToRun_DownLeft(),this.scheduleOnce((function(){i.node.destroy()}),5)):!this.hasSword&&this.isLeader&&this.waitForSword()}}},s.submitMoney=function(){var t=this;if(this.goldPrefab)for(var i=function(){var i=b(t.goldPrefab);i.setParent(t.node.parent);var o=.5*(Math.random()-.5),e=.5*(Math.random()-.5),n=t.node.worldPosition.clone().add(new l(o,e,0));i.setWorldPosition(n),t.scheduleOnce((function(){t.moneyRoot.submit_resources(i,new l(0,0,0),30,.25,!0)}),0)},o=0;o<3;o++)i()},s.showBubble=function(){this.bubble&&(this.bubble.active=!0,this.bubble.scale=c(0,0,0),d(this.bubble).to(.05,{scale:c(1,1,1)}).start())},s.hideBubble=function(){var t=this;this.bubble&&d(this.bubble).to(.05,{scale:c(0,0,0)}).call((function(){t.bubble.active=!1})).start()},s.setQueuePoint=function(t,i){t&&(this.point=t,this.controller=i,this.goToPoint(t.worldPosition))},s.allowFetchSword=function(){this.isLeader=!0,this.waiting=!0,this.schedule(this.tryGetSword,.5),this.point&&(this.readyToFetch=!0,this.goToPoint(this.point.worldPosition))},s.onPlayerTouchSword=function(){this.allowFetchSword()},s.stopFetchSword=function(){this.stopFetch=!0,this.waiting=!1,this.unschedule(this.tryGetSword)},s.goToPoint=function(t){var i=this;this.isDead||(this.startPos=this.node.worldPosition.clone(),this.targetPos=t.clone(),this.moving=!0,this.scheduleOnce((function(){i.hasSword||i.ToRun_UpRight()}),.1))},s.resumeAfterKnockback=function(){this.postKnockbackTarget&&(this.goToPoint(this.postKnockbackTarget),this.postKnockbackTarget=null)},s.waitForSword=function(){this.stopFetch||this.hasSword||"ActorSoldier-001"!=this.node.name&&(this.waiting=!0,this.schedule(this.tryGetSword,.5))},s.tryGetSword=function(){var t=this;if(this.waiting&&this.swordTable&&!this.hasSword&&!w.stopget1){if(this.stopFetch)return this.unschedule(this.tryGetSword),void(this.waiting=!1);if("ActorSoldier-001"!=this.node.name&&!(this.swordTable.resources_count()<=0)){var i=this.swordTable;if(i){var o=!1;i.request_resources(this.node,new l(0,1,0),(function(i){o||(o=!0,t.hasSword=!0,t.waiting=!1,t.unschedule(t.tryGetSword),m.soundPlay("submit_money"),t.bubble&&t.hideBubble(),t.submitMoney(),t.controller&&t.controller.soldierFinished(t),t.animNode.setScale(1,1),t.goToPoint(t.controller.endPoints[0].worldPosition),t.ToRun_DownRight())}),new l(0,90,0),!1)}}}},s.ToIdle=function(){this.anim.setSkin("idle_LookUpRight"),this.anim.setAnimation(0,"idle",!0),this.anim.setSlotsToSetupPose()},s.ToRun_UpRight=function(){this.anim.setSkin("run_LookUpRight"),this.anim.setAnimation(0,"run",!0),this.anim.setSlotsToSetupPose()},s.ToRun_DownRight=function(){this.anim.setSkin("run_LookDownRight"),this.anim.setAnimation(0,"run",!0),this.anim.setSlotsToSetupPose()},s.ToRun_DownLeft=function(){this.anim.setSkin("run_LookDownLeft"),this.anim.setAnimation(0,"run",!0),this.anim.setSlotsToSetupPose()},i}(g)).prototype,"swordTable",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(_.prototype,"point",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(_.prototype,"bubble",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(_.prototype,"goldPrefab",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=_))||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/ActorSoldier.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActorBase.ts","./Contants.ts","./ResourcesDistributivePoint.ts","./Icarus.ts","./SpineUtils.ts","./GameGlobal.ts","./Enemy.ts","./AudioManager.ts","./AudioPlay.ts"],(function(t){var i,e,o,s,n,a,r,c,h,l,d,u,b,m,p,w,g,f,S,A,y,v,k;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,r=t.Node,c=t.Vec3,h=t.Vec2,l=t.v3,d=t.tween,u=t.game,b=t.sp},function(t){m=t.ActorBase},function(t){p=t.GroupDefine,w=t.SOLDIER_ANIMATION},function(t){g=t.ResourcesDistributivePoint},function(t){f=t.Icarus},function(t){S=t.SpineUtils},function(t){A=t.GameGlobal},function(t){y=t.Enemy},function(t){v=t.AudioManager},function(t){k=t.AudioPlay}],execute:function(){var P,T,D,N,B,C,F,G,I;n._RF.push({},"d39c8k7MHtPJZn3LrBtknw/","ActorSoldier",void 0);var L=a.ccclass,K=a.property;t("ActorSoldier",(P=L("ActorSoldier"),T=K({type:g,displayName:"剑资源点"}),D=K({type:r,displayName:"引路点"}),N=K({type:r,displayName:"气泡节点"}),P((F=i((C=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return i=t.call.apply(t,[this].concat(n))||this,o(i,"swordTable",F,s(i)),o(i,"point",G,s(i)),o(i,"bubble",I,s(i)),i.moving=!1,i.targetPos=new c,i.startPos=new c,i.waiting=!1,i.hasSword=!1,i.isKnockingBack=!1,i.postKnockbackTarget=null,i.isAttackComplete=!1,i.readyToAttack=!1,i.controller=null,i.isLeader=!1,i.readyToFetch=!1,i.stopFetch=!1,i.isDown=!1,i.isAttack=!1,i}e(i,t);var n=i.prototype;return n.start=function(){t.prototype.init.call(this,0,"ActorSoldier",p.S),this.point=A.SwordPosition,this.swordTable=A.getSwordPosition,this.bubble&&(this.bubble.active=!1),this.moveSpeed=0},n.update=function(t){if(!this.isDead&&!this.isKnockingBack&&!A.BossDead&&this.node){if(this.moving){var i=f.lerp_move_by_speed(this.startPos,this.node.worldPosition,this.targetPos,this.moveSpeed,t),e=i.position,o=i.step;if(this.node.setWorldPosition(e),o>=1){if(this.moving=!1,this.changeAnim(w.IDLE,!0),"ActorSoldier-001"==this.node.name&&(this.moveSpeed=0),this.point&&!this.isLeader)return;if(!this.hasSword&&this.isLeader&&this.bubble){if(this.changeAnim(w.IDLE1,!1),"ActorSoldier-001"==this.node.name)return this.animNode.setScale(-.1,.1),void this.showBubble();this.animNode.setScale(.1,.1),this.showBubble()}this.hasSword&&!A.BossDead?this.bubble&&(this.bubble.active=!1):!this.hasSword&&this.isLeader&&this.waitForSword()}}if(this.hasSword&&!A.BossDead)h.distance(this.node.worldPosition.clone(),A.enemy.worldPosition.clone())<250&&(this.moving=!1,this.DoAttack())}},n.goToBoss=function(){if(!A.BossDead){var t=A.enemy.worldPosition.clone(),i=-5*Math.PI/12,e=5*Math.PI/12,o=Math.random()*(e-i)+i,s=150*Math.sin(o),n=150*-Math.cos(o),a=t.add(new c(s,n,0));this.animNode.setScale(-.1,.1),this.goToPoint(a),this.hasSword?this.changeAnim(w.RUN1,!0):this.changeAnim(w.RUN,!0)}},n.showBubble=function(){this.bubble&&(this.bubble.active=!0,this.bubble.scale=l(0,0,0),d(this.bubble).to(.05,{scale:l(1,1,1)}).start())},n.hideBubble=function(){var t=this;this.bubble&&d(this.bubble).to(.05,{scale:l(0,0,0)}).call((function(){t.bubble.active=!1})).start()},n.DoAttack=function(){var t,i=this;if(!this.isDead){var e=u.totalTime;if(this.lastAttackTime<=0&&(this.lastAttackTime=e),!(e<this.lastAttackTime||(this.lastAttackTime=e+this.attackTime,this.isAttackComplete=!0,A.BossDead))){var o=null==(t=A.enemy)?void 0:t.getComponent(y);A.enemy.getComponent(y).isDead||(v.soundPlay("actorAttack"),this.changeAnim(w.ATTACK,!1,!0),this.scheduleOnce((function(){o.subHp(i,i.attack),i.isAttackComplete=!1}),.2))}}},n.subHp=function(i,e){var o=this;if(!this.isDead&&i){t.prototype.subHp.call(this,i,e);var s=this.node.getWorldPosition(),n=null==i?void 0:i.node.getWorldPosition();if(n){var a=s.subtract(n);a.normalize(),a.multiplyScalar(150),this.postKnockbackTarget=this.node.worldPosition.clone(),d(this.node).by(.05,{worldPosition:a}).call((function(){o.isKnockingBack=!1;var t=o.animNode.getComponent(b.Skeleton);t.timeScale=2,o.hp>0?o.changeAnim(w.DIE1,!1):o.hp<=0&&!o.isDead&&(o.isDead=!0,o.moving=!1,o.waiting=!1,o.unscheduleAllCallbacks(),o.animNode.getComponent(b.Skeleton).timeScale=2,o.mainNode.setScale(.1,.1),o.changeAnim(w.DIE1,!1),o.animNode.getComponent(b.Skeleton).timeScale=1,k.instance.enemyDie(),o.scheduleOnce((function(){o.node.destroy()}),1)),o.moving=!1,o.scheduleOnce((function(){t.timeScale=1,o.goToBoss(),o.mainNode.setScale(-.1,.1),o.isAttackComplete=!1,o.moving=!0}),1.5)})).start()}}},n.setQueuePoint=function(t,i){this.point=t,this.controller=i,this.goToPoint(t.worldPosition)},n.allowFetchSword=function(){this.isLeader=!0,this.waiting=!0,this.schedule(this.tryGetSword,.5),this.point&&(this.readyToFetch=!0,this.goToPoint(this.point.worldPosition))},n.onPlayerTouchSword=function(){this.allowFetchSword()},n.stopFetchSword=function(){this.stopFetch=!0,this.waiting=!1,this.unschedule(this.tryGetSword)},n.goToPoint=function(t){this.isDead||(this.startPos=this.node.worldPosition.clone(),this.targetPos=t.clone(),this.moving=!0,this.changeAnim(w.RUN,!0))},n.resumeAfterKnockback=function(){this.postKnockbackTarget&&(this.goToPoint(this.postKnockbackTarget),this.postKnockbackTarget=null)},n.waitForSword=function(){this.stopFetch||this.hasSword||"ActorSoldier-001"!=this.node.name&&(this.waiting=!0,this.schedule(this.tryGetSword,.5))},n.tryGetSword=function(){var t=this;if(this.waiting&&this.swordTable&&!this.hasSword&&!A.stopget1){if(this.stopFetch)return this.unschedule(this.tryGetSword),void(this.waiting=!1);if("ActorSoldier-001"!=this.node.name&&!(this.swordTable.resources_count()<=0)){var i=this.swordTable;if(i)i.request_resources(this.node,new c(0,1,0),(function(i){t.hasSword=!0,t.waiting=!1,t.unschedule(t.tryGetSword),v.soundPlay("NPCGetSword"),t.bubble&&t.hideBubble(),t.controller&&t.controller.soldierFinished(t),t.goToBoss()}),new c(0,90,0),!1)}}},n.changeAnim=function(t,i,e){void 0===e&&(e=!1),(e||this.curAnimName!=t)&&(this.curAnimName=t,S.setAnimation(this.mainNode.getComponent(b.Skeleton),this.curAnimName,i))},i}(m)).prototype,"swordTable",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(C.prototype,"point",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(C.prototype,"bubble",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=C))||B));n._RF.pop()}}}));

System.register("chunks:///_virtual/Agent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Maths.ts"],(function(i){var t,e,n,r,o,a;return{setters:[function(i){t=i.createClass},function(i){e=i.cclegacy,n=i.Vec3},function(i){r=i.Vector2,o=i.RVOMath,a=i.Line}],execute:function(){e._RF.push({},"7fb36MGSQVAIZkircBgLjlt","Agent",void 0);var l=i("ObserverObj",(function(i){this.value=void 0,i&&(this.value=i)})),u=(i("KeyValuePair",(function(i,t){this.Key=void 0,this.Value=void 0,this.Key=i,this.Value=t})),i("RVOConfig",(function(){})));u.agentCount=10,u.neighborDist=.75,u.radius=.5,u.maxSpeed=1,u.velocity=new n,u.maxNeighbors=10,u.timeHorizon=5,u.timeHorizonObst=0,u.timeStep=.05,i("Agent",function(){function i(){}var e=i.prototype;return e.check=function(i,t){var e=1/u.timeHorizon,n=r.subtract(t.getCenter(),i.getCenter()),l=r.subtract(i.newVelocity,t.newVelocity),c=i.neighborDist+t.neighborDist,s=o.sqr(c),d=o.absSq(n),v=new r,p=new r;if(d>s){var y=r.subtract(l,r.multiply2(e,n)),m=o.absSq(y),f=r.multiply(y,n);if(f<0&&o.sqr(f)>s*m){var h=o.sqrt(m),g=r.division(y,h);p=new r(g.y,-g.x),v=r.multiply2(c*e-h,g)}else{var b=o.sqrt(d-s);p=o.det(n,y)>0?r.division(new r(n.x*b-n.y*c,n.x*c+n.y*b),d):r.division(new r(n.x*b+n.y*c,-n.x*c+n.y*b),-d);var w=r.multiply(l,p);v=r.subtract(r.multiply2(w,p),l)}}else{var x=1/u.timeStep,V=r.subtract(l,r.multiply2(x,n)),q=o.abs(V),S=r.division(V,q);p=new r(S.y,-S.x),v=r.multiply2(c*x-q,S)}var L=new a,P=i.weight/(i.weight+t.weight);L.direction=new r(p.x,p.y),L.point=r.addition(i.newVelocity,r.multiply2(P,v)),i.orcaLines.push(L)},e.process=function(i){for(var t=0,e=i.length;t<e;t++){var n=i[t];if(n.isAgent&&n.orcaLines.length>0){if(!n.isRemove&&n.object){var o=new l(new r(n.newVelocity.x,n.newVelocity.y)),a=this.linearProgram2(n.orcaLines,n.maxVelocity,n.prefVelocity,!1,o);if(a<n.orcaLines.length&&this.linearProgram3(n.orcaLines,n.weight,0,a,n.maxVelocity,o),n.object){var u=o.value,c=n.object.velocity;c.x=u.x,c.y=u.y,c.z=0}}n.orcaLines.length=0}}},e.linearProgram1=function(i,t,e,n,a,l){var u=r.multiply(i[t].point,i[t].direction),c=o.sqr(u)+o.sqr(e)-o.absSq(i[t].point);if(c<0)return!1;for(var s=o.sqrt(c),d=-u-s,v=-u+s,p=0;p<t;++p){var y=o.det(i[t].direction,i[p].direction),m=o.det(i[p].direction,r.subtract(i[t].point,i[p].point));if(o.fabs(y)<=o.RVO_EPSILON){if(m<0)return!1}else{var f=m/y;if(y>0?v=Math.min(v,f):d=Math.max(d,f),d>v)return!1}}if(a)r.multiply(n,i[t].direction)>0?l.value=r.addition(i[t].point,r.multiply2(v,i[t].direction)):l.value=r.addition(i[t].point,r.multiply2(d,i[t].direction));else{var h=r.multiply(i[t].direction,r.subtract(n,i[t].point));l.value=h<d?r.addition(i[t].point,r.multiply2(d,i[t].direction)):h>v?r.addition(i[t].point,r.multiply2(v,i[t].direction)):r.addition(i[t].point,r.multiply2(h,i[t].direction))}return!0},e.linearProgram2=function(i,t,e,n,a){n?a.value=r.multiply2(t,e):o.absSq(e)>o.sqr(t)?a.value=r.multiply2(t,o.normalize(e)):a.value=e;for(var l=0;l<i.length;++l)if(o.det(i[l].direction,r.subtract(i[l].point,a.value))>0){var u=new r(a.value.x,a.value.y);if(!this.linearProgram1(i,l,t,e,n,a))return a.value=u,l}return i.length},e.linearProgram3=function(i,t,e,n,l,u){for(var c=0,s=n;s<i.length;++s)if(o.det(i[s].direction,r.subtract(i[s].point,u.value))>c){for(var d=[],v=0;v<e;++v)d[d.length]=i[v];for(var p=e;p<s;++p){var y=new a,m=o.det(i[s].direction,i[p].direction);if(o.fabs(m)<=o.RVO_EPSILON){if(r.multiply(i[s].direction,i[p].direction)>0)continue;y.point=r.multiply2(t,r.addition(i[s].point,i[p].point))}else y.point=r.addition(i[s].point,r.multiply2(o.det(i[p].direction,r.subtract(i[s].point,i[p].point))/m,i[s].direction));var f=r.subtract(i[p].direction,i[s].direction);o.absSq(f)>0&&(y.direction=o.normalize(f),d[d.length]=y)}var h=new r(u.value.x,u.value.y);this.linearProgram2(d,l,new r(-i[s].direction.y,i[s].direction.x),!0,u)<d.length&&(u.value=h),c=o.det(i[s].direction,r.subtract(i[s].point,u.value))}},t(i,null,[{key:"inst",get:function(){return null==this._inst&&(this._inst=new i),this._inst}}]),i}())._inst=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/Agent2.ts",["cc","./commonDefine.ts","./Line.ts","./RVOMath.ts","./Vector2.ts"],(function(i){var t,e,s,o,n,r;return{setters:[function(i){t=i.cclegacy},function(i){e=i.KeyValuePair,s=i.ObserverObj},function(i){o=i.default},function(i){n=i.default},function(i){r=i.default}],execute:function(){t._RF.push({},"bfd3dsttWRJy4//o0a9/bJr","Agent",void 0);i("default",function(){function i(){this.agentNeighbors_=[],this.obstacleNeighbors_=[],this.orcaLines_=[],this.position_=void 0,this.prefVelocity_=new r(0,0),this.velocity_=void 0,this.id_=void 0,this.maxNeighbors_=void 0,this.maxSpeed_=void 0,this.neighborDist_=void 0,this.radius_=void 0,this.timeHorizon_=void 0,this.timeHorizonObst_=void 0,this.needDelete_=!1,this.type=0,this.avoidenceWeight_=.5,this.simulator=null,this.newVelocity_=new r(0,0)}var t=i.prototype;return t.update=function(){this.velocity_=this.newVelocity_;var i=r.addition(this.position_,r.multiply2(this.simulator.timeStep_,this.velocity_));this.position_=i,isNaN(this.position_.x)||isNaN(this.position_.y)},t.insertObstacleNeighbor=function(i,t){var s=i.next_,o=n.distSqPointLineSegment(i.point_,s.point_,this.position_);if(o<t){this.obstacleNeighbors_.push(new e(o,i));for(var r=this.obstacleNeighbors_.length-1;0!=r&&o<this.obstacleNeighbors_[r-1].Key;)this.obstacleNeighbors_[r]=this.obstacleNeighbors_[r-1],--r;this.obstacleNeighbors_[r]=new e(o,i)}},t.insertAgentNeighbor=function(i,t){if(i&&this!=i&&this.type==i.type){var s=n.absSq(r.subtract(this.position_,i.position_));if(s<t.value){this.agentNeighbors_.length<this.maxNeighbors_&&this.agentNeighbors_.push(new e(s,i));for(var o=this.agentNeighbors_.length-1;0!=o&&s<this.agentNeighbors_[o-1].Key;)this.agentNeighbors_[o]=this.agentNeighbors_[o-1],--o;this.agentNeighbors_[o]=new e(s,i),this.agentNeighbors_.length==this.maxNeighbors_&&(t.value=this.agentNeighbors_[this.agentNeighbors_.length-1].Key)}}},t.computeNeighbors=function(){this.obstacleNeighbors_=[];var i=n.sqr(this.timeHorizonObst_*this.maxSpeed_+this.radius_);if(this.simulator.kdTree_.computeObstacleNeighbors(this,i),this.agentNeighbors_=[],this.maxNeighbors_>0){var t=new s;t.value=n.sqr(this.neighborDist_),this.simulator.kdTree_.computeAgentNeighbors(this,t)}},t.computeNewVelocity=function(){this.orcaLines_=[];for(var i=1/this.timeHorizonObst_,t=0;t<this.obstacleNeighbors_.length;++t){for(var e=this.obstacleNeighbors_[t].Value,a=e.next_,l=r.subtract(e.point_,this.position_),h=r.subtract(a.point_,this.position_),c=!1,u=0;u<this.orcaLines_.length;++u)if(n.det(r.subtract(r.multiply2(i,l),this.orcaLines_[u].point),this.orcaLines_[u].direction)-i*this.radius_>=-n.RVO_EPSILON&&n.det(r.subtract(r.multiply2(i,h),this.orcaLines_[u].point),this.orcaLines_[u].direction)-i*this.radius_>=-n.RVO_EPSILON){c=!0;break}if(!c){var d=n.absSq(l),_=n.absSq(h),p=n.sqr(this.radius_),y=r.subtract(a.point_,e.point_),v=r.multiply(r.multiply2(-1,l),y)/n.absSq(y),b=n.absSq(r.subtract(r.multiply2(-1,l),r.multiply2(v,y))),m=new o;if(v<0&&d<=p)e.convex_&&(m.point=new r(0,0),m.direction=n.normalize(new r(-l.y,l.x)),this.orcaLines_.push(m));else if(v>1&&_<=p)a.convex_&&n.det(h,a.direction_)>=0&&(m.point=new r(0,0),m.direction=n.normalize(new r(-h.y,h.x)),this.orcaLines_.push(m));else if(v>=0&&v<1&&b<=p)m.point=new r(0,0),m.direction=r.multiply2(-1,e.direction_),this.orcaLines_.push(m);else{var g=void 0,f=void 0;if(v<0&&b<=p){if(!e.convex_)continue;a=e;var x=n.sqrt(d-p);g=r.division(new r(l.x*x-l.y*this.radius_,l.x*this.radius_+l.y*x),d),f=r.division(new r(l.x*x+l.y*this.radius_,-l.x*this.radius_+l.y*x),d)}else if(v>1&&b<=p){if(!a.convex_)continue;e=a;var N=n.sqrt(_-p);g=r.division(new r(h.x*N-h.y*this.radius_,h.x*this.radius_+h.y*N),_),f=r.division(new r(h.x*N+h.y*this.radius_,-h.x*this.radius_+h.y*N),_)}else{if(e.convex_){var w=n.sqrt(d-p);g=r.division(new r(l.x*w-l.y*this.radius_,l.x*this.radius_+l.y*w),d)}else g=r.multiply2(-1,e.direction_);if(a.convex_){var q=n.sqrt(_-p);f=r.division(new r(h.x*q-h.y*this.radius_,h.x*this.radius_+h.y*q),_)}else f=r.multiply2(-1,e.direction_)}var S=e.previous_,L=!1,V=!1;e.convex_&&n.det(g,r.multiply2(-1,S.direction_))>=0&&(g=r.multiply2(-1,S.direction_),L=!0),a.convex_&&n.det(f,r.multiply2(-1,a.direction_))<=0&&(f=a.direction_,V=!0);var O=r.multiply2(i,r.subtract(e.point_,this.position_)),I=r.multiply2(i,r.subtract(a.point_,this.position_)),P=r.subtract(I,O),z=e==a?.5:r.multiply(r.subtract(this.velocity_,O),P)/n.absSq(P),R=r.multiply(r.subtract(this.velocity_,O),g),T=r.multiply(r.subtract(this.velocity_,I),f);if(z<0&&R<0||e==a&&R<0&&T<0){var E=n.normalize(r.subtract(this.velocity_,O));m.direction=new r(E.y,-E.x),m.point=r.addition(O,r.multiply2(this.radius_*i,E)),this.orcaLines_.push(m)}else if(z>1&&T<0){var F=n.normalize(r.subtract(this.velocity_,I));m.direction=new r(F.y,-F.x),m.point=r.addition(I,r.multiply2(this.radius_*i,F)),this.orcaLines_.push(m)}else{var H=z<0||z>1||e==a?n.RVO_POSITIVEINFINITY:n.absSq(r.subtract(this.velocity_,r.addition(O,r.multiply2(z,P)))),k=R<0?n.RVO_POSITIVEINFINITY:n.absSq(r.subtract(this.velocity_,r.addition(O,r.multiply2(R,g)))),A=T<0?n.RVO_POSITIVEINFINITY:n.absSq(r.subtract(this.velocity_,r.addition(I,r.multiply2(T,f))));if(H<=k&&H<=A)m.direction=r.multiply2(-1,e.direction_),m.point=r.addition(O,r.multiply2(this.radius_*i,new r(-m.direction.y,m.direction.x))),this.orcaLines_.push(m);else if(k<=A){if(L)continue;m.direction=g,m.point=r.addition(O,r.multiply2(this.radius_*i,new r(-m.direction.y,m.direction.x))),this.orcaLines_.push(m)}else V||(m.direction=r.multiply2(-1,f),m.point=r.addition(I,r.multiply2(this.radius_*i,new r(-m.direction.y,m.direction.x))),this.orcaLines_.push(m))}}}}for(var D=this.orcaLines_.length,K=1/this.timeHorizon_,M=0;M<this.agentNeighbors_.length;++M){var W=this.agentNeighbors_[M].Value;if(W){var Y=r.subtract(W.position_,this.position_),J=r.subtract(this.velocity_,W.velocity_),j=n.absSq(Y),B=this.radius_+W.radius_,C=n.sqr(B),G=new o,Q=new r;if(j>C){var U=r.subtract(J,r.multiply2(K,Y)),X=n.absSq(U),Z=r.multiply(U,Y);if(Z<0&&n.sqr(Z)>C*X){var $=n.sqrt(X),ii=r.division(U,$);G.direction=new r(ii.y,-ii.x),Q=r.multiply2(B*K-$,ii)}else{var ti=n.sqrt(j-C);n.det(Y,U)>0?G.direction=r.division(new r(Y.x*ti-Y.y*B,Y.x*B+Y.y*ti),j):G.direction=r.division(new r(Y.x*ti+Y.y*B,-Y.x*B+Y.y*ti),-j);var ei=r.multiply(J,G.direction);Q=r.subtract(r.multiply2(ei,G.direction),J)}}else{var si=1/this.simulator.timeStep_,oi=r.subtract(J,r.multiply2(si,Y)),ni=n.abs(oi),ri=r.division(oi,ni);G.direction=new r(ri.y,-ri.x),Q=r.multiply2(B*si-ni,ri)}G.point=r.addition(this.velocity_,r.multiply2(this.avoidenceWeight_,Q)),this.orcaLines_[this.orcaLines_.length]=G}}var ai=new s(new r(this.newVelocity_.x,this.newVelocity_.y)),li=this.linearProgram2(this.orcaLines_,this.maxSpeed_,this.prefVelocity_,!1,ai);li<this.orcaLines_.length&&this.linearProgram3(this.orcaLines_,D,li,this.maxSpeed_,ai),this.newVelocity_=ai.value},t.linearProgram1=function(i,t,e,s,o,a){var l=r.multiply(i[t].point,i[t].direction),h=n.sqr(l)+n.sqr(e)-n.absSq(i[t].point);if(h<0)return!1;for(var c=n.sqrt(h),u=-l-c,d=-l+c,_=0;_<t;++_){var p=n.det(i[t].direction,i[_].direction),y=n.det(i[_].direction,r.subtract(i[t].point,i[_].point));if(n.fabs(p)<=n.RVO_EPSILON){if(y<0)return!1}else{var v=y/p;if(p>0?d=Math.min(d,v):u=Math.max(u,v),u>d)return!1}}if(o)r.multiply(s,i[t].direction)>0?a.value=r.addition(i[t].point,r.multiply2(d,i[t].direction)):a.value=r.addition(i[t].point,r.multiply2(u,i[t].direction));else{var b=r.multiply(i[t].direction,r.subtract(s,i[t].point));a.value=b<u?r.addition(i[t].point,r.multiply2(u,i[t].direction)):b>d?r.addition(i[t].point,r.multiply2(d,i[t].direction)):r.addition(i[t].point,r.multiply2(b,i[t].direction))}return!0},t.linearProgram2=function(i,t,e,s,o){s?o.value=r.multiply2(t,e):n.absSq(e)>n.sqr(t)?o.value=r.multiply2(t,n.normalize(e)):o.value=e;for(var a=0;a<i.length;++a)if(n.det(i[a].direction,r.subtract(i[a].point,o.value))>0){var l=new r(o.value.x,o.value.y);if(!this.linearProgram1(i,a,t,e,s,o))return o.value=l,a}return i.length},t.linearProgram3=function(i,t,e,s,a){for(var l=0,h=e;h<i.length;++h)if(n.det(i[h].direction,r.subtract(i[h].point,a.value))>l){for(var c=[],u=0;u<t;++u)c[c.length]=i[u];for(var d=t;d<h;++d){var _=new o,p=n.det(i[h].direction,i[d].direction);if(n.fabs(p)<=n.RVO_EPSILON){if(r.multiply(i[h].direction,i[d].direction)>0)continue;_.point=r.multiply2(.5,r.addition(i[h].point,i[d].point))}else _.point=r.addition(i[h].point,r.multiply2(n.det(i[d].direction,r.subtract(i[h].point,i[d].point))/p,i[h].direction));_.direction=n.normalize(r.subtract(i[d].direction,i[h].direction)),c[c.length]=_}var y=new r(a.value.x,a.value.y);this.linearProgram2(c,s,new r(-i[h].direction.y,i[h].direction.x),!0,a)<c.length&&(a.value=y),l=n.det(i[h].direction,r.subtract(i[h].point,a.value))}},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/AILib.ts",["cc"],(function(t){var r,n,e,i;return{setters:[function(t){r=t.cclegacy,n=t.Vec3,e=t.Quat,i=t.Vec2}],execute:function(){t({sphereAABBDistance:c,sphereOBBDistance:function(t,r,i,u,o){return n.subtract(y,t,i),e.conjugate(a,u),n.transformQuat(x,y,a),c(x,r,o)}}),r._RF.push({},"1dee3kKruRLHqNAPS5W1GIe","AILib",void 0);var x={x:0,y:0,z:0},u={x:0,y:0,z:0},y={x:0,y:0,z:0},a={x:0,y:0,z:0,w:1};function c(t,r,e){return u.x=Math.max(-e.x,Math.min(t.x,e.x)),u.y=Math.max(-e.y,Math.min(t.y,e.y)),u.z=Math.max(-e.z,Math.min(t.z,e.z)),n.subtract(u,u,t),n.dot(u,u)<=r*r}t("obbIntersect",(function(t,r,n,e,i,x){var u,y=r.x,a=r.y,c=r.z,o=n.m00,f=n.m01,s=n.m02,h=n.m03,m=n.m04,l=n.m05,v=n.m06,g=n.m07,M=n.m08,z=i.x,p=i.y,d=i.z,w=x.m00,b=x.m01,I=x.m02,L=x.m03,P=x.m04,A=x.m05,R=x.m06,B=x.m07,q=x.m08,C=o*w+f*b+s*I,D=o*L+f*P+s*A,N=o*R+f*B+s*q,S=h*w+m*b+l*I,_=h*L+m*P+l*A,k=h*R+m*B+l*q,F=v*w+g*b+M*I,O=v*L+g*P+M*A,Q=v*R+g*B+M*q,V=e.x-t.x,j=e.y-t.y,E=e.z-t.z,G=V*o+j*f+E*s,H=V*h+j*m+E*l,K=V*v+j*g+E*M,W=Number.EPSILON,J=(C>=0?C:-C)+W,T=(D>=0?D:-D)+W,U=(N>=0?N:-N)+W,X=(S>=0?S:-S)+W,Y=(_>=0?_:-_)+W,Z=(k>=0?k:-k)+W,$=(F>=0?F:-F)+W,tt=(O>=0?O:-O)+W,rt=(Q>=0?Q:-Q)+W;return!((G>=0?G:-G)>y+(z*J+p*T+d*U))&&(!((H>=0?H:-H)>a+(z*X+p*Y+d*Z))&&(!((K>=0?K:-K)>c+(z*$+p*tt+d*rt))&&(!(((u=G*C+H*S+K*F)>=0?u:-u)>y*J+a*X+c*$+z)&&(!(((u=G*D+H*_+K*O)>=0?u:-u)>y*T+a*Y+c*tt+p)&&(!(((u=G*N+H*k+K*Q)>=0?u:-u)>y*U+a*Z+c*rt+d)&&(!(((u=K*S-H*F)>=0?u:-u)>a*$+c*X+(p*U+d*T))&&(!(((u=K*_-H*O)>=0?u:-u)>a*tt+c*Y+(z*U+d*J))&&(!(((u=K*k-H*Q)>=0?u:-u)>a*rt+c*Z+(z*T+p*J))&&(!(((u=G*F-K*C)>=0?u:-u)>y*$+c*J+(p*Z+d*Y))&&(!(((u=G*O-K*D)>=0?u:-u)>y*tt+c*T+(z*Z+d*X))&&(!(((u=G*Q-K*N)>=0?u:-u)>y*rt+c*U+(z*Y+p*X))&&(!(((u=H*C-G*S)>=0?u:-u)>y*X+a*J+(p*rt+d*tt))&&(!(((u=H*D-G*_)>=0?u:-u)>y*Y+a*T+(z*rt+d*$))&&!(((u=H*N-G*k)>=0?u:-u)>y*Z+a*U+(z*tt+p*$)))))))))))))))}));function o(t,r,n,e){var i=(e.x-n.x)*(t.y-n.y)-(e.y-n.y)*(t.x-n.x),x=(r.x-t.x)*(t.y-n.y)-(r.y-t.y)*(t.x-n.x),u=(e.y-n.y)*(r.x-t.x)-(e.x-n.x)*(r.y-t.y);if(0!==u){var y=i/u,a=x/u;if(y>=0&&y<=1&&a>=0&&a<=1)return!0}return!1}var f=new i,s=new i,h=new i,m=new i;function l(t,r,n){for(var e=n.length,i=0;i<e;++i){if(o(t,r,n[i],n[(i+1)%e]))return!0}return!1}function v(t,r){for(var n=!1,e=t.x,i=t.y,x=r.length,u=0,y=x-1;u<x;y=u++){var a=r[u].x,c=r[u].y,o=r[y].x,f=r[y].y;c>i!=f>i&&e<(o-a)*(i-c)/(f-c)+a&&(n=!n)}return n}function g(t,r,n,e){var i,x=n.x-r.x,u=n.y-r.y,y=x*x+u*u,a=((t.x-r.x)*x+(t.y-r.y)*u)/y;return i=e?y?a<0?r:a>1?n:f.set(r.x+a*x,r.y+a*u):r:f.set(r.x+a*x,r.y+a*u),x=t.x-i.x,u=t.y-i.y,Math.sqrt(x*x+u*u)}var M=t("default",(function(){}));M.lineLine=o,M.lineRect=function(t,r,n){var e=f.set(n.x,n.y),i=s.set(n.x,n.yMax),x=h.set(n.xMax,n.yMax),u=m.set(n.xMax,n.y);return!!o(t,r,e,i)||(!!o(t,r,i,x)||(!!o(t,r,x,u)||!!o(t,r,u,e)))},M.linePolygon=l,M.rectRect=function(t,r){var n=t.x,e=t.y,i=t.x+t.width,x=t.y+t.height,u=r.x,y=r.y,a=r.x+r.width,c=r.y+r.height;return n<=a&&i>=u&&e<=c&&x>=y},M.rectPolygon=function(t,r){var n=f.set(t.x,t.y),e=s.set(t.x,t.yMax),i=h.set(t.xMax,t.yMax),x=m.set(t.xMax,t.y);if(l(n,e,r))return!0;if(l(e,i,r))return!0;if(l(i,x,r))return!0;if(l(x,n,r))return!0;for(var u=0,y=r.length;u<y;++u)if(t.contains(r[u]))return!0;return!!v(n,r)||(!!v(e,r)||(!!v(i,r)||!!v(x,r)))},M.rectCircle=function(t,r,n){var e=r.x,i=r.y,x=t.x,u=t.y,y=t.width,a=t.height,c=e,o=i;e<x?c=x:e>x+y&&(c=x+y),i<u?o=u:i>u+a&&(o=u+a);var f=e-c,s=i-o;return Math.sqrt(f*f+s*s)<=n},M.polygonPolygon=function(t,r){var n,e;for(n=0,e=t.length;n<e;++n){if(l(t[n],t[(n+1)%e],r))return!0}for(n=0,e=r.length;n<e;++n)if(v(r[n],t))return!0;for(n=0,e=t.length;n<e;++n)if(v(t[n],r))return!0;return!1},M.circleCircle=function(t,r,n,e){return i.distance(t,n)<r+e},M.polygonCircle=function(t,r,n){var e=r;if(v(e,t))return!0;for(var i=0,x=t.length;i<x;i++){if(g(e,0===i?t[t.length-1]:t[i-1],t[i],!0)<n)return!0}return!1},M.pointInPolygon=v,M.pointLineDistance=g,r._RF.pop()}}}));

System.register("chunks:///_virtual/AirwWall.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,i,n,l,o,a,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy,o=e._decorator,a=e.PolygonCollider2D,c=e.Component}],execute:function(){var u,p,s,f,y;l._RF.push({},"5e441UT0vZLeaCTm+N1VkEp","AirwWall",void 0);var d=o.ccclass,v=o.property;e("AirwWall",(u=d("AirwWall"),p=v({type:a,displayName:"碰撞体"}),u((y=r((f=function(e){function r(){for(var r,t=arguments.length,l=new Array(t),o=0;o<t;o++)l[o]=arguments[o];return r=e.call.apply(e,[this].concat(l))||this,i(r,"collider2D",y,n(r)),r}t(r,e);var l=r.prototype;return l.start=function(){},l.update=function(e){},r}(c)).prototype,"collider2D",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=f))||s));l._RF.pop()}}}));

System.register("chunks:///_virtual/ArrowController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameGlobal.ts","./Body2.ts","./GroundMarkDitie.ts","./CarryWorker.ts","./ResourcesDistributivePoint.ts"],(function(t){var e,r,i,o,a,n,s,h,l,c,u,g,d,w,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,n=t._decorator,s=t.Node,h=t.Vec3,l=t.Component},function(t){c=t.GameGlobal},function(t){u=t.ResourcesType,g=t.GroundMarkState},function(t){d=t.GroundMarkDitie},function(t){w=t.CarryWorker},function(t){f=t.ResourcesDistributivePoint}],execute:function(){var v,p,y,T,m,b,N,x,I,C,P,k,M,D,z,E,W;a._RF.push({},"5d4cdKMIFRLXaDHVkYp71YL","ArrowController",void 0);var G=n.ccclass,_=n.property;t("ArrowController",(v=G("ArrowController"),p=_(s),y=_(s),T=_(s),m=_([s]),b=_(s),N=_(w),x=_(s),v((P=e((C=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return e=t.call.apply(t,[this].concat(a))||this,i(e,"player",P,o(e)),i(e,"arrow1",k,o(e)),i(e,"arrow2",M,o(e)),i(e,"targets",D,o(e)),i(e,"EnemyNode",z,o(e)),i(e,"carryWorker",E,o(e)),i(e,"meatPoint",W,o(e)),e.currentTarget=null,e.lastTarget=null,e.currentTargetIndex=0,e.floatTime=0,e.reachThreshold=80,e.firstenemy=!1,e.targetNode=null,e.started=!1,e}r(e,t);var a=e.prototype;return a.start=function(){var t=this;this.arrow1.active=!1,this.arrow2.active=!1,this.scheduleOnce((function(){t.started=!0,t.arrow1.active=!0,t.arrow2.active=!0}),2)},a.update=function(t){var e,r;if(this.player&&this.started){if(this.targets[11].children.length>0&&this.scheduleOnce((function(){c.uiController.showEndCard()}),6),c.homeUp&&(this.targets[0]=this.targets[10],this.targets[1]=this.targets[11]),c.GameEnd)return this.arrow1.active=!1,void(this.arrow2.active=!1);var i=this.player.worldPosition,o=(null==(e=c.playerController)?void 0:e.packge_count(u.Meat1))||0,a=(null==(r=c.playerController)?void 0:r.packge_count(u.Money))||0;if(this.carryWorker.isalive&&1==this.currentTargetIndex&&this.moveToNextTarget(),this.carryWorker.isalive&&2==this.currentTargetIndex&&this.moveToNextTarget(),1==this.currentTargetIndex&&0!==this.targets[1].children.length&&(this.arrow1.active=!0,this.arrow2.active=!0),3==this.currentTargetIndex&&0!==this.targets[3].children.length&&(this.arrow1.active=!0,this.arrow2.active=!0),o<1&&!this.firstenemy)this.meatPoint.children.length>0?this.targetNode=this.meatPoint:this.targetNode=this.getClosestEnemy(this.node.position);else{this.targetNode=this.targets[this.currentTargetIndex],this.firstenemy=!0;var n=this.targetNode.getComponent(d);if(n)if(n.state===g.Full){this.arrow1&&(this.arrow1.active=!1),this.arrow2&&(this.arrow2.active=!1),this.moveToNextTarget(),this.targetNode=this.targets[this.currentTargetIndex];var s=this.targetNode.getComponent(d);s&&s.state!==g.Enable&&(this.targetNode=null,this.arrow1&&(this.arrow1.active=!1),this.arrow2&&(this.arrow2.active=!1))}else this.arrow1&&(this.arrow1.active=!0),this.arrow2&&(this.arrow2.active=!0),0==a&&(this.targets[3].children.length>0?(this.targetNode=this.targets[3],this.currentTargetIndex=3):this.targets[2].getComponent(f).root.children.length>0?(this.targetNode=this.targets[2],this.currentTargetIndex=2):this.targets[1].children.length>0?(this.targetNode=this.targets[1],this.currentTargetIndex=1):(this.firstenemy=!1,this.currentTargetIndex=0))}if(this.targetNode&&(this.currentTarget=this.targetNode,this.updateArrowDirection(i,this.targetNode.worldPosition),this.updateIndicator(this.targetNode,t),this.isCloseToTarget(i,this.targetNode.worldPosition))){if(this.targetNode.getComponent(d))return;this.moveToNextTarget(),console.log(11)}}},a.getClosestEnemy=function(t){var e,r=(null==(e=c.enemies)?void 0:e.filter((function(t){return t&&t.node&&t.node.active})))||[];return 0===r.length?null:(r.sort((function(e,r){return h.distance(t,e.node.worldPosition)-h.distance(t,r.node.worldPosition)})),r[0].node)},a.isCloseToTarget=function(t,e){if(this.targetNode!=this.EnemyNode)return h.distance(t,e)<this.reachThreshold},a.moveToNextTarget=function(){var t,e;if(0!=this.firstenemy||!(this.targetNode=this.getClosestEnemy(this.node.position))){null==(t=c.playerController)||t.packge_count(u.Meat1);var r=(null==(e=c.playerController)?void 0:e.packge_count(u.Money))||0;if(this.targets.length&&(0!=r||3!=this.currentTargetIndex)){this.arrow2||(this.arrow2.active=!0),this.currentTargetIndex++,this.currentTargetIndex>=this.targets.length&&(this.firstenemy=!1,this.currentTargetIndex=0);var i=this.targets[this.currentTargetIndex];if(this.currentTarget=i,this.arrow2&&i){var o=i.worldPosition.clone();o.y+=70,this.arrow2.setWorldPosition(o),this.lastTarget=i,this.floatTime=0}1==this.currentTargetIndex&&(0==this.targets[1].children.length?(this.arrow1.active=!1,this.arrow2.active=!1):(this.arrow1.active=!0,this.arrow2.active=!0)),3==this.currentTargetIndex&&(0==this.targets[3].children.length?(this.arrow1.active=!1,this.arrow2.active=!1):(this.arrow1.active=!0,this.arrow2.active=!0))}}},a.updateArrowDirection=function(t,e){if(this.arrow1){this.arrow1.active=!0;var r=new h;h.subtract(r,e,t);var i=180*Math.atan2(r.y,r.x)/Math.PI;this.arrow1.angle=i-90}},a.updateIndicator=function(t,e){if(this.arrow2&&t){var r=t.worldPosition.clone();if(r.y+=70,this.lastTarget!==t)this.arrow2.setWorldPosition(r),this.arrow2.active=!0,this.lastTarget=t,this.floatTime=0;else{this.floatTime+=e;var i=20*Math.sin(4*this.floatTime);r.y+=i,this.arrow2.setWorldPosition(r)}}},e}(l)).prototype,"player",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(C.prototype,"arrow1",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(C.prototype,"arrow2",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(C.prototype,"targets",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=e(C.prototype,"EnemyNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(C.prototype,"carryWorker",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(C.prototype,"meatPoint",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=C))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["cc"],(function(o){var a,u,i,e,n,l,c,t;return{setters:[function(o){a=o.cclegacy,u=o.game,i=o.Game,e=o.view,n=o.assetManager,l=o.AudioClip,c=o.AudioSource,t=o.sys}],execute:function(){a._RF.push({},"ad55b8AndNC1KSeqN/EIvES","AudioManager",void 0);var r=o("AudioManager",function(){function o(){}return o.init=function(a,n){for(var l in o._audioSource=a,o.rootNode=n,o.audioSourceMap){var c=o.audioSourceMap[l];c&&c.playing&&c.audioSource.stop()}if(o.audioSourceMap={},o.audioNames=[],"volumeSwitch"in window&&void 0!==window.volumeSwitch&&(console.log("Init AudioManager volumeSwitch",window.volumeSwitch),o.musicEnable=!!window.volumeSwitch,o.soundEnable=!!window.volumeSwitch),"Ironsource"==window.__PLATFORM){var t=window.volumeAudio;t<=0?(o.volume=0,o.musicEnable=!1,o.soundEnable=!1):"number"==typeof t&&(o.volume=t)}console.log("Init AudioManager:",o.musicEnable,o.volume),u.on(i.EVENT_HIDE,(function(){o.pause()})),u.on(i.EVENT_SHOW,(function(){o.resume()})),e.on("audioVolumeChange",o.audioVolumeChange,this),window.AnalyticsIns&&window.AnalyticsIns.voiceOn()},o.audioVolumeChange=function(a){var u=o.musicEnable;o.musicEnable=a,o.soundEnable=a,u&&!a?o.pause():!u&&a&&o.resume()},o.resume=function(){if(o.musicEnable){var a=o._audioSource;for(var i in a.play(),o.audioSourceMap){var e=o.audioSourceMap[i];e&&e.playing&&(e.loop||u.totalTime-e.startTime<e.duration-500)&&e.audioSource.play()}}},o.pause=function(){var a=o._audioSource;for(var u in a.pause(),o.audioSourceMap){var i=o.audioSourceMap[u];i&&i.audioSource.pause()}},o.soundPlay=function(a,u){if(void 0===u&&(u=1),o.soundEnable){var i,e=o._audioSource,c=o.basePath+a,t=o._cachedAudioClipMap[c];if(t)e.playOneShot(t,1.6*u);else null==(i=n.resources)||i.load(c,l,(function(a,i){a?console.warn(a):(o._cachedAudioClipMap[c]=i,e.playOneShot(i,1.6*u))}))}},o.musicPlay=function(a,u){var i=this,e=o._audioSource;if(!e.playing){e.loop=u;var c,t=o.basePath+a,r=o._cachedAudioClipMap[t];if(r)e.clip=r,o.musicEnable&&(e.play(),o.firstClick&&this.playSoundLog("auto")),o.firstClick||e.pause();else null==(c=n.resources)||c.load(t,l,(function(a,u){a?console.warn(a):(o._cachedAudioClipMap[t]=u,e.clip=u,e.volume=.6,o.musicEnable&&(e.play(),o.firstClick&&i.playSoundLog("auto")),o.firstClick||e.pause())}))}},o.musicStop=function(){o._audioSource.stop()},o.audioPlay=function(a,i,e){if(void 0===i&&(i=!1),o.rootNode){o.audioNames.push(a);var t=o.audioSourceMap[a];if(t){var r=t.audioSource;i&&(r.loop=!0),t.loop=i,r.volume=e&&!isNaN(e)?o.volume*e:o.volume,t.duration=1e3*r.duration,!r.playing&&o.firstClick&&o.soundEnable&&(r.play(),t.startTime=u.totalTime)}else{var d,s=o.rootNode.addComponent(c);t=o.audioSourceMap[a]={audioSource:s,playing:!0,startTime:u.totalTime,loop:i,duration:0};var p=o.basePath+a;null==(d=n.resources)||d.load(p,l,(function(a,n){a?console.warn(a):(o._cachedAudioClipMap[p]=n,s.clip=n,i&&(s.loop=!0),s.volume=e&&!isNaN(e)?o.volume*e:o.volume,t.duration=1e3*s.duration,o.soundEnable&&(s.play(),t.startTime=u.totalTime),o.firstClick||s.pause())}))}}},o.removeAudioPlay=function(){for(var a=0;a<o.audioNames.length;a++){var u=o.audioSourceMap[o.audioNames[a]];u&&(u.playing=!1,u.audioSource.stop()),o.audioSourceMap[o.audioNames[a]]=null}for(var i=o.rootNode.getComponents(c),e=1;e<i.length;e++)i[e].destroy()},o.audioStop=function(a){var u=o.audioSourceMap[a];u&&(u.playing=!1,u.audioSource.stop())},o.audioPause=function(a){var u=o.audioSourceMap[a];u&&(u.playing=!1,u.audioSource.pause())},o.audioVolume=function(a,u){void 0===u&&(u=1);var i=o.audioSourceMap[a];i&&(i.audioSource.volume=o.volume*u)},o.musicVolumeSet=function(a){o._audioSource.volume=a,o.volume=a,t.localStorage.setItem("volume",String(a))},o.musicEnableSet=function(a){var u=o._audioSource;o.musicEnable=a,t.localStorage.setItem("musicEnable",a?"1":"0"),a?u.playing||u.play():u.playing&&u.stop()},o.soundEnableSet=function(a){o.soundEnable=a,t.localStorage.setItem("soundEnable",a?"1":"0")},o.playSoundLog=function(o){if(!this.isplayed&&(this.isplayed=!0,window.AnalyticsIns))try{window.AnalyticsIns.voiceTouch(o)}catch(o){}},o}());r._audioSource=void 0,r._cachedAudioClipMap={},r.audioSourceMap={},r.rootNode=void 0,r.basePath="audio/",r.musicEnable=!0,r.soundEnable=!0,r.volume=1,r.firstClick=!1,r.audioNames=[],r.isplayed=!1,a._RF.pop()}}}));

System.register("chunks:///_virtual/AudioPlay.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(n){var i,o,t,u;return{setters:[function(n){i=n.createClass},function(n){o=n.cclegacy,t=n._decorator},function(n){u=n.AudioManager}],execute:function(){var e,a;o._RF.push({},"d6a22+HE21J3JE2TEB5nkiJ","AudioPlay",void 0);var c=t.ccclass;t.property,n("AudioPlay",c("AudioPlay")(((a=function(){function n(){this.enemyDieCount=0,this.coinCount=0}var o=n.prototype;return o.enemyDie=function(){var n=this;this.enemyDieCount>=3||(this.enemyDieCount++,3==this.enemyDieCount&&setTimeout((function(){return n.enemyDieCount=0}),500),u.soundPlay("sangshisiwangshenyin"))},o.coin=function(){var n=this;this.coinCount>=3||(this.coinCount++,3==this.coinCount&&setTimeout((function(){return n.coinCount=0}),500),u.soundPlay("baochujinbi",.3))},o.arrowTowr=function(){u.soundPlay("jianzaofangyuta")},o.building=function(){u.soundPlay("levelUp",.5)},o.upgrade=function(){u.soundPlay("levelUp")},o.attack=function(){u.soundPlay("attack",.3)},o.bagChange=function(){u.soundPlay("啵儿")},o.heroShow=function(){u.soundPlay("yingxiongdengchang")},o.kuangshan=function(){u.soundPlay("dig")},o.victory=function(){u.musicStop(),u.soundPlay("qingzhushengli")},o.click=function(){u.soundPlay("Click")},o.recruit=function(){u.soundPlay("卡牌弹出")},i(n,null,[{key:"instance",get:function(){return n._instance||(n._instance=new n),n._instance}}]),n}())._instance=void 0,e=a))||e);o._RF.pop()}}}));

System.register("chunks:///_virtual/AutoLabel2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Language2.ts"],(function(e){var r,t,a,i,n,o,u,l,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,u=e.Label,l=e.Component},function(e){c=e.Language}],execute:function(){var s,p,b,f,h,y,d,g,m,z,k,L,N,_,w,v,j,A,C;n._RF.push({},"9267arn7jJHFaJrsdaXL56A","AutoLabel",void 0);var T=o.ccclass,D=o.property;e("AutoLabel",(s=T("AutoLabel"),p=D({displayName:"中文(简体)"}),b=D({displayName:"中文(繁体)"}),f=D({displayName:"英文"}),h=D({displayName:"日文"}),y=D({displayName:"韩文"}),d=D({displayName:"法文"}),g=D({displayName:"德文"}),m=D({displayName:"俄文"}),s((L=r((k=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return r=e.call.apply(e,[this].concat(n))||this,a(r,"zh_CN",L,i(r)),a(r,"zh_TW",N,i(r)),a(r,"en",_,i(r)),a(r,"ja",w,i(r)),a(r,"ko",v,i(r)),a(r,"fr",j,i(r)),a(r,"de",A,i(r)),a(r,"ru",C,i(r)),r}t(r,e);var n=r.prototype;return n.onLoad=function(){var e="";switch(c.getLanguageCode()){case"zh-s":e=this.zh_CN;break;case"zh_t":e=this.zh_TW;break;case"en":e=this.en;break;case"ja":e=this.ja;break;case"ko":e=this.ko;break;case"fr":e=this.fr;break;case"de":e=this.de;break;case"ru":e=this.ru;break;case"default":e=this.en}this.getComponent(u).string=e},n.start=function(){},n.update=function(e){},r}(l)).prototype,"zh_CN",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),N=r(k.prototype,"zh_TW",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=r(k.prototype,"en",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=r(k.prototype,"ja",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=r(k.prototype,"ko",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),j=r(k.prototype,"fr",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),A=r(k.prototype,"de",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),C=r(k.prototype,"ru",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=k))||z));n._RF.pop()}}}));

System.register("chunks:///_virtual/AutoSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Language2.ts"],(function(e){var t,r,o,n,i,a,u,p;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,o=e._decorator,n=e.Sprite,i=e.resources,a=e.SpriteFrame,u=e.Component},function(e){p=e.Language}],execute:function(){var c;r._RF.push({},"1c6d61aecxGz6KtZ/oiXa/S","AutoSprite",void 0);var s=o.ccclass;o.property,e("AutoSprite",s("AutoSprite")(c=function(e){function r(){return e.apply(this,arguments)||this}return t(r,e),r.prototype.onLoad=function(){var e=this.node.getComponent(n);if(e){var t=e.spriteFrame.uuid,r=i.getAssetInfo(t),o=p.getLanguageCode();if(r&&r.path){var u=r.path;u=u.replace("/en/","/"+o+"/");var c=i.get(u,a);c?e.spriteFrame=c:i.load(u,a,(function(t,r){r&&(e.spriteFrame=r)}))}}},r}(u))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/Body.ts",["cc","./Object.ts"],(function(t){var i,s,e,h,n,r;return{setters:[function(t){i=t.cclegacy,s=t.Quat,e=t.Vec2,h=t.Vec3,n=t.Mat3},function(t){r=t.Dirty}],execute:function(){i._RF.push({},"32175/nErRA+62hIBEleIk+","Body",void 0);t("cBody",function(){function t(t){this.id=0,this.fid=-1,this.mask=0,this.group=0,this.shape=null,this.object=null,this.weight=0,this.isDirty=7,this.lower=0,this.upper=0,this.aabb=[0,0,0,0,0,0],this.isRemove=!1,this.isRetrieve=!0,this.isIdentity=!0,this.inCollider=!1,this.raidus=0,this.points=[],this.center=new h,this.rotMat3=new n,this.halfSize=new h,this.scale=new h(1,1,1),this.isAgent=!1,this.maxNeighbors=0,this.neighborDist=0,this.maxVelocity=0,this.newVelocity=new h,this.prefVelocity=new h,this.orcaLines=[],this.object=t}var i=t.prototype;return i.updateBound=function(t){void 0===t&&(t=r.NON);var i=this.object;if(t|=i.hasChangeDirty(),this.isAgent&&(this.newVelocity.set(i.velocity),this.prefVelocity.set(i.tryVelocity),i.velocity.set(i.tryVelocity)),t>0){var e=!1,h=this.shape;if(t&r.S){e=!0;var n=this.getScale();this.scale.x=n.x>=0?n.x:-n.x,this.scale.y=n.y>=0?n.y:-n.y,this.scale.z=n.z>=0?n.z:-n.z}if(t&r.R){this.isIdentity=!1;var o=this.getRotation();this.rotMat3.fromQuat(o),o.equals(s.IDENTITY,1e-4)&&(this.isIdentity=!0),e=!0}e&&h.updateAABB(this.getScale(),this.getRotMat3(),this.isIdentity);var a=this.aabb,c=h.aabb,l=this.getPosition();return a[0]=c[0]+l.x,a[1]=c[1]+l.y,a[2]=c[2]+l.z,a[3]=c[3]+l.x,a[4]=c[4]+l.y,a[5]=c[5]+l.z,this.isDirty=15,!0}return!1},i.clear=function(){this.shape=null,this.object=null,this.isRemove=!1,this.inCollider=!1,this.orcaLines.length=0},i.getRotMat3=function(){return this.rotMat3},i.getScale=function(){return this.object.node.worldScale},i.getPosition=function(){return this.object.node.worldPosition},i.getRotation=function(){return this.object.node.worldRotation},i.getCenter=function(){if(1&this.isDirty){this.isDirty&=-2;var t=this.aabb,i=this.center;i.x=.5*(t[0]+t[3]),i.y=.5*(t[1]+t[4]),i.z=.5*(t[2]+t[5])}return this.center},i.getRaidus=function(){if(2&this.isDirty){this.isDirty&=-3;var t=this.scale,i=this.shape.radius;this.raidus=Math.max(t.x,t.y,t.z)*i}return this.raidus},i.getHalfSize=function(){if(4&this.isDirty){this.isDirty&=-5;var t=this.scale,i=this.shape.size,s=this.halfSize;s.x=t.x*i.x*.5,s.y=t.y*i.y*.5,s.z=t.z*i.z*.5}return this.halfSize},i.getPoints=function(){if(8&this.isDirty){this.isDirty&=-9;for(var t=this.scale,i=this.getRotMat3(),s=this.getCenter(),h=this.points,n=this.shape.point2Ds,r=n.length,o=0;o<r;o++){var a=n[o].x*t.x,c=n[o].y*t.y;null==h[o]&&(h[o]=new e),h[o].x=a*i.m00+c*i.m03+0*i.m06+s.x,h[o].y=a*i.m01+c*i.m04+0*i.m07+s.y}h.length=r}return this.points},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/Body2.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,a,r,o,u,s,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e._decorator,r=e.ccenum,o=e.Node,u=e.Vec3,s=e.Quat,l=e.EventHandler}],execute:function(){var c,p,h,d,f,y,m,b,_;i._RF.push({},"cc3bd+XM0NG7qb/F/djuun9","Body",void 0);var g=a.ccclass,M=a.property,v=(e("DevMessage",function(e){return e.EnableDebugger="EnableDebugger",e.ResetGroup="ResetGroup",e.ResetAll="ResetAll",e.ShowDialog="ShowDialog",e.actor_speed="actor_speed",e.camera_speed="camera_speed",e.ui_mode="ui_mode",e}({})),e("CameraMessage",function(e){return e.distance="distance",e.angle_x="angle_x",e.angle_y="angle_y",e.angle_z="angle_z",e.watch="watch",e}({})),e("ScreenOrientation",function(e){return e[e.Portrait=0]="Portrait",e[e.Landscape=1]="Landscape",e}({})),e("PhysicsGroup",function(e){return e[e.Default=1]="Default",e[e.Player=2]="Player",e[e.Enemy=4]="Enemy",e[e.GroundMark=16]="GroundMark",e}({})),e("GuideState",function(e){return e[e.None=0]="None",e[e.Wait=1]="Wait",e[e.Complete=2]="Complete",e}({})),e("GroundMarkType",function(e){return e[e.Collect=0]="Collect",e[e.Sell=1]="Sell",e}({})));r(v);var x=e("GroundMarkState",function(e){return e[e.Enable=0]="Enable",e[e.Disable=1]="Disable",e[e.Full=2]="Full",e}({}));r(x);var D=e("ResourcesType",function(e){return e[e.Meat1=0]="Meat1",e[e.Meat2=1]="Meat2",e[e.Meat4=2]="Meat4",e[e.Sword=3]="Sword",e[e.Brick=4]="Brick",e[e.Money=5]="Money",e[e.Shield=6]="Shield",e}({}));r(D);e("DropStatus",function(e){return e[e.DROP=0]="DROP",e[e.CHACK=1]="CHACK",e[e.FLY=2]="FLY",e[e.FINISH=3]="FINISH",e}({})),e("AxisPlane",function(e){return e[e.XY=0]="XY",e[e.XZ=1]="XZ",e[e.YZ=2]="YZ",e}({})),e("AxisFixed",(function(e,t,n){this.x=void 0,this.y=void 0,this.z=void 0,this.x=e,this.y=t,this.z=n}));o.prototype.test=function(){console.log("test")},u.prototype.same_value=function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z},u.prototype.threshold_check=function(e,t){return this.difference(this.x,e.x)>t.x||this.difference(this.y,e.y)>t.y||this.difference(this.z,e.z)>t.z},u.prototype.difference=function(e,t){return e<0?t>0?Math.abs(e)+t:0==t?Math.abs(e):e>t?Math.abs(t)-Math.abs(e):e<t?Math.abs(e)-Math.abs(t):0:t>0?e>t?e-t:e<t?t-e:0:0==t?e:e+Math.abs(t)},u.prototype.look=function(e,t){void 0===t&&(t=u.UP),u.subtract(this,this,e),u.normalize(this,this);var n=new s;s.fromViewUp(n,this,t);var i=new u;return n.getEulerAngles(i),i};e("EventConfig",(c=g("EventConfig"),p=M({type:l,displayName:"事件"}),h=M({displayName:"是否延迟触发"}),d=M({displayName:"延迟时间",visible:function(){return this.delay_emit}}),c((m=t((y=function(){n(this,"event",m,this),n(this,"delay_emit",b,this),n(this,"delay_time",_,this)}).prototype,"event",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),b=t(y.prototype,"delay_emit",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=t(y.prototype,"delay_time",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=y))||f)),e("PoolConfig",(function(e){var t=this;this.pool=[],e.forEach((function(e,n){t.pool.push({name:e.name,path:e.path,count:e.count,auto_supplement:e.auto_supplement,auto_expansion:e.auto_expansion,auto_example:e.auto_example,handler:e.handler})}))}));i._RF.pop()}}}));

System.register("chunks:///_virtual/Brick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DropBase.ts"],(function(e){var t,i,r,n,o,a,l,p,s,u,c,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.SpriteFrame,p=e.Node,s=e.Sprite,u=e.Color,c=e.tween},function(e){f=e.DropBase}],execute:function(){var h,y,d,m,b,g,v,N,S,B,w;o._RF.push({},"c6266eheDxDz5o5mPjrhuqc","Brick",void 0);var z=a.ccclass,D=a.property;e("Brick",(h=z("产物---矿石"),y=D({type:l,displayName:"平铺贴图"}),d=D({type:l,displayName:"斜着贴图"}),m=D({type:p,displayName:"燃烧特效节点"}),b=D({type:s,displayName:"显示用 Sprite"}),h((N=t((v=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"flatSprite",N,n(t)),r(t,"tiltSprite",S,n(t)),r(t,"fireNode",B,n(t)),r(t,"sprite",w,n(t)),t.isBurning=!1,t}i(t,e);var o=t.prototype;return o.start=function(){if(this.fireNode){var e=this.fireNode.getComponent(s);e&&(e.color=new u(255,255,255,0))}},o.update=function(e){},o.setSprite=function(e){this.sprite&&(this.sprite.spriteFrame=e?this.flatSprite:this.tiltSprite)},o.playBurnAnimation=function(e){var t=this;void 0===e&&(e=.75),!this.isBurning&&this.fireNode&&(this.isBurning=!0,this.fireNode.active=!0,this.scheduleOnce((function(){var i=t.fireNode.getComponent(s);i&&c(i).to(e,{color:new u(255,255,255,255)}).start()}),.3))},t}(f)).prototype,"flatSprite",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(v.prototype,"tiltSprite",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(v.prototype,"fireNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(v.prototype,"sprite",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=v))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/BrickTable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Body2.ts","./ResourcesDistributivePoint.ts","./Icarus.ts","./Brick.ts","./AudioPlay.ts"],(function(t){var e,r,i,o,n,c,s,a,u,p,l,f,b,_,y,h,k,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,n=t.asyncToGenerator,c=t.regeneratorRuntime},function(t){s=t.cclegacy,a=t._decorator,u=t.Prefab,p=t.Component,l=t.instantiate,f=t.Vec3},function(t){b=t.ResourcesType},function(t){_=t.ResourcesDistributivePoint},function(t){y=t.timer,h=t.Icarus},function(t){k=t.Brick},function(t){d=t.AudioPlay}],execute:function(){var g,m,v,B,P,R,T,w,x;s._RF.push({},"5b54eIzgRtAnY2eEbFHTsHx","BrickTable",void 0);var z=a.ccclass,D=a.property;t("BrickTable",(g=z("BrickTable"),m=D({type:b,displayName:"供给类型"}),v=D({type:_,displayName:"处理收集点"}),B=D({type:u,displayName:"矿石预制体"}),g((T=e((R=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return e=t.call.apply(t,[this].concat(n))||this,i(e,"supply_type",T,o(e)),i(e,"put_root",w,o(e)),i(e,"BrickPrefab",x,o(e)),e.on_cooking=!1,e}r(e,t);var s=e.prototype;return s.start=function(){this.enable_table()},s.update=function(t){this.put_root.resources_count()<this.put_root.max_count+100&&(this.on_cooking||this.cook_resources())},s.enable_table=function(){this.put_root.node.active=!0,this.on_cooking=!1},s.cook_resources=function(){var t=n(c().mark((function t(){var e,r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.on_cooking){t.next=2;break}return t.abrupt("return");case 2:return this.on_cooking=!0,t.next=5,y(h.output_speed_of_brick_factory/h.brick_factory_ratio,this);case 5:(e=l(this.BrickPrefab)).setWorldPosition(this.node.worldPosition.clone()),(r=e.getComponent(k))&&r.setSprite(!1),this.put_root.submit_resources(e,f.ZERO,2,.1),d.instance.kuangshan(),this.on_cooking=!1;case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e}(p)).prototype,"supply_type",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.Brick}}),w=e(R.prototype,"put_root",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(R.prototype,"BrickPrefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=R))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/CameraController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameGlobal.ts"],(function(o){var t,e,r,n,i,s,a,l,c,u,f,p;return{setters:[function(o){t=o.applyDecoratedDescriptor,e=o.inheritsLoose,r=o.initializerDefineProperty,n=o.assertThisInitialized},function(o){i=o.cclegacy,s=o._decorator,a=o.Node,l=o.Vec3,c=o.v3,u=o.tween,f=o.Component},function(o){p=o.GameGlobal}],execute:function(){var h,d,v,m,y,b,g;i._RF.push({},"1f7bbr8jIROUYqRlB/MVfMX","CameraController",void 0);var C=s.ccclass,w=s.property;o("CameraControl",(h=C("CameraControl"),d=w({type:a,displayName:"Boss 节点"}),v=w(a),h((b=t((y=function(o){function t(){for(var t,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return(t=o.call.apply(o,[this].concat(i))||this).offsetPos=new l(0,0,0),t.isMove=!1,t.target=null,r(t,"boss",b,n(t)),r(t,"gameFitNode",g,n(t)),t}e(t,o);var i=t.prototype;return i.onLoad=function(){p.cameraControl=this,this.focusOnBoss()},i.pause=function(){this.isMove=!1},i.update=function(o){this.isMove&&this.target&&this.cameraFollow(o)},i.cameraFollow=function(o){var t=c();l.add(t,this.target.worldPosition,this.offsetPos);var e=this.node.worldPosition,r=c();l.lerp(r,e,t,10*o),this.node.setWorldPosition(r)},i.focusOnBoss=function(){var o=this;this.target=this.boss,this.isMove=!0,this.scheduleOnce((function(){var t=p.playerController.node.worldPosition.clone();o.isMove=!1,u(o.node).to(1.5,{worldPosition:t}).call((function(){o.focusOnPlayer(),p.GameStart=!0})).start()}),1.5)},i.focusOnPlayer=function(){this.target=p.playerController.node,this.isMove=!0},t}(f)).prototype,"boss",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(y.prototype,"gameFitNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=y))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/CarController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActorCar.ts"],(function(e){var t,i,n,o,r,u,s,a,l,c,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,u=e._decorator,s=e.Prefab,a=e.Node,l=e.instantiate,c=e.Component},function(e){h=e.ActorCar}],execute:function(){var f,d,p,P,g,w,b,Q,v,y,C,q,m;r._RF.push({},"05e4730ijtCgp2+kNgE/74k","CarController",void 0);var S=u.ccclass,z=u.property;e("CarController",(f=S("CarController"),d=z(s),p=z(a),P=z([a]),g=z([a]),w=z(a),f((v=t((Q=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),u=0;u<i;u++)r[u]=arguments[u];return t=e.call.apply(e,[this].concat(r))||this,n(t,"soldierPrefab",v,o(t)),n(t,"spawnPoint",y,o(t)),n(t,"queuePoints",C,o(t)),n(t,"endPoints",q,o(t)),n(t,"parentNode",m,o(t)),t.soldiers=[],t.queueIndex=0,t.waitingQueue=[],t}i(t,e);var r=t.prototype;return r.onLoad=function(){},r.start=function(){this.queuePoints.forEach((function(e){e.designWorldPos=e.getWorldPosition().clone()}))},r.creat5soldier=function(){var e=this,t=0;this.schedule((function(){e.createSoldier(),++t>=5&&e.unscheduleAllCallbacks()}),.5)},r.createSoldier=function(){if(this.soldierPrefab&&this.spawnPoint){var e=l(this.soldierPrefab);"CustomerController-001"==this.node.name?e.setParent(this.parentNode):e.setParent(this.node),e.setWorldPosition(this.spawnPoint.worldPosition);var t=e.getComponent(h);t&&this.assignQueuePoint(t)}},r.assignQueuePoint=function(e){var t=this.waitingQueue.length%this.queuePoints.length,i=this.queuePoints[t];e.setQueuePoint(i,this),this.waitingQueue.push(e),1===this.waitingQueue.length&&e.allowFetchSword()},r.soldierFinished=function(e){var t=this,i=this.waitingQueue.indexOf(e);i>=0&&this.waitingQueue.splice(i,1),this.waitingQueue.forEach((function(e,i){var n=t.queuePoints[i];n?e.setQueuePoint(n,t):console.warn("soldierFinished: queuePoints[i] is undefined",i,t.queuePoints)})),this.waitingQueue.length>0&&this.waitingQueue[0].allowFetchSword(),this.createSoldier()},r.getNextQueuePoint=function(){for(var e,t=this,i=function(e){if(!t.waitingQueue.find((function(i){return i.point===t.queuePoints[e]})))return{v:t.queuePoints[e]}},n=0;n<this.queuePoints.length;n++)if(e=i(n))return e.v;return null},r.notifyPlayerTouchedSword=function(){if(this.waitingQueue.length>0){var e=this.waitingQueue[0];e.onPlayerTouchSword&&e.onPlayerTouchSword()}},r.resetQueue=function(){this.queueIndex=0},t}(c)).prototype,"soldierPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(Q.prototype,"spawnPoint",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(Q.prototype,"queuePoints",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=t(Q.prototype,"endPoints",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=t(Q.prototype,"parentNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=Q))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/CarMeatTableController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameGlobal.ts"],(function(t){var e,o,r,i,n,a,s,l,h,c,g,u,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,s=t.Node,l=t.Color,h=t.Collider2D,c=t.Contact2DType,g=t.Sprite,u=t.Component},function(t){d=t.GameGlobal}],execute:function(){var p,C,m,f,w;n._RF.push({},"c3b92iuifdNn5CeZ+3GPj/m","CarMeatTableController",void 0);var y=a.ccclass,P=a.property;t("CarMeatTableController",(p=y("CarMeatTableController"),C=P(s),p((w=e((f=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,r(e,"meatPosition",w,i(e)),e.triggerNames=["Player","CarryWorker"],e.swordWorkerIsFetching=!1,e.highlightColor=new l(36,255,64),e}o(e,t);var n=e.prototype;return n.onLoad=function(){this.meatPosition||(this.meatPosition=this.node.getChildByName("meatPosition")),this.initCollider()},n.start=function(){this.scheduleOnce((function(){var t=d.actorController.waitingQueue[0];t&&(t.stopFetch=!0)}),1)},n.initCollider=function(){if(this.meatPosition){var t=this.meatPosition.getComponent(h);t&&(t.on(c.BEGIN_CONTACT,this.onSwordBegin,this),t.on(c.END_CONTACT,this.onSwordEnd,this))}},n.onSwordBegin=function(t,e){var o=e.node,r=this.meatPosition.getComponent(g);if(-1!==this.triggerNames.indexOf(o.name)){var i=d.actorController;if(i&&0!==i.waitingQueue.length){var n=i.waitingQueue[0];if("CarryWorker"===o.name){if(this.swordWorkerIsFetching)return;this.swordWorkerIsFetching=!0,n.stopFetch=!1,d.stopget2=!1,r.color=this.highlightColor,n.onPlayerTouchSword()}else"Player"===o.name&&(this.swordWorkerIsFetching||(n.stopFetch=!1,d.stopget2=!1,r.color=this.highlightColor))}}},n.onSwordEnd=function(t,e){var o=e.node,r=this.meatPosition.getComponent(g);if(-1!==this.triggerNames.indexOf(o.name)){var i=d.actorController;if(i&&0!==i.waitingQueue.length){var n=i.waitingQueue[0];"CarryWorker"===o.name?this.swordWorkerIsFetching&&(this.swordWorkerIsFetching=!1,d.stopget2=!0,n.stopFetchSword(),r.color=l.WHITE):"Player"===o.name&&(this.swordWorkerIsFetching||(d.stopget2=!0,n.stopFetchSword(),r.color=l.WHITE))}}},e}(u)).prototype,"meatPosition",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=f))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/CarryWorker.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesDistributivePoint.ts","./PlayerController.ts","./Icarus.ts","./GameGlobal.ts","./Brick.ts","./AudioManager.ts"],(function(t){var i,e,s,o,n,r,a,l,h,c,u,f,p,d,_,g,k,v,m,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,s=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,a=t.Node,l=t.Collider2D,h=t.sp,c=t.Vec3,u=t.tween,f=t.easing,p=t.Component},function(t){d=t.ResourcesDistributivePoint},function(t){_=t.Packge},function(t){g=t.Icarus},function(t){k=t.GameGlobal,v=t.BRICK_HEIGHT},function(t){m=t.Brick},function(t){y=t.AudioManager}],execute:function(){var T,w,S,b,P,R,C,A,B,W,D,I,L,N,z;n._RF.push({},"e7492y3CZJBEripzbc+gqfJ","CarryWorker",void 0);var O=r.ccclass,U=r.property,G=t("ClerkState",function(t){return t[t.Take=0]="Take",t[t.Pay=1]="Pay",t[t.TakeWay=2]="TakeWay",t[t.Backoff=3]="Backoff",t[t.Birth=4]="Birth",t[t.Cell=5]="Cell",t}({}));t("CarryWorker",(T=O("CarryWorker"),w=U({type:d,displayName:"砖块工厂"}),S=U({type:d,displayName:"熔炉列表"}),b=U({type:a,displayName:"包裹挂点"}),P=U({type:l,displayName:"碰撞检测"}),R=U({type:a,displayName:"出生特效"}),C=U({type:h.Skeleton,displayName:"动画"}),T((W=i((B=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return i=t.call.apply(t,[this].concat(n))||this,s(i,"brick_factory",W,o(i)),s(i,"stoves",D,o(i)),s(i,"packge_root",I,o(i)),s(i,"collider",L,o(i)),s(i,"birth_effect",N,o(i)),s(i,"anim",z,o(i)),i.packge=null,i.state=G.Birth,i.start_path_position=null,i.request_resources=-1,i.temp_stove=null,i.stove=null,i.lastFacing="1",i.isSelling=!1,i.runing=!1,i.isalive=!1,i.working=!1,i.waitTimer=0,i.waiting=!1,i.isidle=!1,i.startrun=!1,i.guaji=!0,i}e(i,t);var n=i.prototype;return n.start=function(){this.stove=this.stoves[0],this.set_target()},n.update=function(t){var i=this;if(this.scheduleOnce((function(){i.guaji=!1}),2),!this.guaji){0==this.stoves[0].root.children.length&&(this.isSelling=!1,this.anim.timeScale=1),this.packge_root.setScale(-1,1);var e=this.packge&&this.packge.root&&this.packge.root.children.length>0;if(e&&!this.stove){var s=this.stoves.filter((function(t){return t.node.active}));s.length>0&&(this.stove=s.reduce((function(t,e){return c.distance(i.node.worldPosition,t.node.worldPosition)<c.distance(i.node.worldPosition,e.node.worldPosition)?t:e})),this.state=G.Backoff,this.start_path_position=this.node.worldPosition.clone(),this.ToRun_DownRight())}if(!e&&this.stoves&&this.stoves.length>0){var o=this.stoves[0],n=this.brick_factory.have_resources(),r=o.have_resources();if(r){if(this.state!==G.Pay&&this.state!==G.Birth)if(this.state=G.Take,this.working)0==this.stoves[0].root.children.length||(this.ToSell(),this.state=G.Cell,this.isSelling=!0);else{if(this.start_path_position=this.node.worldPosition.clone(),!this.stove||!this.stove.node||!this.stove.node.isValid)return;var a=this.stoves[0].node.worldPosition.clone(),l=g.lerp_move_by_speed(this.start_path_position,this.node.worldPosition.clone(),a,240,t);if(!this.startrun)return this.state=G.Pay,this.isSelling=!1,this.working=!0,this.ToSell(),void console.log("开始卖");this.ToRun_DownRight(),this.runing=!0,this.node.setWorldPosition(l.position),l.step>=1&&(this.state=G.Pay,this.ToSell(),this.runing=!1)}return}if(!r&&!n)return void(this.state!==G.Take&&this.state!==G.Birth&&(this.state=G.Take,this.ToIdle()));!r&&n&&this.state!==G.TakeWay&&(k.homeUp?(this.waiting=!1,this.waitTimer=0,this.check_find(),this.startrun=!0,this.ToRun_UpLeft(),this.isSelling=!1):this.waiting?(this.waitTimer+=t,this.ToIdle(),this.waitTimer>=2&&(this.waiting=!1,this.waitTimer=0,this.check_find(),console.log(3),this.startrun=!0,this.ToRun_UpLeft(),this.isSelling=!1)):(this.waiting=!0,this.waitTimer=0))}if(this.state==G.TakeWay){var h=g.lerp_move_by_speed(this.start_path_position,this.node.worldPosition.clone(),this.brick_factory.node.worldPosition.clone(),240,t);this.node.setWorldPosition(h.position),this.startrun=!0,console.log(2),this.ToRun_UpLeft(),this.runing=!0,h.step>=.78&&(this.check_take(),this.runing=!1)}else if(this.state==G.Backoff&&this.stove){var u=this.stove.node.worldPosition.clone(),f=g.lerp_move_by_speed(this.start_path_position,this.node.worldPosition.clone(),u,240,t);this.node.setWorldPosition(f.position),this.ToRun_DownRight(),this.runing=!0,f.step>=1&&(this.state=G.Pay,this.ToIdle(),this.runing=!1,this.stove.jiaofu_work(this))}}},n.lookAtTarget=function(t){if(t){var i=this.node.worldPosition;t.y<i.y?this.lastFacing="1":this.lastFacing="2"}},n.take_resources=function(){if(!this.packge||!this.packge.root)return null;if(0==this.packge.root.children.length)return null;y.soundPlay("collect");var t=this.packge.root.children[this.packge.root.children.length-1];return t.active=!0,t},n.check_find=function(){if(this.state!=G.TakeWay){if(this.state=G.TakeWay,this.start_path_position=this.node.worldPosition.clone(),this.isSelling)return;console.log(1),this.startrun=!0,this.ToRun_UpLeft()}},n.play_birth_effect=function(){var t=this;this.birth_effect&&(this.scheduleOnce((function(){y.soundPlay("Apprence"),t.node.active=!0}),.1),this.birth_effect.active=!0,this.scheduleOnce((function(){t.birth_effect.active=!1}),1))},n.set_target=function(){var t=this;this.scheduleOnce((function(){t.node.active=!0}),.3),this.isalive=!0,this.play_birth_effect(),this.packge=new _,this.packge.root=this.packge_root;var i=this.node.getScale(new c);u(this.node).set({scale:c.ZERO}).to(.2,{scale:i},{easing:f.backOut}).call((function(){t.state=G.TakeWay,t.start_path_position=t.node.worldPosition.clone(),t.isSelling||t.ToIdle()})).start()},n.check_take=function(){this.state!=G.Take&&(this.state=G.Take,this.collect_resources_from_resources({type:this.brick_factory.type,target:this.brick_factory}),this.ToIdle())},n.collect_resources_from_resources=function(t){var i=this;if(t.target.have_resources()){var e=this.packge.root.children.length;if(e>=10)return;e>=k.MAX_STACKING_COUNT+1&&(e=k.MAX_STACKING_COUNT+1);var s=new c(0,v*e,0);t.target.request_resources(this.packge.root,s,(function(t){y.soundPlay("collect");var e=i.packge.root.children.indexOf(t);e>=9&&i.resources_complete();var s=t.getComponent(m);s&&(s.setSprite(!1),s.node.setScale(-1,1)),t.setPosition(new c(0,v*e,0))}),new c(0,0,0),!1),this.request_resources=setTimeout((function(){i.collect_resources_from_resources(t)}),1e3*g.actor_request_time)}else this.resources_complete()},n.resources_complete=function(){var t=this.stoves.filter((function(t){return t.node.active}));if(!(t.length>0))return this.stove=null,void(this.state=G.Take);this.stove=t.reduce((function(t,i){return t.resources_count()<=i.resources_count()?t:i})),this.state=G.Backoff,this.start_path_position=this.node.worldPosition.clone(),this.stove&&this.node.lookAt(this.stove.node.worldPosition.clone().subtract3f(0,170,0))},n.ToIdle=function(){this.runing=!1,this.anim.setSkin("idle"),this.anim.setAnimation(0,"idle",!0),this.anim.setSlotsToSetupPose()},n.ToRun_Down=function(){this.anim.setSkin("run_LookDown"),this.anim.setAnimation(0,"run",!0),this.anim.setSlotsToSetupPose(),this.anim.node.setScale(1,1)},n.ToRun_DownRight=function(){this.runing||(this.runing=!0,this.anim.setSkin("run_LookDownLeft"),this.anim.setAnimation(0,"run",!0),this.anim.setSlotsToSetupPose(),this.anim.node.setScale(-1,1))},n.ToRun_UpLeft=function(){this.runing||(this.anim.setSkin("run_LookUpLeft"),this.anim.setAnimation(0,"run",!0),this.anim.setSlotsToSetupPose(),this.anim.node.setScale(1,1))},n.ToSell=function(){this.state!=G.Cell&&!this.isSelling&&this.working&&(console.log("卖砖动画"),this.runing=!1,this.anim.timeScale=.75,this.anim.setSkin("sell"),this.anim.setAnimation(0,"sell",!0),this.anim.setSlotsToSetupPose(),this.anim.node.setScale(1,1))},i}(p)).prototype,"brick_factory",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(B.prototype,"stoves",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=i(B.prototype,"packge_root",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(B.prototype,"collider",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(B.prototype,"birth_effect",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(B.prototype,"anim",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=B))||A));n._RF.pop()}}}));

System.register("chunks:///_virtual/ChangeTable.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,a,n,i,r,l,o,c,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,o=e.Node,c=e.Vec3,s=e.tween,u=e.Component}],execute:function(){var p,b,h,f,y,g,d;r._RF.push({},"4d514j9uQlJ4oX3zXYeB4Db","ChangeTable",void 0);var v=l.ccclass,w=l.property;e("ChangeTable",(p=v("ChangeTable"),b=w({type:o,displayName:"桌子1"}),h=w({type:o,displayName:"围栏"}),p((g=t((y=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(t,"table1",g,i(t)),n(t,"weilan",d,i(t)),t}a(t,e);var r=t.prototype;return r.start=function(){},r.change_to_table1=function(){this.weilan.active=!1,this.table1.active=!0,this.table1.setScale(new c(0,0,0)),s(this.table1).to(.3,{scale:new c(-1,1,1)},{easing:"backOut"}).start()},t}(u)).prototype,"table1",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(y.prototype,"weilan",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=y))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/Collider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Agent.ts","./Body.ts","./Object.ts","./Shape.ts"],(function(i){var e,t,r,s,o,n,a;return{setters:[function(i){e=i.createClass},function(i){t=i.cclegacy},function(i){r=i.Agent},function(i){s=i.cBody},function(i){o=i.Dirty,n=i.Trigger},function(i){a=i.ShapeSupport}],execute:function(){t._RF.push({},"b8f21pCQRxIBbsSYt0B2Nvo","Collider",void 0),i("cCollider",function(){function i(){this.id=0,this.pools=[],this.axis=-1,this.frameID=0,this.insertID=0,this.bodys=[],this.isDirty=!1,this.pairs=new Map}var t=i.prototype;return t.create=function(i){var e=this.pools.pop();return e?(e.object=i,e):((e=new s(i)).id=this.id++,e)},t.insert=function(i,e){void 0===e&&(e=!1),i&&(i.inCollider||(this.bodys.push(i),i.inCollider=!0),i.isRemove=!1,i.isRetrieve=!1,i.fid=this.insertID++,e&&i.object&&(i.object.isDirty=o.RTS))},t.remove=function(i,e){void 0===e&&(e=!1),i&&(i.isRemove=!0,i.isRetrieve=e)},t.reset=function(){this.axis=-1,this.frameID=0,this.isDirty=!0;for(var i=this.bodys,e=i.length-1;e>=0;e--){var t=i[e];this.pools.push(t),t.clear()}i.length=0},t.clear=function(){this.id=0,this.axis=-1,this.frameID=0,this.isDirty=!0,this.pools.length=0;for(var i=this.bodys,e=i.length-1;e>=0;e--)i[e].clear();i.length=0},t.update=function(i){this.reBuild(),this.triggers(),r.inst.process(this.bodys)},t.triggers=function(){++this.frameID;var i=this.axis,e=i>>2&3,t=i>>4&3,s=this.bodys,o=r.inst,n=0,h=0,f=s.length;for(n=0;n<f;n++){var l=s[n];if(!l.isRemove){var d=l.aabb,u=d[e],c=d[t],v=l.mask,g=l.group,p=l.upper,b=l.object;for(h=n+1;h<f;h++){var y=s[h];if(!y.isRemove){if(p<=y.lower)break;var m=y.aabb,D=y.object,R=v&y.group,x=y.mask&g;if(!(u>m[e+3]||m[e]>d[e+3]||c>m[t+3]||m[t]>d[t+3])&&(l.isAgent&&y.isAgent&&(o.check(l,y),o.check(y,l)),R||x)){var I=b.shape.type,j=D.shape.type;if(I>j){if(!a[j|I](y,l))continue}else if(!a[I|j](l,y))continue;l.id<y.id?this.onTrigger(y,l,(x?1:0)|(R?2:0)):this.onTrigger(l,y,(R?1:0)|(x?2:0))}}}}}this.endTrigger()},t.onTrigger=function(i,e,t){var r=0,s=(i.id*(i.id+1)>>1)+e.id-1,o=this.pairs,a=o.get(s);void 0!==a?(r=n.stay,a.fida==i.fid&&a.fidb==e.fid||(r=n.enter,a.fida=i.fid,a.fidb=e.fid),a.frameID=this.frameID,a.state=t):(r=n.enter,o.set(s,{id:s,a:i,b:e,fida:i.fid,fidb:e.fid,frameID:this.frameID,state:t}));var h=i.object;1&t&&h&&h.trigger&&!i.isRemove&&h.onTrigger(e,r);var f=e.object;2&t&&f&&f.trigger&&!e.isRemove&&f.onTrigger(i,r)},t.endTrigger=function(){for(var i=[],e=this.pairs,t=e.size,r=this.frameID,s=e.values(),o=0;o<t;o++){var a=s.next().value,h=a.a,f=a.b;if(a.frameID!=r||h.isRemove||f.isRemove){if(a.fida==h.fid&&a.fidb==f.fid){var l=h.object;l&&l.trigger&&!h.isRemove&&l.onTrigger(f,n.exit);var d=f.object;d&&d.trigger&&!f.isRemove&&d.onTrigger(h,n.exit)}i.push(a.id)}}for(t=i.length-1;t>=0;)e.delete(i[t--]);i.length=0},t.reBuild=function(){var i=!1,e=this.preBuildAxis();if(((3&e)!=(3&this.axis)||this.axis<0)&&(this.axis=e,i=!0),i||this.isDirty){this.isDirty=!1;var t=this.bodys;e=3&this.axis;for(var r=0,s=t.length;r!==s;r++){var o=t[r],n=o.aabb;o.lower=n[e],o.upper=n[e+3]}i?t.sort((function(i,e){return i.lower-e.lower})):this.sort(t)}},t.sort=function(i){var e,t=0,r=0;for(t=1,e=i.length;t<e;t++){var s=i[t],o=s.lower;for(r=t-1;r>=0;r--){var n=i[r];if(n.lower<=o)break;i[r+1]=n}r+1!=t&&(i[r+1]=s)}},t.preBuildAxis=function(){for(var i=0,e=0,t=0,r=0,s=0,o=0,n=0,a=0,h=0,f=0,l=this.bodys,d=l.length,u=0,c=!1,v=0;v<d;v++){var g=l[v];if(g.isRemove)g.isRetrieve&&(this.pools.push(g),g.clear()),g.inCollider=!1;else{++u<=v&&(l[u-1]=g),g.updateBound()&&(c=!0);var p=g.aabb,b=p[3]-p[0],y=p[4]-p[1],m=p[5]-p[2];a+=b*b,h+=y*y,f+=m*m;var D=.5*(p[3]+p[0]);e+=D,t+=D*D;var R=.5*(p[4]+p[1]);r+=R,s+=R*R;var x=.5*(p[5]+p[2]);o+=x,n+=x*x}}this.bodys.length=u,this.isDirty=c;var I=1/u,j=(t-e*e*I)*(a=a>0?u/a:0),T=(s-r*r*I)*(h=h>0?u/h:0),B=(n-o*o*I)*(f=f>0?u/f:0);return 0==j&&(j=a),0==T&&(T=h),0==B&&(B=f),j>T?j>B?(i=0,i|=T>B?36:24):(i=2,i|=j>T?16:4):T>B?(i=1,i|=j>B?32:8):(i=2,i|=j>T?16:4),i},e(i,null,[{key:"inst",get:function(){return null==this._inst&&(this._inst=new i),this._inst}}]),i}())._inst=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/commonDefine.ts",["cc"],(function(e){var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"9bc31VX82BLmrNk6te4smAG","commonDefine",void 0);e("ObserverObj",(function(e){this.value=void 0,e&&(this.value=e)})),e("KeyValuePair",(function(e,i){this.Key=void 0,this.Value=void 0,this.Key=e,this.Value=i}));i._RF.pop()}}}));

System.register("chunks:///_virtual/Contants.ts",["cc"],(function(_){var n;return{setters:[function(_){n=_.cclegacy}],execute:function(){n._RF.push({},"9f925YoawhP+o/DGOMCh2v+","Contants",void 0);_("GAME_STATUS",function(_){return _[_.GAME_INIT=0]="GAME_INIT",_[_.GAME_PLAYING=1]="GAME_PLAYING",_[_.GAME_PAUSE=2]="GAME_PAUSE",_[_.GAME_END=3]="GAME_END",_}({})),_("EVENTS",function(_){return _[_.UI_RECRUIT_SHOW=0]="UI_RECRUIT_SHOW",_[_.SELECT_HERO=1]="SELECT_HERO",_[_.UPGRADE1=2]="UPGRADE1",_[_.UPGRADE2=3]="UPGRADE2",_[_.BUILDING=4]="BUILDING",_}({})),_("DT_NAME",function(_){return _.ARROW_TOWER="JianTaDiTie",_.ARROW_TOWER1="JianTaDiTie1",_.ARROW_TOWER2="JianTaDiTie2",_.ARROW_TOWER3="JianTaDiTie3",_.ARROW_TOWER4="JianTaDiTie4",_.ARROW_TOWER5="JianTaDiTie5",_.ARROW_TOWER6="JianTaDiTie6",_.CHUAN_SONG_DAI="ChuanSongDaiDiTie",_.TIE_JIANG_PU="TieJiangPuDiTie",_.UPGRADE1="UpgradeDiTie1",_.UPGRADE2="UpgradeDiTie2",_}({})),_("HERO_NAME",{JIA_TE_LIN:"N03",PEN_HUO_QI:"N04",HUO_JIAN_TONG:"N05",JI_GUANG_QIANG:"N07"}),_("PLAYER_ANIMATION",function(_){return _.FRONT_ATTACK="1_attack",_.FRONT_ATTACK_RUN="1_attackrun",_.FRONT_DIE="1_die",_.FRONT_FORGE="1_forge",_.FRONT_IDLE="1_idle",_.FRONT_RUN="1_run",_.NO_IDLE="1_idle2",_.BACK_ATTACK="2_attack",_.BACK_ATTACK_RUN="2_attackrun",_.BACK_DIE="2_die",_.BACK_FORGE="2_forge",_.BACK_IDLE="2_idle",_.BACK_RUN="2_run",_}({})),_("PLAYER_ACTION",function(_){return _.IDLE="idle",_.RUN="run",_.ATTACK="attack",_}({})),_("SOLDIER_ANIMATION",function(_){return _.IDLE="2_idle2",_.IDLE1="1_idle2",_.RUN1="2_run",_.RUN2="1_run2",_.UN_IDLE="idle kongshou",_.RUN="2_run2",_.UN_RUN="run kongshou",_.ATTACK="2_attack",_.ATTACKRUN="attackrun",_.DIE1="2_die2",_.DIE="2_die",_}({})),_("SOLDIER_ACTION",function(_){return _.FRONT_ATTACK="1_attack",_.FRONT_IDLE="1_idle",_.FRONT_RUN="1_run",_}({})),_("ENEMY_ANIMATION",function(_){return _.IDLE="idle",_.RUN="run",_.ATTACK="attack3",_.DIE="die",_}({})),_("ENEMY_SOLDIER",function(_){return _.IDLE="idle",_.RUN="run",_.ATTACK="attack2",_}({})),_("Hero_AnimName",function(_){return _.IDLE="idle",_.ATTACK="attack",_.SKILL="skill",_}({})),_("Direction_Type",function(_){return _[_.Left=1]="Left",_[_.Right=2]="Right",_[_.Up=3]="Up",_[_.Down=4]="Down",_}({})),_("GroupDefine",function(_){return _.P="P",_.E="E",_.W="W",_.H="H",_.M="M",_.S="S",_.B="B",_}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/CustomerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActorCustomer.ts"],(function(e){var t,i,n,o,r,u,s,a,l,c,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,u=e._decorator,s=e.Prefab,a=e.Node,l=e.instantiate,c=e.Component},function(e){h=e.ActorCustomer}],execute:function(){var f,d,P,p,g,w,b,Q,v,y,m,C,q;r._RF.push({},"dcd3fR/AG9JUY654DnXG2DJ","CustomerController",void 0);var S=u.ccclass,z=u.property;e("CustomerController",(f=S("CustomerController"),d=z(s),P=z(a),p=z([a]),g=z([a]),w=z(a),f((v=t((Q=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),u=0;u<i;u++)r[u]=arguments[u];return t=e.call.apply(e,[this].concat(r))||this,n(t,"soldierPrefab",v,o(t)),n(t,"spawnPoint",y,o(t)),n(t,"queuePoints",m,o(t)),n(t,"endPoints",C,o(t)),n(t,"parentNode",q,o(t)),t.soldiers=[],t.queueIndex=0,t.waitingQueue=[],t}i(t,e);var r=t.prototype;return r.onLoad=function(){},r.start=function(){this.queuePoints.forEach((function(e){e.designWorldPos=e.getWorldPosition().clone()}))},r.creat5soldier=function(){var e=this,t=0;this.schedule((function(){e.createSoldier(),++t>=5&&e.unscheduleAllCallbacks()}),.5)},r.createSoldier=function(){if(this.soldierPrefab&&this.spawnPoint){var e=l(this.soldierPrefab);"CustomerController"==this.node.name?e.setParent(this.parentNode):e.setParent(this.node),e.setWorldPosition(this.spawnPoint.worldPosition);var t=e.getComponent(h);t&&this.assignQueuePoint(t)}},r.assignQueuePoint=function(e){var t=this.waitingQueue.length%this.queuePoints.length,i=this.queuePoints[t];e.setQueuePoint(i,this),this.waitingQueue.push(e),1===this.waitingQueue.length&&e.allowFetchSword()},r.soldierFinished=function(e){var t=this,i=this.waitingQueue.indexOf(e);i>=0&&this.waitingQueue.splice(i,1),this.waitingQueue.forEach((function(e,i){var n=t.queuePoints[i];n?e.setQueuePoint(n,t):console.warn("soldierFinished: queuePoints[i] is undefined",i,t.queuePoints)})),this.waitingQueue.length>0&&this.waitingQueue[0].allowFetchSword(),this.createSoldier()},r.getNextQueuePoint=function(){for(var e,t=this,i=function(e){if(!t.waitingQueue.find((function(i){return i.point===t.queuePoints[e]})))return{v:t.queuePoints[e]}},n=0;n<this.queuePoints.length;n++)if(e=i(n))return e.v;return null},r.notifyPlayerTouchedSword=function(){if(this.waitingQueue.length>0){var e=this.waitingQueue[0];e.onPlayerTouchSword&&e.onPlayerTouchSword()}},r.resetQueue=function(){this.queueIndex=0},t}(c)).prototype,"soldierPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(Q.prototype,"spawnPoint",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(Q.prototype,"queuePoints",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=t(Q.prototype,"endPoints",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=t(Q.prototype,"parentNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=Q))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/DigWorker.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesDistributivePoint.ts","./Brick.ts","./Body2.ts","./GameGlobal.ts"],(function(e){var t,i,n,r,o,a,s,c,u,l,p,f,d,h,g,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.sp,c=e.Prefab,u=e.Node,l=e.instantiate,p=e.Vec3,f=e.Component},function(e){d=e.ResourcesDistributivePoint},function(e){h=e.Brick},function(e){g=e.ResourcesType},function(e){m=e.GameGlobal}],execute:function(){var _,b,y,k,v,w,D,P,B,N,z,E,R,W,O;o._RF.push({},"29b16El+RlJOpkpYd3RvjsB","DigWorker",void 0);var S=a.ccclass,G=a.property;e("DigWorker",(_=S("DigWorker"),b=G({type:s.Skeleton,displayName:"动画"}),y=G({type:g,displayName:"供给类型"}),k=G({type:d,displayName:"处理收集点"}),v=G({type:c,displayName:"矿石预制体"}),w=G(u),D=G({type:s.Skeleton,displayName:"采矿特效"}),_((N=t((B=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"anim",N,r(t)),n(t,"supply_type",z,r(t)),n(t,"put_root",E,r(t)),n(t,"BrickPrefab",R,r(t)),n(t,"spawnNode",W,r(t)),n(t,"digEffect",O,r(t)),t.on_working=!1,t}i(t,e);var o=t.prototype;return o.start=function(){var e=this;this.schedule((function(){e.start_dig()}),.5)},o.start_dig=function(){var e=this;m.GameStart&&("DigWorker1"==this.node.name&&this.scheduleOnce((function(){e.start_dig_once()}),.3),"DigWorker2"==this.node.name&&this.scheduleOnce((function(){e.start_dig_once()}),.6),"DigWorker3"==this.node.name&&this.scheduleOnce((function(){e.start_dig_once()}),.45))},o.start_dig_once=function(){var e=this;this.anim&&!this.on_working&&(this.on_working=!0,this.anim.setAnimation(0,"1_dig2",!1),this.anim.timeScale=.75,this.digEffect.node.active=!0,this.digEffect.timeScale=2,this.anim.setCompleteListener((function(){e.generate_brick(),e.on_working=!1,e.digEffect.setAnimation(0,"animation",!1),e.scheduleOnce((function(){return e.digEffect.node.active=!1}),.15),e.scheduleOnce((function(){return e.start_dig_once()}),.01)})))},o.generate_brick=function(){if(this.put_root&&this.BrickPrefab&&this.spawnNode&&!(this.put_root.resources_count()>=this.put_root.max_count+100)){var e=l(this.BrickPrefab);e.setWorldPosition(this.spawnNode.worldPosition.clone());var t=e.getComponent(h);t&&t.setSprite(!1),this.put_root.submit_resources(e,p.ZERO,2,.25)}},t}(f)).prototype,"anim",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(B.prototype,"supply_type",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.Brick}}),E=t(B.prototype,"put_root",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(B.prototype,"BrickPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(B.prototype,"spawnNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(B.prototype,"digEffect",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=B))||P));o._RF.pop()}}}));

System.register("chunks:///_virtual/Door.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameGlobal.ts","./Soldier_Work.ts"],(function(o){var t,e,i,n,r,a,l,s,c,u,p;return{setters:[function(o){t=o.applyDecoratedDescriptor,e=o.inheritsLoose,i=o.initializerDefineProperty,n=o.assertThisInitialized},function(o){r=o.cclegacy,a=o._decorator,l=o.Node,s=o.Animation,c=o.Component},function(o){u=o.GameGlobal},function(o){p=o.Soldier_Wrok}],execute:function(){var h,f,d,m,y,w,b,g,D,k,v;r._RF.push({},"81530cSDLdBuKLDJLIsl+Lt","Door",void 0);var S=a.ccclass,N=a.property;o("Door",(h=S("Door"),f=N(l),d=N({type:p,displayName:"打熊工人1"}),m=N({type:p,displayName:"打熊工人2"}),y=N({type:p,displayName:"打熊工人3"}),h((g=t((b=function(o){function t(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return(t=o.call.apply(o,[this].concat(r))||this).isOpen=!1,t.anim=null,i(t,"doorNode",g,n(t)),i(t,"work1",D,n(t)),i(t,"work2",k,n(t)),i(t,"work3",v,n(t)),t}e(t,o);var r=t.prototype;return r.start=function(){this.anim=this.getComponent(s),this.anim||console.warn("Door: 没有挂载 Animation 组件！"),this.close()},r.update=function(o){if(0!=u.GameStart){var t=u.playerController.node;if(t&&this.anim){var e=this.doorNode.worldPosition.clone().subtract(t.worldPosition).length(),i=this.getDistanceSafe(this.work1),n=this.getDistanceSafe(this.work2),r=this.getDistanceSafe(this.work3);(e<200||i<70||n<70||r<70)&&!this.isOpen?this.open():e>=200&&i>=70&&n>=70&&r>=70&&this.isOpen&&this.close()}}},r.getDistanceSafe=function(o){return o.working?this.doorNode.worldPosition.clone().subtract(o.node.worldPosition).length():99999},r.open=function(){this.isOpen=!0,this.anim.play("openDoor")},r.close=function(){this.isOpen=!1,this.anim.play("clossDoor")},t}(c)).prototype,"doorNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(b.prototype,"work1",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(b.prototype,"work2",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(b.prototype,"work3",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=b))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/DropBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Body2.ts","./Utils.ts"],(function(t){var e,o,n,i,s,r,a,c,l,d,u,p,f,h,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,s=t.createClass},function(t){r=t.cclegacy,a=t._decorator,c=t.Node,l=t.Vec3,d=t.math,u=t.tween,p=t.Component},function(t){f=t.ResourcesType,h=t.DropStatus},function(t){v=t.Utils}],execute:function(){var y,m,w,_,P,b,k;r._RF.push({},"f8d04yBKkhAopNFp5hWXvfv","DropBase",void 0);var N=a.ccclass,g=a.property;t("DropBase",(y=N("DropBase"),m=g({type:f,displayName:"资源类型"}),w=g({type:c,displayName:"影子"}),y((b=e((P=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,n(e,"type",b,i(e)),n(e,"shadow",k,i(e)),e.drop_action=null,e.duplicated=!1,e.status=h.DROP,e.isPick=!1,e.tempV3=new l,e.currForward=new l,e.tempPos=new l,e.speed=7.5,e}o(e,t);var r=e.prototype;return r.reuse=function(){this.node.active=!0},r.unuse=function(){this.isPick=!1,this.drop_action=null,this.status=h.DROP},r.take=function(){this.status=h.FINISH,this.isPick=!0},r.skip_check=function(){},r.look=function(t){l.subtract(this.tempV3,t,this.node.worldPosition.clone()),this.tempV3.normalize(),this.currForward.set(this.tempV3)},r.move_to_mark=function(t,e,o){var n=this,i=this.node.position.clone(),s=new l(0,0,0),r=t.clone();l.add(r,i,t),r.multiplyScalar(.5);var a=2*d.random()-1,c=2*d.random()-1;r.add3f(a,220,c);u(this.node).to(e,{position:t},{onUpdate:function(e,o){v.bezierCurve(o,i,r,t,s),n.node.setPosition(s)}}).call((function(){n.node.setPosition(t),n.node.setWorldScale(l.ONE);var e=n.node.scale.clone();v.jellyEffect(n.node,e.x,(function(){n.node.setWorldScale(l.ONE)})),o&&o()})).start(),u(this.node).to(e,{eulerAngles:new l(0,0,0)}).start()},r.move_to_position=function(t,e,o,n,i){var s=this;void 0===i&&(i=.5);var r=this.node.position.clone(),a=new l,c=new l;l.add(c,r,t),c.add3f(0,6*i,0);var d=this;this.drop_action=u(this.node).to(o,{position:t},{onUpdate:function(e,o){v.bezierCurve(o,r,c,t,a),d.node.setPosition(a)}}).call((function(){s.node.eulerAngles=e,s.node.setPosition(t),s.node.setScale(l.ONE),s.drop_action=null,n&&n(s.node)})).start()},r.move_to_position_blink=function(t,e,o,n,i,s){var r=this;void 0===e&&(e=new l(0,0,0)),void 0===i&&(i=.5);var a=this.node.position.clone(),c=new l,d=new l;l.add(d,a,t),d.add3f(0,6*i,0);var p=this;this.drop_action=u(this.node).to(o,{position:t,scale:l.ONE},{onUpdate:function(e,o){v.bezierCurve(o,a,d,t,c),p.node.setPosition(c)}}).call((function(){r.node.eulerAngles=r.node.eulerAngles.clone(),r.node.setPosition(t),r.node.setScale(l.ONE),s?(r.drop_action=null,n&&n(r.node)):u(r.node).to(.05,{scale:new l(1.1,1.1,1.1)}).to(.05,{scale:l.ONE}).union().repeat(2).call((function(){r.drop_action=null,n&&n(r.node)})).start()})).start()},r.drop=function(t,e,o,n,i){},r.destroy_self=function(){this.node.destroy(),this.node.active=!1},s(e,[{key:"Status",set:function(t){this.status=t}}]),e}(p)).prototype,"type",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.Money}}),k=e(P.prototype,"shadow",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=P))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/EndCard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayableSDK.ts","./AudioManager.ts"],(function(t){var e,n,i,o,a,r,l,s,u,c,p,d,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,l=t.Node,s=t.Vec3,u=t.tween,c=t.Button,p=t.Component},function(t){d=t.PlayableSDK},function(t){b=t.AudioManager}],execute:function(){var y,f,h,w,R,g,v,B,C;a._RF.push({},"c60b7kqoJpKdomVnIOPORY9","EndCard",void 0);var m=r.ccclass,E=r.property;t("EndCard",(y=m("EndCard"),f=E(l),h=E(l),w=E(l),y((v=e((g=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"bg",v,o(e)),i(e,"btnReplay",B,o(e)),e.btnTween=null,i(e,"sprite",C,o(e)),e}n(e,t);var a=e.prototype;return a.start=function(){this.addButtonListener()},a.update=function(t){},a.show=function(){this.node.active=!0,this.startBtnTween(),b.soundEnableSet(!1),b.musicEnableSet(!1)},a.show1=function(){this.node.active=!0,this.startBtnTween(),b.soundEnableSet(!1),b.musicEnableSet(!1)},a.startBtnTween=function(){this.btnReplay&&(this.btnReplay.setScale(new s(1,1,1)),this.btnTween=u(this.btnReplay).repeatForever(u().to(.5,{scale:new s(1.1,1.1,1)}).to(.5,{scale:new s(1,1,1)})).start())},a.addButtonListener=function(){this.btnReplay&&(this.btnReplay.getComponent(c)?this.btnReplay.on(c.EventType.CLICK,this.onBtnReplayClicked,this):console.warn("btnReplay 没有挂 Button 组件"))},a.onBtnReplayClicked=function(){console.log("按钮被点击，执行下载"),d.download("download")},e}(p)).prototype,"bg",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(g.prototype,"btnReplay",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(g.prototype,"sprite",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=g))||R));a._RF.pop()}}}));

System.register("chunks:///_virtual/Enemy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActorBase.ts","./Contants.ts","./SpineUtils.ts","./GameGlobal.ts","./AudioManager.ts","./EndCard.ts","./Meat.ts","./Body2.ts"],(function(t){var e,i,n,a,o,s,r,c,l,u,h,m,f,p,d,k,y,A,g,b,S,C,P,v,N;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,r=t.Prefab,c=t.Node,l=t.sp,u=t.Animation,h=t.PolygonCollider2D,m=t.Contact2DType,f=t.game,p=t.tween,d=t.Color,k=t.instantiate},function(t){y=t.ActorBase},function(t){A=t.GroupDefine,g=t.ENEMY_ANIMATION},function(t){b=t.SpineUtils},function(t){S=t.GameGlobal},function(t){C=t.AudioManager},function(t){P=t.EndCard},function(t){v=t.Meat},function(t){N=t.ResourcesType}],execute:function(){var T,E,D,_,w,O,z,L,H,I,M,G,B,R,W,x,F,U,j,q,V,X,Y;o._RF.push({},"86176vVwdlLX6Mr312+Gtg9","Enemy",void 0);var J=s.ccclass,K=s.property;t("Enemy",(T=J("Enemy"),E=K({type:r,displayName:"金币预制体"}),D=K({type:c,displayName:"金币掉落位置"}),_=K({type:c,displayName:"寻路点"}),w=K(l.Skeleton),O=K({type:P,displayName:"结束卡片"}),z=K({type:u,displayName:"受击特效"}),L=K({type:c,displayName:"攻击范围1"}),H=K({type:c,displayName:"攻击范围2"}),I=K({type:l.Skeleton,displayName:"攻击特效1"}),M=K({type:[c],displayName:"攻击特效2"}),T((R=e((B=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"meatPrefab",R,a(e)),n(e,"coinPosition",W,a(e)),n(e,"Point",x,a(e)),n(e,"spine",F,a(e)),n(e,"endCard",U,a(e)),n(e,"actor_hit",j,a(e)),n(e,"attackSurface1",q,a(e)),n(e,"attackSurface2",V,a(e)),n(e,"attackEffect1",X,a(e)),n(e,"attackEffect2",Y,a(e)),e.targetsActor=[],e.lastAttackAnim="attack2",e.isAttack=!1,e.isPlayHitAnim=null,e.anim=null,e}i(e,t);var o=e.prototype;return o.start=function(){var e=this;t.prototype.init.call(this,1,"Enemy",A.E),this.anim=this.animNode.getComponent(l.Skeleton),this.scheduleOnce((function(){e.ToRoar()}),.3),this.scheduleOnce((function(){e.ToIdle()}),1.75),this.isDead=!1,S.EnemyPoint=this.Point,S.enemy=this.node;var i=this.getComponent(h);i&&(i.on(m.BEGIN_CONTACT,this.onStartColliderAttack,this),i.on(m.END_CONTACT,this.onEndColliderAttack,this))},o.update=function(t){this.DoAttack()},o.onAttackEvent=function(){for(var t=0;t<this.targetsActor.length;t++){var e=this.targetsActor[t];e&&e.node.active&&!e.isDead&&e.subHp(this)}},o.attack_actor=function(){for(var t=0;t<this.targetsActor.length;t++){var e=this.targetsActor[t];e&&e.node.active&&!e.isDead&&e.subHp(this)}},o.onStartColliderAttack=function(t,e){var i=e.node;if("Player"==i.name||i.name.startsWith("Soldier_Work")){var n=i.getComponent(y);2==t.tag&&(-1!==this.targetsActor.indexOf(n)||n.isDead||this.targetsActor.push(n))}},o.onEndColliderAttack=function(t,e){var i=e.node;if(i.name.startsWith("Player")||i.name.startsWith("Soldier_Work")){var n=i.getComponent(y);if(2==t.tag){var a=this.targetsActor.indexOf(n);-1!==a&&this.targetsActor.splice(a,1)}}},o.DoAttack=function(){if(this.targetsActor&&0!==this.targetsActor.length){var t=f.totalTime;if(this.lastAttackTime<=0&&(this.lastAttackTime=t),!(t<this.lastAttackTime)){this.lastAttackTime=t+this.attackTime,this.isAttack=!0;var e="attack3"===this.lastAttackAnim?"attack2":"attack3";this.lastAttackAnim=e,"attack2"===e?this.PlayAttack1(e):this.PlayAttack2(e)}}},o.PlayAttack1=function(t){var e=this;this.spine.timeScale=1,this.scheduleOnce((function(){}),.3),this.scheduleOnce((function(){}),.85),this.scheduleOnce((function(){}),.7),this.scheduleOnce((function(){C.audioPlay("bearAttack",!1,1)}),.3),this.anim.setSkin("attack_LookDownLeft"),this.anim.setSlotsToSetupPose(),b.setAnimationCall(this.animNode,"attack",(function(){e.isAttack=!1;e.animNode.getComponent(l.Skeleton);e.spine.timeScale=1,e.attackEffect1.timeScale=1,e.ToIdle()}))},o.PlayAttack2=function(t){var e=this;this.spine.timeScale=1,this.scheduleOnce((function(){}),.3),this.scheduleOnce((function(){}),.7),this.scheduleOnce((function(){}),1),this.scheduleOnce((function(){C.audioPlay("bearAttack",!1,1)}),.1),this.anim.setSkin("attack_LookDownLeft"),this.anim.setSlotsToSetupPose(),b.setAnimationCall(this.animNode,"attack",(function(){e.isAttack=!1;e.animNode.getComponent(l.Skeleton);e.spine.timeScale=1,e.ToIdle()}))},o.subHp=function(e,i){var n=this;if(!this.isDead){var a=e;a&&(t.prototype.subHp.call(this,a,i),this.hp<50&&(this.hp=50),this.CreatorCoin(2),this.isPlayHitAnim||(this.isPlayHitAnim=!0,p(this.node).call((function(){n.animNode.getComponent(l.Skeleton).color=d.RED})).delay(.2).call((function(){n.animNode.getComponent(l.Skeleton).color=d.WHITE,n.isPlayHitAnim=!1})).start()),this.actor_hit.play("hitEffect"),this.hp<=0&&(this.isDead=!0,S.BossDead=!0,this.changeAnim(g.DIE,!1),this.scheduleOnce((function(){n.node.destroy(),n.endCard&&n.endCard.show(),C.soundPlay("qingzhushengli")}),1)))}},o.CreatorCoin=function(t){for(var e=0;e<t;e++){var i;if(((null==(i=S.playerController)?void 0:i.packge_count(N.Meat1))||0)>10)return;var n=k(this.meatPrefab).getComponent(v);n.node.setParent(this.node),n.node.setPosition(this.Point.getPosition()),n.drop_delay_player()}},o.changeAnim=function(t,e){this.curAnimName!=t&&(this.curAnimName=t,b.setAnimation(this.animNode.getComponent(l.Skeleton),this.curAnimName,e))},o.ToRoar=function(){this.anim.setSkin("roar"),this.anim.setAnimation(0,"roar",!1),this.anim.setSlotsToSetupPose()},o.ToAttack=function(){this.anim.setSkin("attack_LookDownLeft"),this.anim.setAnimation(0,"attack",!0),this.anim.setSlotsToSetupPose()},o.ToIdle=function(){this.anim.setSkin("idle_LookDownLeft"),this.anim.setAnimation(0,"idle",!0),this.anim.setSlotsToSetupPose()},e}(y)).prototype,"meatPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(B.prototype,"coinPosition",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(B.prototype,"Point",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(B.prototype,"spine",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(B.prototype,"endCard",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(B.prototype,"actor_hit",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=e(B.prototype,"attackSurface1",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(B.prototype,"attackSurface2",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(B.prototype,"attackEffect1",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(B.prototype,"attackEffect2",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=B))||G));o._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameGlobal.ts","./ActorBase.ts"],(function(e){var n,t,i,o,a,r,s,l,f,c,p,u,m,h;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,s=e._decorator,l=e.Prefab,f=e.Node,c=e.Component,p=e.math,u=e.instantiate},function(e){m=e.GameGlobal},function(e){h=e.ActorBase}],execute:function(){var d,g,y,P,w,v,b,R,E,C,z,A,N,X,Y;r._RF.push({},"f97ceFrZ6xMeauLk1kRf2M3","EnemyController",void 0);var M=s.ccclass,S=s.property;e("EnemyController",(d=M("EnemyController"),g=S({type:l,displayName:"敌人预制体"}),y=S({type:f,displayName:"生成父节点"}),P=S({type:[f],displayName:"生成点（四个）"}),w=S({displayName:"每个点至少生成数量"}),v=S({displayName:"偏移范围X ±"}),b=S({displayName:"偏移范围Y ±"}),d((C=n((E=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return n=e.call.apply(e,[this].concat(a))||this,i(n,"EnemySoldier",C,o(n)),i(n,"spawnParent",z,o(n)),i(n,"spawnPoints",A,o(n)),i(n,"minPerPoint",N,o(n)),i(n,"offsetXRange",X,o(n)),i(n,"offsetYRange",Y,o(n)),n.enemies=[],n}t(n,e);var r=n.prototype;return r.start=function(){this.spawnEnemiesAtPoints(),this.schedule(this.checkAndRespawn.bind(this),.1),m.enemies=this.enemies},r.update=function(e){m.enemies=this.enemies},r.spawnEnemiesAtPoints=function(){var e=this;if(this.EnemySoldier&&this.spawnParent&&0!==this.spawnPoints.length)for(var n,t=a(this.spawnPoints);!(n=t()).done;)for(var i=n.value,o=function(){var n=p.randomRange(-e.offsetXRange,e.offsetXRange),t=p.randomRange(-e.offsetYRange,e.offsetYRange),o=i.worldPosition.clone();o.x+=n,o.y+=t;var a=u(e.EnemySoldier);a.active=!1,e.scheduleOnce((function(){a.setWorldPosition(o),a.active=!0}),0),e.spawnParent.addChild(a);var r=a.getComponent(h);r&&e.enemies.push(r)},r=0;r<this.minPerPoint;r++)o()},r.checkAndRespawn=function(){if(this.spawnParent&&0!==this.spawnPoints.length){this.enemies=this.enemies.filter((function(e){return e.node&&e.node.isValid}));var e=this.spawnPoints.length*this.minPerPoint,n=this.enemies.length;if(n<e){var t=e-n;this.spawnMissingEnemies(t)}}},r.spawnMissingEnemies=function(e){for(var n=this,t=function(){var e=Math.floor(p.randomRange(0,n.spawnPoints.length)),t=n.spawnPoints[e],i=p.randomRange(-n.offsetXRange,n.offsetXRange),o=p.randomRange(-n.offsetYRange,n.offsetYRange),a=t.worldPosition.clone();a.x+=i,a.y+=o;var r=u(n.EnemySoldier);r.active=!1,n.scheduleOnce((function(){r.setWorldPosition(a),r.active=!0}),0),n.spawnParent.addChild(r);var s=r.getComponent(h);s&&n.enemies.push(s)},i=0;i<e;i++)t()},n}(c)).prototype,"EnemySoldier",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(E.prototype,"spawnParent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(E.prototype,"spawnPoints",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=n(E.prototype,"minPerPoint",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),X=n(E.prototype,"offsetXRange",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),Y=n(E.prototype,"offsetYRange",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),R=E))||R));r._RF.pop()}}}));

System.register("chunks:///_virtual/EnemySoldier.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActorBase.ts","./Contants.ts","./SpineUtils.ts","./GameGlobal.ts","./Meat.ts"],(function(t){var i,e,n,o,a,r,s,l,c,d,h,u,m,p,f,y,g,v,w,D,k,P,b,A,N;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy,s=t._decorator,l=t.CircleCollider2D,c=t.Prefab,d=t.Node,h=t.Animation,u=t.Vec3,m=t.Contact2DType,p=t.sp,f=t.math,y=t.game,g=t.tween,v=t.Color,w=t.ProgressBar,D=t.instantiate},function(t){k=t.ActorBase},function(t){P=t.GroupDefine},function(t){b=t.SpineUtils},function(t){A=t.GameGlobal},function(t){N=t.Meat}],execute:function(){var S,C,L,T,E,B,z,_,R,I,G,H;r._RF.push({},"e080cVzcLJCwL5xi8Fiy6Nq","EnemySoldier",void 0);var M=s.ccclass,W=s.property;t("EnemySoldier",(S=M("EnemySoldier"),C=W({type:l,displayName:"碰撞体"}),L=W({type:c,displayName:"肉预制体"}),T=W({type:d,displayName:"金币掉落位置"}),E=W({type:h,displayName:"受击特效"}),S((_=i((z=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return i=t.call.apply(t,[this].concat(a))||this,n(i,"collider2D",_,o(i)),n(i,"meatPrefab",R,o(i)),n(i,"coinPosition",I,o(i)),n(i,"actor_hit",G,o(i)),i.wanderDir=new u,i.wanderTimer=0,i.attackDistance=1.5,i.isAttacking=!1,n(i,"haveTarget",H,o(i)),i.isPlayHitAnim=null,i.isKnockingBack=!1,i.isIdle=!1,i.curDirName="LookDown",i.faceRight=!1,i}e(i,t);var r=i.prototype;return r.start=function(){t.prototype.init.call(this,0,"EnemySoldier",P.B),this.pickNewWanderDir(),this.collider2D.on(m.BEGIN_CONTACT,this.onStartCollider,this),this.collider2D.on(m.END_CONTACT,this.onEndCollider,this)},r.update=function(t){if(!this.isDead&&!this.isAttacking)if(this.haveTarget=A.joinAttackArea,this.haveTarget)if(this.target=this.findEnemy(),this.target&&!this.target.isDead){var i=this.target.node.worldPosition.clone().subtract(this.node.worldPosition),e=i.length();if(this.setDirectionByVec(i),e<=this.attackRadius)this.doAttack();else{i.normalize();var n=i.multiplyScalar(this.moveSpeed*t),o=this.node.worldPosition.clone().add(n);o.z=0,this.node.worldPosition=o,this.animNode.getComponent(p.Skeleton).timeScale=1.5,this.playAnim("run",!0)}}else this.doWander(t);else this.doWander(t)},r.onStartCollider=function(t,i){var e=i.node;if("EnemyWall"===e.name||"EnemySoldier"===e.name){this.pickNewWanderDir();var n=this.wanderDir.clone();n.x=-n.x,n.y=-n.y;var o=n.multiplyScalar(10),a=this.node.worldPosition.clone().add(o);a.z=0,this.node.worldPosition=a}},r.onEndCollider=function(t,i){},r.doWander=function(t){if(this.wanderTimer-=t,this.wanderTimer<=0&&this.pickNewWanderDir(),this.isIdle)this.playAnim("idle",!0);else{var i=this.node.worldPosition.clone();u.add(i,i,this.wanderDir.clone().multiplyScalar(this.moveSpeed*t)),i.z=0;var e=this.getNearbyEnemies();if(e.length>0){var n=this.calculateAvoidanceDirection(e);u.add(i,i,n)}this.node.worldPosition=i,this.setDirectionByVec(this.wanderDir),this.animNode.getComponent(p.Skeleton).timeScale=2,this.playAnim("run",!0)}},r.getNearbyEnemies=function(){for(var t,i=[],e=a(A.enemies);!(t=e()).done;){var n=t.value;if(n!==this&&!n.isDead&&n.curActorGrounp!==this.curActorGrounp)u.distance(this.node.worldPosition,n.node.worldPosition)<150&&i.push(n)}return i},r.calculateAvoidanceDirection=function(t){for(var i,e=new u(0,0,0),n=a(t);!(i=n()).done;){var o=i.value,r=this.node.worldPosition.clone().subtract(o.node.worldPosition);r.normalize(),e.add(r)}return e.normalize(),e.multiplyScalar(10),e},r.pickNewWanderDir=function(){if(0===f.randomRangeInt(0,2))this.isIdle=!0,this.wanderTimer=f.randomRange(2,3),this.wanderDir.set(0,0,0);else{this.isIdle=!1;var t=f.randomRange(0,2*Math.PI);this.wanderDir.set(Math.cos(t),Math.sin(t),0),this.wanderTimer=f.randomRange(1,1)}},r.doAttack=function(){var t=this;if(this.target&&!this.target.isDead){var i=y.totalTime;if(!(this.lastAttackTime>i)){this.lastAttackTime=i+this.attackTime,this.isAttacking=!0;var e=this.target.node.worldPosition.clone().subtract(this.node.worldPosition);this.setDirectionByVec(e),this.animNode.getComponent(p.Skeleton).timeScale=1,this.playAnim("attack",!0),this.scheduleOnce((function(){t.target&&!t.target.isDead&&(u.distance(t.node.worldPosition,t.target.node.worldPosition)<=t.attackRadius&&t.target.subHp(t,t.attack),t.isAttacking=!1)}),1)}}},r.findEnemy=function(){for(var t,i=this,e=A.allActors.filter((function(t){return(t.curActorGrounp===P.P||t.curActorGrounp===P.S)&&t!==i&&!t.isDead})),n=null,o=this.findEnemyDis,r=a(e);!(t=r()).done;){var s=t.value,l=u.distance(this.node.worldPosition,s.node.worldPosition);l<o&&(o=l,n=s)}return n},r.subHp=function(i,e,n){var o=this;if(!this.isDead){if(t.prototype.subHp.call(this,i,e),this.actor_hit.play("hitEffect"),this.isPlayHitAnim||(this.isPlayHitAnim=!0,g(this.node).call((function(){o.animNode.getComponent(p.Skeleton).color=v.RED})).delay(.2).call((function(){o.animNode.getComponent(p.Skeleton).color=v.WHITE,o.isPlayHitAnim=!1})).start()),n){var a=this.node.worldPosition.clone().subtract(i.node.worldPosition);a.normalize(),a.multiplyScalar(50),this.isKnockingBack=!0,g(this.node).by(.05,{worldPosition:a}).call((function(){o.isKnockingBack=!1})).start()}this.bloodBar&&(this.bloodBar.active=!0,this.bloodBar.getComponent(w).progress=this.hpPercent),this.scheduleOnce((function(){o.bloodBar.active=!1}),1),this.hp<=0&&(this.doDie(n),this.bloodBar.active=!1)}},r.doDie=function(t){var i=this;if(void 0===t&&(t=!1),!this.isDead){this.isDead=!0;var e="die_"+this.curDirName;this.animNode.getComponent(p.Skeleton).setSkin(e),this.playAnim("die",!1),this.creatorMeat(t);var n=A.enemies;if(n){var o=n.indexOf(this);-1!==o&&n.splice(o,1)}this.dieAnimation(.01,(function(){i.node.destroy()}))}},r.creatorMeat=function(t){void 0===t&&(t=!1);var i=D(this.meatPrefab);i.parent=this.node.parent;var e=this.node.worldPosition;i.setWorldPosition(e),t?i.getComponent(N).drop_delay_player():i.getComponent(N).drop_delay()},r.getDirName=function(t){var i=180*Math.atan2(t.y,t.x)/Math.PI;return i>=-22.5&&i<22.5?"LookLeft":i>=22.5&&i<67.5?"LookUpLeft":i>=67.5&&i<112.5?"LookUp":i>=112.5&&i<157.5?"LookUpLeft":i>=-67.5&&i<-22.5?"LookDownLeft":i>=-112.5&&i<-67.5?"LookDown":i>=-157.5&&i<-112.5?"LookDownLeft":"LookLeft"},r.setDirectionByVec=function(t){this.curDirName=this.getDirName(t),this.faceRight=t.x>0,this.updateFlip()},r.updateFlip=function(){this.mainNode&&this.mainNode.setScale(this.faceRight?new u(-1,1,1):new u(1,1,1))},r.playAnim=function(t,i){void 0===i&&(i=!0);var e=t+"_"+this.curDirName;this.animNode.getComponent(p.Skeleton).setSkin(e);var n=t;this.curAnimName!==n&&(this.curAnimName=n,b.setAnimation(this.animNode.getComponent(p.Skeleton),n,i))},i}(k)).prototype,"collider2D",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(z.prototype,"meatPrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(z.prototype,"coinPosition",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(z.prototype,"actor_hit",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=i(z.prototype,"haveTarget",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),B=z))||B));r._RF.pop()}}}));

System.register("chunks:///_virtual/EventController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StakeWork.ts","./GroundMark.ts","./SwordWorker.ts","./CarryWorker.ts","./ChangeTable.ts","./EndCard.ts","./ActorController.ts","./GameGlobal.ts","./AudioManager.ts","./CustomerController.ts","./Soldier_Work.ts","./ResourcesDistributivePoint.ts","./MeatDuplicator.ts","./GroundMarkDitie.ts","./CarController.ts","./CarMeatTableController.ts"],(function(e){var i,r,t,n,a,o,l,u,c,s,d,p,f,b,y,m,h,w,g,k,v,N,C,W,z,M,_;return{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.inheritsLoose,t=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Node,u=e.RigidBody2D,c=e.Vec3,s=e.tween,d=e.Component},function(e){p=e.StakeWork},function(e){f=e.GroundMark},function(e){b=e.SwordWorker},function(e){y=e.CarryWorker},function(e){m=e.ChangeTable},function(e){h=e.EndCard},function(e){w=e.ActorController},function(e){g=e.GameGlobal},function(e){k=e.AudioManager},function(e){v=e.CustomerController},function(e){N=e.Soldier_Wrok},function(e){C=e.ResourcesDistributivePoint},function(e){W=e.MeatDuplicator},function(e){z=e.GroundMarkDitie},function(e){M=e.CarController},function(e){_=e.CarMeatTableController}],execute:function(){var D,T,G,S,P,L,R,E,O,A,j,B,F,U,x,H,I,J,K,V,Y,q,Q,X,Z,$,ee,ie,re,te,ne,ae,oe,le,ue,ce,se,de,pe,fe,be,ye,me,he,we,ge,ke,ve,Ne,Ce,We,ze,Me,_e,De,Te,Ge,Se,Pe,Le,Re,Ee,Oe,Ae,je,Be,Fe,Ue,xe,He,Ie,Je,Ke,Ve,Ye,qe,Qe,Xe,Ze,$e,ei,ii,ri,ti,ni,ai,oi;a._RF.push({},"0e42760yYBA84oR73tUpt2j","EventController",void 0);var li=o.ccclass,ui=o.property;e("EventController",(D=li("EventController"),T=ui({type:N,displayName:"打熊工人1"}),G=ui({type:N,displayName:"打熊工人2"}),S=ui({type:N,displayName:"打熊工人3"}),P=ui({type:z,displayName:"打熊工人地贴2"}),L=ui({type:z,displayName:"打熊工人地贴3"}),R=ui({type:p,displayName:"StakeWorker工人"}),E=ui({type:b,displayName:"SwordWorker剑工人"}),O=ui({type:y,displayName:"CarryWorker搬运工人"}),A=ui({type:p,displayName:"ShieldWorker盾牌工人"}),j=ui({type:f,displayName:"发剑地标"}),B=ui({type:f,displayName:"搬运地标"}),F=ui({type:f,displayName:"盾牌地标"}),U=ui({type:f,displayName:"盾牌工人地标"}),x=ui({type:f,displayName:"桌子地标"}),H=ui({type:l,displayName:"火炉"}),I=ui({type:l,displayName:"铁砧"}),J=ui({type:l,displayName:"盾牌收集点"}),K=ui({type:m,displayName:"切换桌子"}),V=ui({type:h,displayName:"胜利卡片"}),Y=ui({type:l,displayName:"火炉碰撞节点"}),q=ui({type:l,displayName:"铁砧碰撞节点"}),Q=ui({type:w,displayName:"小兵队列左"}),X=ui({type:w,displayName:"小兵队列右"}),Z=ui({type:v,displayName:"顾客队列"}),$=ui({type:M,displayName:"卡车队列"}),ee=ui({type:C,displayName:"四倍肉点"}),ie=ui({type:W,displayName:"四倍复制机"}),re=ui({type:l,displayName:"复制机sp"}),te=ui({type:C,displayName:"四倍肉提交点"}),ne=ui({type:u,displayName:"四倍肉提交点刚体"}),ae=ui({type:z,displayName:"扩建地贴"}),oe=ui({type:z,displayName:"武器地贴"}),le=ui({type:_,displayName:"车肉桌子"}),ue=ui({type:l,displayName:"桌子碰撞节点"}),ce=ui({type:l,displayName:"栏杆1"}),se=ui({type:l,displayName:"栏杆2"}),de=ui({type:l,displayName:"栏杆3"}),pe=ui({type:l,displayName:"地面1"}),fe=ui({type:l,displayName:"空气墙1"}),be=ui({type:l,displayName:"空气墙2"}),ye=ui({type:l,displayName:"地面2"}),me=ui({type:l,displayName:"地面3"}),D((ge=i((we=function(e){function i(){for(var i,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return i=e.call.apply(e,[this].concat(a))||this,t(i,"soldier_Wrok1",ge,n(i)),t(i,"soldier_Wrok2",ke,n(i)),t(i,"soldier_Wrok3",ve,n(i)),t(i,"soldierDitie2",Ne,n(i)),t(i,"soldierDitie3",Ce,n(i)),t(i,"stakeWorker",We,n(i)),t(i,"swordWorker",ze,n(i)),t(i,"carryWorker",Me,n(i)),t(i,"shieldWorker",_e,n(i)),t(i,"swordGroundMark",De,n(i)),t(i,"carryGroundMark",Te,n(i)),t(i,"shieldGroundMark",Ge,n(i)),t(i,"shieldGroundMarkworker",Se,n(i)),t(i,"tableGroundMark",Pe,n(i)),t(i,"stove",Le,n(i)),t(i,"stake",Re,n(i)),t(i,"shieldPoint",Ee,n(i)),t(i,"changeTable",Oe,n(i)),t(i,"endCard",Ae,n(i)),t(i,"stoveCollider",je,n(i)),t(i,"stakeCollider",Be,n(i)),t(i,"soldierLineLeft",Fe,n(i)),t(i,"soldierLineRight",Ue,n(i)),t(i,"customerLine",xe,n(i)),t(i,"CarLine",He,n(i)),t(i,"fourMeatPoint",Ie,n(i)),t(i,"fourMeatDuplicator",Je,n(i)),t(i,"Spfuzhiji",Ke,n(i)),t(i,"fourMeatSubmitPoint",Ve,n(i)),t(i,"fourMeatSubmitPointRigid",Ye,n(i)),t(i,"ditie",qe,n(i)),t(i,"soldierDitie",Qe,n(i)),t(i,"carMeatTableController",Xe,n(i)),t(i,"tableCollider",Ze,n(i)),t(i,"langan1",$e,n(i)),t(i,"langan2",ei,n(i)),t(i,"langan3",ii,n(i)),t(i,"dimian1",ri,n(i)),t(i,"airWall1",ti,n(i)),t(i,"airWall2",ni,n(i)),t(i,"dimian2",ai,n(i)),t(i,"dimian3",oi,n(i)),i}r(i,e);var a=i.prototype;return a.start=function(){var e=this;this.soldierLineLeft.creat5soldier(),this.customerLine.creat5soldier(),g.actorController=this.soldierLineLeft,this.scheduleOnce((function(){e.fourMeatDuplicator.node.active=!1,e.fourMeatPoint.node.active=!1,e.fourMeatSubmitPoint.node.active=!1,e.fourMeatSubmitPointRigid.node.active=!1,e.langan2.active=!1,e.langan3.active=!1,e.dimian1.active=!1,e.carMeatTableController.node.active=!1,e.tableCollider.active=!1,e.airWall1.active=!0,e.airWall2.active=!1,e.dimian2.active=!1,e.dimian3.active=!1,e.Spfuzhiji.active=!1}),0)},a.update=function(e){this.soldierDitie.node.active&&this.soldierDitie.need<=99&&this.scheduleOnce((function(){g.uiController.showEndCard(),console.log("结束游戏")}),6)},a.create_soldier1=function(){var e=this.soldier_Wrok1;e&&e.enable_work()},a.create_soldier2=function(){var e=this.soldier_Wrok2;e&&e.enable_work()},a.create_soldier3=function(){var e=this.soldier_Wrok3;e&&e.enable_work()},a.create_soldierDitie2=function(){var e=this.soldierDitie2;e&&e.show_myself()},a.create_soldierDitie3=function(){var e=this.soldierDitie3;e&&e.show_myself()},a.showEndCard=function(){this.scheduleOnce((function(){g.uiController.showEndCard()}),2)},a.create_building_meatDuplicator=function(){var e=this;this.scheduleOnce((function(){g.homeUp=!0,k.soundPlay("Apprence"),e.showNodeWithTween(e.fourMeatDuplicator.node),e.showNodeWithTween(e.fourMeatPoint.node),e.showNodeWithTween(e.fourMeatSubmitPoint.node),e.showNodeWithTween(e.fourMeatSubmitPointRigid.node),e.showNodeWithTween(e.carMeatTableController.node),e.showNodeWithTween(e.tableCollider),e.CarLine.creat5soldier(),e.langan1.active=!1,e.showNodeWithTween(e.langan2),e.showNodeWithTween(e.langan3),e.showNodeWithTween(e.dimian1),e.airWall1.active=!1,e.airWall2.active=!0,e.showNodeWithTween(e.dimian2),e.showNodeWithTween(e.dimian3),e.showNodeWithTween(e.Spfuzhiji)}),0)},a.create_KuoJianMark=function(){var e=this.ditie;e&&e.show_myself()},a.create_soldierDitie=function(){var e=this.soldierDitie;e&&e.show_myself()},a.create_CarryGroundMark=function(){var e=this.carryGroundMark;e&&e.show_myself()},a.create_TableGroundMark=function(){var e=this.tableGroundMark;e&&e.show_myself()},a.create_CarryWorker=function(){var e=this.carryWorker;e&&e.set_target()},a.create_ShieldGroundMark=function(){var e=this.shieldGroundMark;e&&e.show_myself()},a.create_buildings=function(){var e=this;this.scheduleOnce((function(){[e.stove,e.stake,e.shieldPoint,e.stoveCollider,e.stakeCollider].forEach((function(i){i&&(e.scheduleOnce((function(){i.active=!0}),.1),i.setScale(new c(0,0,0)),s(i).to(.3,{scale:new c(-1,1,1)},{easing:"backOut"}).start())}))}),.1);var i=this.carryWorker;if(i){var r=i.stoves[1];r&&this.scheduleOnce((function(){r.node.active=!0}),.01)}},a.showNodeWithTween=function(e){e&&(this.scheduleOnce((function(){e.active=!0}),0),e.scale=new c(0,0,0),s(e).to(.4,{scale:new c(1.1,1.1,1)},{easing:"backOut"}).to(.1,{scale:new c(1,1,1)}).start())},i}(d)).prototype,"soldier_Wrok1",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=i(we.prototype,"soldier_Wrok2",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=i(we.prototype,"soldier_Wrok3",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=i(we.prototype,"soldierDitie2",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=i(we.prototype,"soldierDitie3",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),We=i(we.prototype,"stakeWorker",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=i(we.prototype,"swordWorker",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=i(we.prototype,"carryWorker",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=i(we.prototype,"shieldWorker",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=i(we.prototype,"swordGroundMark",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=i(we.prototype,"carryGroundMark",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=i(we.prototype,"shieldGroundMark",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=i(we.prototype,"shieldGroundMarkworker",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=i(we.prototype,"tableGroundMark",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=i(we.prototype,"stove",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=i(we.prototype,"stake",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=i(we.prototype,"shieldPoint",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=i(we.prototype,"changeTable",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=i(we.prototype,"endCard",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),je=i(we.prototype,"stoveCollider",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=i(we.prototype,"stakeCollider",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=i(we.prototype,"soldierLineLeft",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=i(we.prototype,"soldierLineRight",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=i(we.prototype,"customerLine",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),He=i(we.prototype,"CarLine",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=i(we.prototype,"fourMeatPoint",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Je=i(we.prototype,"fourMeatDuplicator",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ke=i(we.prototype,"Spfuzhiji",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ve=i(we.prototype,"fourMeatSubmitPoint",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ye=i(we.prototype,"fourMeatSubmitPointRigid",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qe=i(we.prototype,"ditie",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qe=i(we.prototype,"soldierDitie",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xe=i(we.prototype,"carMeatTableController",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ze=i(we.prototype,"tableCollider",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$e=i(we.prototype,"langan1",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ei=i(we.prototype,"langan2",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ii=i(we.prototype,"langan3",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ri=i(we.prototype,"dimian1",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ti=i(we.prototype,"airWall1",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ni=i(we.prototype,"airWall2",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ai=i(we.prototype,"dimian2",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oi=i(we.prototype,"dimian3",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=we))||he));a._RF.pop()}}}));

System.register("chunks:///_virtual/FaildCard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameGlobal.ts"],(function(e){var t,i,n,o,r,a,l,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Button,s=e.Component},function(e){c=e.GameGlobal}],execute:function(){var u,v,d,h,p;r._RF.push({},"8079an2m99Aq5LtQaDYi6qv","FaildCard",void 0);var f=a.ccclass,y=a.property;e("FaildCard",(u=f("FaildCard"),v=y({type:l,displayName:"复活按钮"}),u((p=t((h=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"reviveButton",p,o(t)),t.hasRevived=!1,t}i(t,e);var r=t.prototype;return r.onLoad=function(){this.reviveButton&&this.reviveButton.node.on(l.EventType.CLICK,this.onClickRevive,this)},r.start=function(){this.hide()},r.show=function(){this.node.active=!0},r.hide=function(){this.node.active=!1},r.onClickRevive=function(){if(this.hasRevived)return console.log("复活机会已用完！"),void c.uiController.endCard.show1();this.hasRevived=!0,c.playerController&&c.playerController.revive(),this.hide()},t}(s)).prototype,"reviveButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=h))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameGlobal.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,t,o,l,a,r;return{setters:[function(n){e=n.inheritsLoose,t=n.createClass},function(n){o=n.cclegacy,l=n._decorator,a=n.Vec3,r=n.Component}],execute:function(){var w,i;o._RF.push({},"7d038g9htNMfqWO/WdER1AU","GameGlobal",void 0);var u=l.ccclass;l.property,n("BRICK_POINT",[new a(-100,13,0),new a(-64,13,0),new a(-28,13,0),new a(6,13,0),new a(42,13,0),new a(-100,0,0),new a(-64,0,0),new a(-28,0,0),new a(6,0,0),new a(42,0,0),new a(-100,-13,0),new a(-64,-13,0),new a(-28,-13,0),new a(6,-13,0),new a(42,-13,0)]),n("BRICK_POINT1",[new a(48.246,13.164,0),new a(76.116,-6.679,0),new a(104.07,-25.978,0),new a(35.895,3.918,0),new a(63.191,-16.139,0),new a(89.9,-35.94,0),new a(22.723,-5.438,0),new a(50.194,-25.255,0),new a(77.88,-45.168,0)]),n("SWORD_POINT",[new a(31.768,23.079,0),new a(13.879,10.353,0),new a(-7.206,-2.807,0),new a(-27.636,-17.524,0)]),n("SHIELD_POINT",[new a(-16,17,0),new a(21,-13,0)]),n("MEAT_POINT",[new a(5,37,0),new a(40,11,0),new a(-28,11,0),new a(8,-14,0)]),n("MONEY_POINT",[new a(10,32,0),new a(46,8,0),new a(-7,21,0),new a(28,-5,0),new a(-26,9,0),new a(9,-18,0),new a(-44,-4,0),new a(-8,-30,0)]),n("MEAT_HEIGHT",17),n("BRICK_HEIGHT",9),n("BRICK_HEIGHT1",9),n("SWORD_HEIGHT",10),n("GameGlobal",u("GameGlobal")(((i=function(n){function o(){return n.apply(this,arguments)||this}return e(o,n),o.prototype.onLoad=function(){o.instance=this},t(o,null,[{key:"joinAttackArea",get:function(){return o.joinAttackCount>0}}]),o}(r)).instance=void 0,i.mainGame=null,i.mainCamera=null,i.playerController=null,i.uiController=null,i.cameraControl=null,i.meatPosition=null,i.MAX_STACKING_COUNT=30,i.MAX_BRICK_COUNT=26,i.brick_point=null,i.EnemyPoint=null,i.SwordPosition=null,i.enemy=null,i.getSwordPosition=null,i.getMeatPosition1=null,i.getMeatPosition2=null,i.actorController=null,i.CarController=null,i.stopget1=!0,i.stopget2=!0,i.GameStart=!1,i.homeUp=!1,i.GameEnd=!1,i.BossDead=!1,i.allActors=[],i.joinAttackCount=0,i.meatPoint=null,i.moneyPoint=null,i.enemies=[],w=i))||w);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameRoot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./PlayableSDK.ts"],(function(e){var t,o,n,r,i,a,u,c,s,d,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,u=e.AudioSource,c=e.director,s=e.Component},function(e){d=e.AudioManager},function(e){l=e.PlayableSDK}],execute:function(){var p,m,f,h,y;i._RF.push({},"bd830pJJRJDFpqHWtarTVfZ","GameRoot",void 0);var v=a.ccclass,g=a.property;e("GameRoot",(p=v("GameRoot"),m=g(u),p((y=t((h=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(t,"_audioSource",y,r(t)),t}return o(t,e),t.prototype.onLoad=function(){this._audioSource=this.getComponent(u),c.addPersistRootNode(this.node),l.adapter(),l.gameReady(),d.init(this._audioSource,this.node);var e=function e(t){d.firstClick=!0,d.playSoundLog(t.type),d.resume(),document.removeEventListener("mousedown",e,!0),document.removeEventListener("touchstart",e,!0)};document.addEventListener("mousedown",e,!0),document.addEventListener("touchstart",e,!0)},t}(s)).prototype,"_audioSource",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameSceneFit.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,o,n,r,a,c,s,l,h,u;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.Camera,s=e.view,l=e.screen,h=e.ResolutionPolicy,u=e.Component}],execute:function(){var g,m,p,w,d,f,z;r._RF.push({},"7eb7cZ1XR5GYY4CHoZz+iC3","GameSceneFit",void 0);var C=a.ccclass,y=a.property;e("GameSceneFit",(g=C("GameSceneFit"),m=y(c),p=y(c),g((f=i((d=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return i=e.call.apply(e,[this].concat(r))||this,o(i,"gameCamera",f,n(i)),o(i,"UICamera",z,n(i)),i.viewScale=1,i}t(i,e);var r=i.prototype;return r.onLoad=function(){this.UICamera.getComponent(c).orthoHeight=360},r.start=function(){s.on("canvas-resize",this.resize,this),this.scheduleOnce(this.resize)},r.update=function(e){},r.resize=function(e){var i=l.windowSize;i.width,i.height;console.log("屏幕像素尺寸:",s.getVisibleSize());var t=i.width<i.height;console.log("屏幕方向:",t?"竖屏":"横屏","尺寸:",i.width,"x",i.height),l.windowSize.height>l.windowSize.width&&l.windowSize.width/l.windowSize.height<1?(s.setResolutionPolicy(h.FIXED_WIDTH),this.gameCamera.getComponent(c).orthoHeight=700):(s.setResolutionPolicy(h.FIXED_HEIGHT),this.gameCamera.getComponent(c).orthoHeight=400);this.gameCamera.orthoHeight},i}(u)).prototype,"gameCamera",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(d.prototype,"UICamera",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=d))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/GroundMark.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Body2.ts","./GameGlobal.ts","./DropBase.ts","./Icarus.ts","./AudioPlay.ts","./AudioManager.ts"],(function(t){var e,n,i,o,r,c,a,s,l,u,_,h,d,p,m,f,y,g,b,k,v,N,C,G,w,M;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty,i=t.inheritsLoose,o=t.assertThisInitialized,r=t.createClass,c=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){s=t.cclegacy,l=t._decorator,u=t.CCInteger,_=t.Collider2D,h=t.Label,d=t.Vec3,p=t.tween,m=t.Contact2DType,f=t.game,y=t.Component},function(t){g=t.ResourcesType,b=t.GroundMarkType,k=t.GroundMarkState,v=t.EventConfig},function(t){N=t.GameGlobal},function(t){C=t.DropBase},function(t){G=t.timer},function(t){w=t.AudioPlay},function(t){M=t.AudioManager}],execute:function(){var z,x,O,D,E,P,T,A,R,F,S,B,I,L,j,Z,U,W,H,Q,V,q,J,K;s._RF.push({},"c4b3a2QiFFL4ozeet3pGUj5","GroundMark",void 0);var X=l.ccclass,Y=l.property,$=t("MarkAnimationState",function(t){return t[t.None=0]="None",t[t.Guide=1]="Guide",t}({})),tt=t("GroundMarkDemand",(z=X("GroundMarkDemand2"),x=Y({type:g,displayName:"资源类型"}),O=Y({type:u,displayName:"数量"}),z((P=e((E=function(){n(this,"type",P,this),n(this,"count",T,this)}).prototype,"type",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.Money}}),T=e(E.prototype,"count",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=E))||D));t("GroundMark",(A=X("GroundMark"),R=Y({type:b,displayName:"地贴类型"}),F=Y({type:k,displayName:"地贴状态"}),S=Y({type:_,displayName:"检测区域"}),B=Y({type:h,displayName:"数量"}),I=Y({displayName:"进度条尺寸"}),L=Y({type:[tt],displayName:"需求数量"}),j=Y({type:[v],displayName:"事件"}),A((W=e((U=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r))||this,n(e,"type",W,o(e)),n(e,"state",H,o(e)),n(e,"check_area",Q,o(e)),n(e,"demand_count",V,o(e)),n(e,"progress_bar_size",q,o(e)),n(e,"demand_count_arr",J,o(e)),n(e,"event",K,o(e)),e.collect_count_arr=[],e.collect_step=0,e.on_collecting=!1,e.collecting_schedule=!1,e.collect_time=0,e.mark_animtion_state=$.None,e}i(e,t);var s=e.prototype;return s.onLoad=function(){this.node.setScale(d.ZERO),this.state=k.Disable,this.collect_count_arr=this.demand_count_arr.map((function(){return 0})),this.auto_init()},s.update=function(t){"GroundMark"==this.node.name&&N.playerController.packge_count(g.Meat1)>0&&this.mark_animtion_state==$.None&&(this.mark_animtion_state=$.Guide,this.show_myself())},s.auto_init=function(){this.collect_count_arr.length||(this.collect_count_arr=this.demand_count_arr.map((function(){return 0}))),this.collect_step<this.demand_count_arr.length&&(this.demand_count.string=""+(this.demand_count_arr[this.collect_step].count-this.collect_count_arr[this.collect_step]))},s.enable_mark=function(){var t=this;this.state=k.Enable,this.scheduleOnce((function(){t.node.active=!0}),0),this.reginster_handler()},s.show_myself=function(){var t=this;this.node.setScale(d.ZERO),this.scheduleOnce((function(){t.node.active=!0,t.check_area.node.active=!1}),.1),this.enable_mark(),p(this.node).to(1,{scale:d.ONE},{easing:"backOut"}).call((function(){t.check_area.node.active=!0})).start()},s.reginster_handler=function(){this.check_area.on(m.BEGIN_CONTACT,this.on_trigger_enter,this),this.check_area.on(m.END_CONTACT,this.on_trigger_exit,this)},s.on_trigger_enter=function(t,e){"Player"!==e.node.name||this.on_collecting||(this.on_collecting=!0,this.take_resources())},s.on_trigger_exit=function(t,e){"Player"===e.node.name&&(this.on_collecting=!1)},s.take_resources=function(){var t=this;if(!(this.collect_step>=this.demand_count_arr.length)&&this.on_collecting)if(this.collect_count_arr[this.collect_step]>=this.demand_count_arr[this.collect_step].count)this.complete_once();else{var e=N.playerController.take_resources(this.demand_count_arr[this.collect_step].type);if(e){var n=e.worldPosition.clone();e.setParent(this.node),e.setWorldPosition(n),e.setWorldScale(d.ONE),N.uiController.refreshCoinUI(),this.update_resources_count(1),this.collect_count_arr[this.collect_step]>=this.demand_count_arr[this.collect_step].count&&(this.state=k.Full);var i=e.getComponent(C);i.move_to_mark(d.ZERO,.2,(function(){e.getComponent(C);M.soundPlay("collect"),i.destroy_self(),t.jump_effect(),t.collect_count_arr[t.collect_step]>=t.demand_count_arr[t.collect_step].count&&t.complete_once()})),this.scheduleOnce((function(){t.take_resources()}),.2),N.playerController.check_packge_position()}}},s.complete_once=function(){var t=c(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:w.instance.building(),e=0;case 2:if(!(e<this.event.length)){t.next=13;break}if(!this.event[e].delay_emit){t.next=9;break}return t.next=6,G(this.event[e].delay_time,this);case 6:this.event[e].event.emit([this]),t.next=10;break;case 9:this.event[e].event.emit([this]);case 10:e++,t.next=2;break;case 13:if(this.collect_step++,!(this.collect_step>=this.demand_count_arr.length)){t.next=19;break}this.state=k.Full,this.node.active=!1,t.next=22;break;case 19:return t.next=21,G(.5,this);case 21:this.auto_init();case 22:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.jump_effect=function(){p(this.node).stop(),p(this.node).to(.03,{scale:new d(1.1,1.1,1)}).to(.03,{scale:new d(.9,.9,1)}).to(.04,{scale:d.ONE}).start()},s.update_resources_count=function(t){this.collect_count_arr[this.collect_step]+=t,this.collect_time=f.totalTime,this.update_demand_count();this.collect_count_arr[this.collect_step],this.demand_count_arr[this.collect_step].count},s.update_demand_count=function(){this.demand_count.string=""+(this.demand_count_arr[this.collect_step].count-this.collect_count_arr[this.collect_step])},r(e,[{key:"need",get:function(){return this.collect_step>=this.demand_count_arr.length?0:this.demand_count_arr[this.collect_step].count-this.collect_count_arr[this.collect_step]}}]),e}(y)).prototype,"type",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.Collect}}),H=e(U.prototype,"state",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.Enable}}),Q=e(U.prototype,"check_area",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(U.prototype,"demand_count",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(U.prototype,"progress_bar_size",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=e(U.prototype,"demand_count_arr",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=e(U.prototype,"event",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=U))||Z));s._RF.pop()}}}));

System.register("chunks:///_virtual/GroundMarkDitie.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Body2.ts","./Icarus.ts","./GameGlobal.ts","./DropBase.ts","./AudioManager.ts"],(function(t){var e,n,i,r,o,a,c,s,l,u,_,h,p,d,m,f,y,g,b,k,v,w,z,G,C,N,M,D;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty,i=t.inheritsLoose,r=t.assertThisInitialized,o=t.createClass,a=t.asyncToGenerator,c=t.regeneratorRuntime},function(t){s=t.cclegacy,l=t._decorator,u=t.CCInteger,_=t.Animation,h=t.Collider2D,p=t.Label,d=t.UITransform,m=t.Vec3,f=t.tween,y=t.math,g=t.Contact2DType,b=t.game,k=t.Component},function(t){v=t.ResourcesType,w=t.GroundMarkType,z=t.GroundMarkState,G=t.EventConfig},function(t){C=t.timer},function(t){N=t.GameGlobal},function(t){M=t.DropBase},function(t){D=t.AudioManager}],execute:function(){var S,T,x,O,E,R,P,A,I,B,F,L,Z,J,U,W,j,H,Q,V,X,q,K,Y,$,tt,et,nt,it,rt,ot;s._RF.push({},"49d5dSnmZJGrpJzFOQX/Tdp","GroundMarkDitie",void 0);var at=l.ccclass,ct=l.property,st=t("MarkAnimationState",function(t){return t[t.None=0]="None",t[t.Guide=1]="Guide",t}({})),lt=t("GroundMarkDemand",(S=at("GroundMarkDemand"),T=ct({type:v,displayName:"资源类型"}),x=ct({type:u,displayName:"数量"}),S((R=e((E=function(){n(this,"type",R,this),n(this,"count",P,this)}).prototype,"type",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.Money}}),P=e(E.prototype,"count",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=E))||O));t("GuideEvent",at("GuideEvent")(A=function(){})||A),t("GroundMarkDitie",(I=at("GroundMarkDitie"),B=ct({type:w,displayName:"地贴类型"}),F=ct({type:z,displayName:"地贴状态"}),L=ct({type:_,displayName:"动效组件"}),Z=ct({type:h,displayName:"检测区域"}),J=ct({type:p,displayName:"数量"}),U=ct({type:p,displayName:"进度展示"}),W=ct({type:d,displayName:"进度条"}),j=ct({displayName:"进度条尺寸"}),H=ct({type:[lt],displayName:"需求数量"}),Q=ct({type:[G],displayName:"事件"}),I((q=e((X=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"type",q,r(e)),n(e,"state",K,r(e)),n(e,"anim",Y,r(e)),n(e,"check_area",$,r(e)),n(e,"demand_count",tt,r(e)),n(e,"collect_show",et,r(e)),n(e,"progress_bar",nt,r(e)),n(e,"progress_bar_size",it,r(e)),n(e,"demand_count_arr",rt,r(e)),n(e,"event",ot,r(e)),e.collect_count_arr=[],e.collect_step=0,e.on_collecting=!1,e.collect_time=0,e.collect_animation_time=250,e.hasRunOnce=!1,e.mark_animtion_state=st.None,e}i(e,t);var s=e.prototype;return s.onLoad=function(){this.node.setScale(m.ZERO),this.auto_init()},s.start=function(){},s.update=function(t){this.hasRunOnce||"GroundMark"!=this.node.name&&"GroundMark2"!=this.node.name||N.playerController.packge_count(v.Money)>0&&(this.hasRunOnce=!0,this.mark_animtion_state=st.Guide,this.show_myself()),N.playerController.packge_count(v.Money)>=this.need?this.mark_animtion_state==st.None&&(this.mark_animtion_state=st.Guide,this.anim.play("guide")):this.mark_animtion_state==st.Guide&&(this.mark_animtion_state=st.None,this.anim.play("none"))},s.show_myself=function(){var t=this;this.node.setScale(m.ZERO),this.node.active=!0,this.check_area.node.active=!1,this.enable_mark(),f(this.node).to(.5,{scale:new m(.9,.9)},{easing:"backOut"}).call((function(){t.check_area.node.active=!0})).start()},s.step_progress=function(t){return void 0===t&&(t=-1),t>=this.collect_count_arr.length||-1==t&&this.collect_step>=this.collect_count_arr.length?-1:this.collect_count_arr[-1==t?this.collect_step:t]},s.auto_init=function(){var t=this;this.collect_show&&(this.demand_count_arr.length<=1?this.collect_show.node.active=!1:this.collect_show.node.active=!0,this.collect_show.node.active&&(this.collect_show.string=this.collect_step+"/"+this.demand_count_arr.length)),this.collect_count_arr=[],this.demand_count_arr.forEach((function(){t.collect_count_arr.push(0)})),this.demand_count.string=""+(this.demand_count_arr[this.collect_step].count-this.collect_count_arr[this.collect_step]),this.progress_bar&&this.progress_bar.setContentSize(new y.Size(this.progress_bar.contentSize.width,0)),this.state==z.Disable?this.node.active=!1:this.enable_mark()},s.enable_mark=function(){this.state=z.Enable,this.node.active=!0,this.reginster_handler()},s.reginster_handler=function(){this.check_area.on(g.BEGIN_CONTACT,this.on_trigger_enter,this),this.check_area.on(g.END_CONTACT,this.on_trigger_exit,this)},s.on_trigger_enter=function(t,e){"Player"==e.node.name&&(this.on_collecting=!0,this.take_resources())},s.on_trigger_exit=function(t,e){"Player"==e.node.name&&(this.on_collecting=!1)},s.complete_once=function(){var t=a(c().mark((function t(){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<this.event.length)){t.next=12;break}if(!this.event[e].delay_emit){t.next=8;break}return t.next=5,C(this.event[e].delay_time,this);case 5:this.event[e].event.emit([this]),t.next=9;break;case 8:this.event[e].event.emit([this]);case 9:e++,t.next=1;break;case 12:if(this.collect_step++,!(this.collect_step>=this.demand_count_arr.length)){t.next=19;break}return this.state=z.Full,this.node.active=!1,t.abrupt("return");case 19:return t.next=21,C(.5,this);case 21:this.auto_init();case 22:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.update_demand_count=function(){this.demand_count.string=""+(this.demand_count_arr[this.collect_step].count-this.collect_count_arr[this.collect_step])},s.take_resources=function(){var t=this;if(!(this.collect_step>=this.demand_count_arr.length)&&this.on_collecting)if(this.collect_count_arr[this.collect_step]>=this.demand_count_arr[this.collect_step].count)this.complete_once();else{var e=N.playerController.take_resources(this.demand_count_arr[this.collect_step].type);if(e){var n=e.worldPosition.clone();e.setParent(this.node.parent),e.setWorldPosition(n),e.setWorldScale(m.ONE),N.uiController.refreshCoinUI(),this.update_resources_count(2),this.collect_count_arr[this.collect_step]>=this.demand_count_arr[this.collect_step].count&&(this.state=z.Full);var i=e.getComponent(M);i.move_to_mark(this.node.position,.2,(function(){e.getComponent(M);D.soundPlay("submit_money"),i.destroy_self(),t.collect_step>=t.demand_count_arr.length||t.collect_count_arr[t.collect_step]>=t.demand_count_arr[t.collect_step].count&&t.complete_once()})),this.scheduleOnce((function(){t.take_resources()}),this.demand_count_arr[this.collect_step].count>60?.01:.05),N.playerController.check_packge_position()}}},s.update_resources_count=function(t){this.collect_count_arr[this.collect_step]+=t,this.collect_time=b.totalTime,this.update_demand_count();var e=this.collect_count_arr[this.collect_step]/this.demand_count_arr[this.collect_step].count;this.progress_bar&&this.progress_bar.setContentSize(new y.Size(this.progress_bar.contentSize.width,this.progress_bar_size*e))},s.open=function(){this.anim&&this.anim.play("open")},o(e,[{key:"need",get:function(){return this.collect_step>=this.demand_count_arr.length?0:0==this.collect_count_arr.length?this.demand_count_arr[this.collect_step].count:this.demand_count_arr[this.collect_step].count-this.collect_count_arr[this.collect_step]}}]),e}(k)).prototype,"type",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.Collect}}),K=e(X.prototype,"state",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.Disable}}),Y=e(X.prototype,"anim",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(X.prototype,"check_area",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(X.prototype,"demand_count",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(X.prototype,"collect_show",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(X.prototype,"progress_bar",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(X.prototype,"progress_bar_size",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),rt=e(X.prototype,"demand_count_arr",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ot=e(X.prototype,"event",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=X))||V));s._RF.pop()}}}));

System.register("chunks:///_virtual/GuideControl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameGlobal.ts","./Body2.ts","./GroundMark.ts","./ResourcesDistributivePoint.ts","./ArrowController.ts","./Icarus.ts"],(function(t){var e,i,n,r,o,u,a,s,l,c,p,_,d,g,h,b,f,y,m,w,k;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.createClass,n=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized,u=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){s=t.cclegacy,l=t._decorator,c=t.ccenum,p=t.Node,_=t.Vec3,d=t.Component},function(t){g=t.GameGlobal},function(t){h=t.EventConfig,b=t.ResourcesType,f=t.GroundMarkState},function(t){y=t.GroundMark},function(t){m=t.ResourcesDistributivePoint},function(t){w=t.ArrowController},function(t){k=t.timer}],execute:function(){var v,x,z,G,N,C,A,F,M,S,T,P,I,O,E,R,D,B,W,L,H,V,j,J,Q,U,X,Y,q,K,Z,$,tt,et,it,nt,rt,ot,ut,at,st,lt,ct,pt,_t,dt,gt,ht,bt,ft,yt,mt,wt,kt,vt;s._RF.push({},"f9e4dUFOQVH6Y0aJRBTgpGX","GuideControl",void 0);var xt=l.ccclass,zt=l.property,Gt=t("GuideType",function(t){return t[t.Submit=0]="Submit",t[t.Earn=1]="Earn",t[t.Garrison=2]="Garrison",t[t.Any=3]="Any",t}({}));c(Gt);var Nt=t("SubmitType",function(t){return t[t.Mark=0]="Mark",t}({}));c(Nt);t("ResourcesBehavior",function(t){return t[t.Submit=0]="Submit",t[t.ObtainTake=1]="ObtainTake",t[t.ObtainPoint=2]="ObtainPoint",t[t.Earn=3]="Earn",t}({}));var Ct=t("MakeMoneyWay",function(t){return t[t.Meat=0]="Meat",t[t.Wood=1]="Wood",t}({}));c(Ct);var At=t("DoubleTargetType",function(t){return t[t.All=0]="All",t[t.Any=1]="Any",t}({}));c(At);var Ft=t("GuideIndex",function(t){return t[t.First=0]="First",t[t.Other=1]="Other",t}({})),Mt=(v=xt("EarnConfig"),x=zt({displayName:"赚取数量"}),v((N=e((G=function(){function t(){r(this,"count",N,this),this.earn_count=0}var e=t.prototype;return e.earn=function(t){this.earn_count+=t},e.check=function(){var t=g.playerController.packge_count(b.Money);return t>0&&this.earn(t),this.earn_count>=this.count},i(t,[{key:"need",get:function(){return this.count-this.earn_count}}]),t}()).prototype,"count",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=G))||z),St=(C=xt("SubmitConfig"),A=zt({type:Nt,displayName:"提交类型"}),F=zt({displayName:"双目标"}),M=zt({type:At,displayName:"双目标执行方式",tooltip:"All：两个目标全部达成，Any：两个目标任意一个达成",visible:function(){return this.double_target}}),S=zt({type:p,displayName:"引导箭头对齐位置"}),T=zt({type:y,displayName:"交付的地贴",visible:function(){return this.submit_type==Nt.Mark}}),P=zt({type:p,displayName:"另一个引导箭头对齐位置",visible:function(){return this.double_target}}),I=zt({type:y,displayName:"另一个交付的地贴",visible:function(){return this.submit_type==Nt.Mark&&this.double_target}}),C((R=e((E=function(){function t(){r(this,"submit_type",R,this),r(this,"double_target",D,this),r(this,"double_target_type",B,this),r(this,"arrow_align",W,this),r(this,"mark",L,this),r(this,"other_arrow_align",H,this),r(this,"other_mark",V,this),this.guide_index=Ft.First}return t.prototype.check=function(){return this.submit_type==Nt.Mark&&(this.double_target?this.double_target_type==At.All?this.mark.state==f.Full&&this.other_mark.state==f.Full:this.mark.state==f.Full||this.other_mark.state==f.Full:this.mark.state==f.Full)},i(t,[{key:"Index",get:function(){return this.guide_index},set:function(t){this.guide_index=t}}]),t}()).prototype,"submit_type",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Nt.Mark}}),D=e(E.prototype,"double_target",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),B=e(E.prototype,"double_target_type",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return At.All}}),W=e(E.prototype,"arrow_align",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(E.prototype,"mark",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(E.prototype,"other_arrow_align",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(E.prototype,"other_mark",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=E))||O),Tt=t("GuideConfig",(j=xt("GuideConfig"),J=zt({displayName:"引导事件名"}),Q=zt({type:Gt,displayName:"任务类型"}),U=zt({type:St,displayName:"提交配置",visible:function(){return this.guide_type==Gt.Submit}}),X=zt({type:Mt,displayName:"赚取配置",visible:function(){return this.guide_type==Gt.Earn}}),Y=zt({type:p,displayName:"引导箭头对齐位置",visible:function(){return this.guide_type==Gt.Garrison||this.guide_type==Gt.Any}}),q=zt({type:[h],displayName:"完成后触发的事件"}),j(($=e((Z=function(){function t(){r(this,"guide_name",$,this),r(this,"guide_type",tt,this),r(this,"submit_config",et,this),r(this,"earn_config",it,this),r(this,"arrow_align",nt,this),r(this,"event",rt,this),this.complete=!1}return t.prototype.check=function(){return this.guide_type==Gt.Submit?this.submit_config.check():this.guide_type==Gt.Earn?this.earn_config.check():this.complete},t}()).prototype,"guide_name",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),tt=e(Z.prototype,"guide_type",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Gt.Submit}}),et=e(Z.prototype,"submit_config",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new St}}),it=e(Z.prototype,"earn_config",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Mt}}),nt=e(Z.prototype,"arrow_align",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(Z.prototype,"event",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=Z))||K));t("GuideControl",(ot=xt("GuideControl"),ut=zt({type:w}),at=zt({type:m,displayName:"金币收集点"}),st=zt({type:m,displayName:"电池收集点"}),lt=zt({type:p,displayName:"炮塔交付点"}),ct=zt({type:p,displayName:"炮塔锚点"}),pt=zt({type:p,displayName:"引导箭头"}),_t=zt({type:[Tt],displayName:"引导点"}),ot(((vt=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),u=0;u<i;u++)n[u]=arguments[u];return e=t.call.apply(t,[this].concat(n))||this,r(e,"arrowController",ht,o(e)),r(e,"coin_point",bt,o(e)),r(e,"battery_point",ft,o(e)),r(e,"tower_point",yt,o(e)),r(e,"tower_anchor",mt,o(e)),r(e,"arrow",wt,o(e)),r(e,"guide_list",kt,o(e)),e.guide_step=-1,e.earn_once=!1,e}n(e,t);var s=e.prototype;return s.onLoad=function(){e.instance=this},s.start=function(){},s.update=function(t){var e=this.guide_list[this.guide_step];e.guide_type!=Gt.Garrison&&e.guide_type!=Gt.Any||(this.arrow.setWorldPosition(e.arrow_align.worldPosition.clone()),this.arrowController.setTarget(e.arrow_align),_.distance(g.playerController.node.worldPosition.clone(),this.arrow.worldPosition.clone())<300&&(e.complete=!0,this.complete_guide()))},s.init_guide=function(){this.guide_step=-1,this.find_next_guide()},s.complete_guide=function(){var t=u(a().mark((function t(){var e,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.guide_list[this.guide_step].check()){t.next=14;break}this.guide_list[this.guide_step].complete=!0,this.earn_once&&(this.earn_once=!1),e=this.guide_list[this.guide_step],i=0;case 5:if(!(i<e.event.length)){t.next=11;break}return t.next=8,this.complete_event(i);case 8:i++,t.next=5;break;case 11:this.find_next_guide(),t.next=15;break;case 14:this.guide_list[this.guide_step].guide_type==Gt.Submit&&this.guide_list[this.guide_step].submit_config.double_target&&this.guide_list[this.guide_step].submit_config.double_target_type==At.All&&(this.guide_list[this.guide_step].submit_config.mark.state==f.Full?this.guide_list[this.guide_step].submit_config.Index=Ft.Other:this.guide_list[this.guide_step].submit_config.Index=Ft.First);case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.complete_event=function(t){var e=this;return new Promise(u(a().mark((function i(n,r){var o;return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(o=e.guide_list[e.guide_step].event[t]).delay_emit){i.next=8;break}return i.next=4,k(o.delay_time,e);case 4:o.event.emit([e.guide_list[e.guide_step]]),n(!0),i.next=10;break;case 8:o.event.emit([e.guide_list[e.guide_step]]),n(!0);case 10:case"end":return i.stop()}}),i)}))))},s.find_next_guide=function(){if(this.guide_step++,this.guide_step>=this.guide_list.length)this.arrowController.setTarget(null);else{var t=this.guide_list[this.guide_step];t.check()?this.find_next_guide():t.guide_type==Gt.Submit&&t.submit_config.double_target&&t.submit_config.double_target_type==At.All&&(t.submit_config.mark.state==f.Full?t.submit_config.Index=Ft.Other:t.submit_config.Index=Ft.First)}},i(e,[{key:"Step",get:function(){return this.guide_step}}],[{key:"Instance",get:function(){return e.instance}}]),e}(d)).instance=null,ht=e((gt=vt).prototype,"arrowController",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bt=e(gt.prototype,"coin_point",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=e(gt.prototype,"battery_point",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=e(gt.prototype,"tower_point",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=e(gt.prototype,"tower_anchor",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wt=e(gt.prototype,"arrow",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),kt=e(gt.prototype,"guide_list",[_t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),dt=gt))||dt));s._RF.pop()}}}));

System.register("chunks:///_virtual/Icarus.ts",["cc"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy,n=e.Vec3}],execute:function(){e("timer",(function(e,t){return new Promise((function(n,c){var r=function(){t.cancel_thred=null,n("")};t.cancel_thred=function(){t.unschedule(r),c("cancel"),t.cancel_thred=null},t.scheduleOnce(r,e)})).catch((function(e){}))})),t._RF.push({},"ef72d9Bt/xLM6U1pnahVEry","Icarus",void 0);e("LogLevel",function(e){return e[e.Default=0]="Default",e[e.Warning=1]="Warning",e[e.Error=2]="Error",e[e.Stack=3]="Stack",e}({}));var c=e("Icarus",function(){function e(){}return e.lerp_move_by_speed=function(e,t,c,r,i){var u=new n,a=0;t instanceof n?(a=(n.distance(t,e)+r*i)/n.distance(e,c),n.lerp(u,e,c,Math.min(a,1))):(a=(n.distance(t.position,e)+r*i)/n.distance(e,c),n.lerp(u,e,c,Math.min(a,1)));return{position:u,step:a}},e}());c.output_speed_of_brick_factory=1,c.brick_factory_ratio=3,c.actor_request_time=.05,c.table_request_time=.05,c.forge_time=.4,t._RF.pop()}}}));

System.register("chunks:///_virtual/KdTree.ts",["cc","./Obstacle.ts","./RVOMath.ts","./Vector2.ts"],(function(t){var e,i,n,s;return{setters:[function(t){e=t.cclegacy},function(t){i=t.default},function(t){n=t.default},function(t){s=t.default}],execute:function(){e._RF.push({},"a8e0d+QaThKzJfthutNKg3h","KdTree",void 0);var _=function(){this.obstacle_=void 0,this.left_=void 0,this.right_=void 0},a=function(){this.begin_=void 0,this.end_=void 0,this.left_=void 0,this.right_=void 0,this.maxX_=void 0,this.maxY_=void 0,this.minX_=void 0,this.minY_=void 0},r=function(){function t(t,e){this.a_=void 0,this.b_=void 0,this.a_=t,this.b_=e}return t.Lessthan=function(t,e){return t.a_<e.a_||!(e.a_<t.a_)&&t.b_<e.b_},t.LessthanOrEqual=function(e,i){return e.a_==i.a_&&e.b_==i.b_||t.Lessthan(e,i)},t.Morethan=function(e,i){return!t.LessthanOrEqual(e,i)},t.MorethanOrEqual=function(e,i){return!t.Lessthan(e,i)},t}();t("default",function(){function t(){this.agents_=void 0,this.obstacleTree_=void 0,this.agentTree_=void 0,this.MAX_LEAF_SIZE=10,this.simulator=null}var e=t.prototype;return e.buildAgentTree=function(){if(null==this.agents_||this.agents_.length!=this.simulator.agents_.length){this.agents_=new Array(this.simulator.agents_.length);for(var t=0;t<this.agents_.length;++t)this.agents_[t]=this.simulator.agents_[t];this.agentTree_=[];for(var e=2*this.agents_.length,i=0;i<e;++i)this.agentTree_[i]=new a}0!=this.agents_.length&&this.buildAgentTreeRecursive(0,this.agents_.length,0)},e.buildAgentTreeRecursive=function(t,e,i){this.agentTree_[i].begin_=t,this.agentTree_[i].end_=e,this.agentTree_[i].minX_=this.agentTree_[i].maxX_=this.agents_[t].position_.x,this.agentTree_[i].minY_=this.agentTree_[i].maxY_=this.agents_[t].position_.y;for(var n=t+1;n<e;++n)this.agentTree_[i].maxX_=Math.max(this.agentTree_[i].maxX_,this.agents_[n].position_.x),this.agentTree_[i].minX_=Math.min(this.agentTree_[i].minX_,this.agents_[n].position_.x),this.agentTree_[i].maxY_=Math.max(this.agentTree_[i].maxY_,this.agents_[n].position_.y),this.agentTree_[i].minY_=Math.min(this.agentTree_[i].minY_,this.agents_[n].position_.y);if(e-t>this.MAX_LEAF_SIZE){for(var s=this.agentTree_[i].maxX_-this.agentTree_[i].minX_>this.agentTree_[i].maxY_-this.agentTree_[i].minY_,_=.5*(s?this.agentTree_[i].maxX_+this.agentTree_[i].minX_:this.agentTree_[i].maxY_+this.agentTree_[i].minY_),a=t,r=e;a<r;){for(;a<r&&(s?this.agents_[a].position_.x:this.agents_[a].position_.y)<_;)++a;for(;r>a&&(s?this.agents_[r-1].position_.x:this.agents_[r-1].position_.y)>=_;)--r;if(a<r){var h=this.agents_[a];this.agents_[a]=this.agents_[r-1],this.agents_[r-1]=h,++a,--r}}var o=a-t;0==o&&(++o,++a,++r),this.agentTree_[i].left_=i+1,this.agentTree_[i].right_=i+2*o,this.buildAgentTreeRecursive(t,a,this.agentTree_[i].left_),this.buildAgentTreeRecursive(a,e,this.agentTree_[i].right_)}},e.buildObstacleTree=function(){this.obstacleTree_=new _;for(var t=this.simulator.obstacles_.length,e=[],i=0;i<t;++i)e[e.length]=this.simulator.obstacles_[i];this.obstacleTree_=this.buildObstacleTreeRecursive(e)},e.buildObstacleTreeRecursive=function(t){if(t&&0!=t.length){for(var e=new _,a=0,h=t.length,o=t.length,g=0;g<t.length;++g){for(var u=0,l=0,c=t[g],f=c.next_,T=0;T<t.length;++T)if(g!=T){var m=t[T],v=m.next_,p=n.leftOf(c.point_,f.point_,m.point_),b=n.leftOf(c.point_,f.point_,v.point_);if(p>=-n.RVO_EPSILON&&b>=-n.RVO_EPSILON?++u:(p<=n.RVO_EPSILON&&b<=n.RVO_EPSILON||++u,++l),r.MorethanOrEqual(new r(Math.max(u,l),Math.min(u,l)),new r(Math.max(h,o),Math.min(h,o))))break}r.Lessthan(new r(Math.max(u,l),Math.min(u,l)),new r(Math.max(h,o),Math.min(h,o)))&&(h=u,o=l,a=g)}for(var x=new Array(h),d=new Array(o),O=0,R=0,M=a,y=t[M],q=y.next_,A=0;A<t.length;++A)if(M!=A){var X=t[A],E=X.next_,L=n.leftOf(y.point_,q.point_,X.point_),Y=n.leftOf(y.point_,q.point_,E.point_);if(L>=-n.RVO_EPSILON&&Y>=-n.RVO_EPSILON)x[O++]=t[A];else if(L<=n.RVO_EPSILON&&Y<=n.RVO_EPSILON)d[R++]=t[A];else{var N=n.det(s.subtract(q.point_,y.point_),s.subtract(X.point_,y.point_))/n.det(s.subtract(q.point_,y.point_),s.subtract(X.point_,E.point_)),S=s.addition(X.point_,s.multiply2(N,s.subtract(E.point_,X.point_))),w=new i;w.point_=S,w.previous_=X,w.next_=E,w.convex_=!0,w.direction_=X.direction_,w.id_=this.simulator.obstacles_.length,this.simulator.obstacles_.push(w),X.next_=w,E.previous_=w,L>0?(x[O++]=X,d[R++]=w):(d[R++]=X,x[O++]=w)}}return e.obstacle_=y,e.left_=this.buildObstacleTreeRecursive(x),e.right_=this.buildObstacleTreeRecursive(d),e}},e.computeObstacleNeighbors=function(t,e){this.queryObstacleTreeRecursive(t,e,this.obstacleTree_)},e.queryObstacleTreeRecursive=function(t,e,i){if(t&&i){var _=i.obstacle_,a=_.next_,r=n.leftOf(_.point_,a.point_,t.position_);this.queryObstacleTreeRecursive(t,e,r>=0?i.left_:i.right_),n.sqr(r)/n.absSq(s.subtract(a.point_,_.point_))<e&&(r<0&&t.insertObstacleNeighbor(i.obstacle_,e),this.queryObstacleTreeRecursive(t,e,r>=0?i.right_:i.left_))}},e.computeAgentNeighbors=function(t,e){this.queryAgentTreeRecursive(t,e,0)},e.queryAgentTreeRecursive=function(t,e,i){var s=this.agentTree_[i];if(s.end_-s.begin_<=this.MAX_LEAF_SIZE)for(var _=s.begin_;_<s.end_;++_)t.insertAgentNeighbor(this.agents_[_],e);else{var a=n.sqr(Math.max(0,this.agentTree_[this.agentTree_[i].left_].minX_-t.position_.x))+n.sqr(Math.max(0,t.position_.x-this.agentTree_[this.agentTree_[i].left_].maxX_))+n.sqr(Math.max(0,this.agentTree_[this.agentTree_[i].left_].minY_-t.position_.y))+n.sqr(Math.max(0,t.position_.y-this.agentTree_[this.agentTree_[i].left_].maxY_)),r=this.agentTree_[this.agentTree_[i].right_],h=n.sqr(Math.max(0,r.minX_-t.position_.x))+n.sqr(Math.max(0,t.position_.x-r.maxX_))+n.sqr(Math.max(0,r.minY_-t.position_.y))+n.sqr(Math.max(0,t.position_.y-r.maxY_));a<h?a<e.value&&(this.queryAgentTreeRecursive(t,e,this.agentTree_[i].left_),h<e.value&&this.queryAgentTreeRecursive(t,e,this.agentTree_[i].right_)):h<e.value&&(this.queryAgentTreeRecursive(t,e,this.agentTree_[i].right_),a<e.value&&this.queryAgentTreeRecursive(t,e,this.agentTree_[i].left_))}},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Language2.ts",["cc"],(function(e){var a,n,s;return{setters:[function(e){a=e.cclegacy,n=e.resources,s=e.sys}],execute:function(){a._RF.push({},"96177TQnl1CLJS+URXktco+","Language",void 0),e("Language",function(){function e(){}return e.init=function(e,a){void 0===e&&(e=null),this.languageCode||this.getLanguageCode(),e||(e="texture"),n.loadDir(e+"/"+this.languageCode,(function(){a&&a()}))},e.getLanguageCode=function(){if(this.languageCode)return this.languageCode;var e="";switch(s.languageCode){case"zh":case"zh-cn":case"zh_CN":e="zh-s";break;case"zh-tw":case"zh_TW":e="zh-t";break;case"fr":e="fr";break;case"en":case"it":case"de":e="de";break;case"es":case"du":case"hu":case"pt":case"no":case"pl":case"tr":case"uk":case"ro":case"bg":case"hi":case"unknown":e="en";break;case"ru":e="ru";break;case"ja":e="ja";break;case"ar":e="en";break;case"ko":e="ko"}return this.languageCode=e,this.languageCode},e}()).languageCode=null,a._RF.pop()}}}));

System.register("chunks:///_virtual/Line.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"f0a99ZWahxI5qCLHmY6Qrg3","Line",void 0);t("default",(function(){this.direction=void 0,this.point=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./ActorBase.ts","./ActorCar.ts","./ActorConfig.ts","./ActorController.ts","./ActorCustomer.ts","./ActorSoldier.ts","./CarController.ts","./CarryWorker.ts","./CustomerController.ts","./DigWorker.ts","./Enemy.ts","./EnemyController.ts","./EnemySoldier.ts","./NpcLayerControl.ts","./PlayerController.ts","./Soldier_Work.ts","./StakeWork.ts","./SwordWorker.ts","./ArrowController.ts","./GuideControl.ts","./Body2.ts","./AirwWall.ts","./ChangeTable.ts","./Door.ts","./GroundMarkDitie.ts","./MeatDuplicator.ts","./playPlusOneEffect.ts","./Brick.ts","./BrickTable.ts","./CarMeatTableController.ts","./DropBase.ts","./GroundMark.ts","./Meat.ts","./MeatTableController.ts","./Money.ts","./ResourcesDistributivePoint.ts","./Shield.ts","./StakeController.ts","./StakeController1.ts","./StoveController.ts","./Sword.ts","./SwordTableController.ts","./AILib.ts","./Agent.ts","./Body.ts","./Collider.ts","./Maths.ts","./Object.ts","./Shape.ts","./Contants.ts","./EventController.ts","./Icarus.ts","./MainGame.ts","./AudioManager.ts","./AudioPlay.ts","./AutoLabel2.ts","./AutoSprite.ts","./CameraController.ts","./EndCard.ts","./GameGlobal.ts","./GameRoot.ts","./GameSceneFit.ts","./Language2.ts","./PlacingSlack.ts","./PlayableSDK.ts","./SpineUtils.ts","./TestCollider.ts","./Utils.ts","./123.ts","./FaildCard.ts","./MaxEffect.ts","./UIController.ts","./Agent2.ts","./KdTree.ts","./Line.ts","./Obstacle.ts","./RVOConfig.ts","./RVOManager.ts","./RVOMath.ts","./Simulator.ts","./Vector2.ts","./commonDefine.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameGlobal.ts","./ResourcesDistributivePoint.ts"],(function(i){var t,e,n,o,a,r,l,u,s,p,m;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){a=i.cclegacy,r=i._decorator,l=i.Node,u=i.Camera,s=i.Component},function(i){p=i.GameGlobal},function(i){m=i.ResourcesDistributivePoint}],execute:function(){var c,y,b,f,P,g,d,w,h,M,z,N,G,v,C,_,S,k,D,L,R,F,I;a._RF.push({},"9be3aCW5fZFAYHIYPWwGIf0","MainGame",void 0);var A=r.ccclass,H=r.property;i("MainGame",(c=A("MainGame"),y=H({type:l,displayName:"主相机"}),b=H({type:l,displayName:"金币层"}),f=H({type:l,displayName:"肉掉落位置"}),P=H({type:m,displayName:"铸剑资源点"}),g=H({type:m,displayName:"取剑资源点"}),d=H({type:l,displayName:"领取剑位置"}),w=H({type:m,displayName:"肉资源点"}),h=H({type:m,displayName:"取肉资源点1"}),M=H({type:m,displayName:"取肉资源点2"}),z=H({type:m,displayName:"金币资源点"}),c((v=t((G=function(i){function t(){for(var t,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t=i.call.apply(i,[this].concat(a))||this,n(t,"mainCamera",v,o(t)),n(t,"meatLayer",C,o(t)),n(t,"meatPosition",_,o(t)),n(t,"brick_points",S,o(t)),n(t,"getSwordPosition",k,o(t)),n(t,"swordPosition",D,o(t)),n(t,"meatPoint",L,o(t)),n(t,"getMeatPosition1",R,o(t)),n(t,"getMeatPosition2",F,o(t)),n(t,"moneyPoint",I,o(t)),t}e(t,i);var a=t.prototype;return a.onLoad=function(){p.mainGame=this,p.mainCamera=this.mainCamera.getComponent(u),p.meatPosition=this.meatPosition,p.brick_point=this.brick_points,p.SwordPosition=this.swordPosition,p.getSwordPosition=this.getSwordPosition,p.getMeatPosition1=this.getMeatPosition1,p.getMeatPosition2=this.getMeatPosition2,p.meatPoint=this.meatPoint,p.moneyPoint=this.moneyPoint},a.start=function(){},a.update=function(i){},t}(s)).prototype,"mainCamera",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(G.prototype,"meatLayer",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(G.prototype,"meatPosition",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(G.prototype,"brick_points",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(G.prototype,"getSwordPosition",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(G.prototype,"swordPosition",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(G.prototype,"meatPoint",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(G.prototype,"getMeatPosition1",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(G.prototype,"getMeatPosition2",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(G.prototype,"moneyPoint",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=G))||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/Maths.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"243dbHh7HpB7b2/i1tGVo5m","Maths",void 0);t("Line",(function(){this.weight=.5,this.direction=void 0,this.point=void 0}));var i=t("Vector2",function(){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.x=void 0,this.y=void 0,this.x=t,this.y=n}return t.multiply=function(t,n){return t.x*n.x+t.y*n.y},t.multiply2=function(n,i){return new t(i.x*n,i.y*n)},t.division=function(n,i){return 0==i&&(i=1),new t(n.x/i,n.y/i)},t.subtract=function(n,i){return new t(n.x-i.x,n.y-i.y)},t.addition=function(n,i){return new t(n.x+i.x,n.y+i.y)},t}()),r=t("RVOMath",function(){function t(){}return t.abs=function(t){return this.sqrt(this.absSq(t))},t.absSq=function(t){return i.multiply(t,t)},t.normalize=function(t){return i.division(t,this.abs(t))},t.det=function(t,n){return t.x*n.y-t.y*n.x},t.distSqPointLineSegment=function(t,n,r){var u=i.multiply(i.subtract(r,t),i.subtract(n,t))/this.absSq(i.subtract(n,t));return u<0?this.absSq(i.subtract(r,t)):u>1?this.absSq(i.subtract(r,n)):this.absSq(i.subtract(r,i.addition(t,i.multiply2(u,i.subtract(n,t)))))},t.fabs=function(t){return Math.abs(t)},t.leftOf=function(t,n,r){return this.det(i.subtract(t,r),i.subtract(n,t))},t.sqr=function(t){return t*t},t.sqrt=function(t){return Math.sqrt(t)},t.transfromFloat=function(t){return Math.floor(10*t)/10},t}());r.RVO_EPSILON=1e-5,r.RVO_POSITIVEINFINITY=1e13,n._RF.pop()}}}));

System.register("chunks:///_virtual/MaxEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,a,l,i,c,r,s,o,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){i=e.cclegacy,c=e._decorator,r=e.Label,s=e.Vec3,o=e.tween,u=e.Component}],execute:function(){var f,h,b,p,d;i._RF.push({},"e03126HfQNAR6JtF05u6RTI","MaxEffect",void 0);var v=c.ccclass,y=c.property;e("MaxEffect",(f=v("MaxEffect"),h=y(r),f((d=t((p=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return t=e.call.apply(e,[this].concat(i))||this,a(t,"label",d,l(t)),t}n(t,e);var i=t.prototype;return i.start=function(){this.label&&(this.label.node.scale=new s(0,0,0),this.label.node.active=!1)},i.showMyself=function(){var e=this;this.label&&(this.label.node.active=!0,this.label.node.scale=new s(0,0,0),o(this.label.node).to(.5,{scale:new s(1,1,1)},{easing:"backOut"}).start(),this.scheduleOnce((function(){e.hideMyself()}),.5))},i.hideMyself=function(){var e=this;this.label&&o(this.label.node).to(.3,{scale:new s(0,0,0)},{easing:"backIn"}).call((function(){e.label.node.active=!1})).start()},t}(u)).prototype,"label",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=p))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/Meat.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DropBase.ts","./Body2.ts","./GameGlobal.ts","./Utils.ts","./AudioManager.ts","./Icarus.ts"],(function(t){var e,s,n,i,o,r,a,c,u,l,h,p,d,f,y,P,m,k;return{setters:[function(t){e=t.applyDecoratedDescriptor,s=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){a=t.cclegacy,c=t._decorator,u=t.Node,l=t.Vec3,h=t.UITransform},function(t){p=t.DropBase},function(t){d=t.DropStatus,f=t.ResourcesType},function(t){y=t.GameGlobal},function(t){P=t.Utils},function(t){m=t.AudioManager},function(t){k=t.timer}],execute:function(){var v,I,g,_,w;a._RF.push({},"f48f9m3nG1I74kIgW1OqUhR","Meat",void 0);var R=c.ccclass,D=c.property;t("Meat",(v=R("Meat"),I=D(u),v((w=e((_=function(t){function e(){for(var e,s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,n(e,"meatNode",w,i(e)),e.targetPos=new l,e}s(e,t);var a=e.prototype;return a.take=function(){this.status=d.FINISH,this.isPick=!0},a.skip_check=function(){this.isPick=!0,this.status=d.FINISH},a.checkDis=function(){var t=this.node.worldPosition.clone(),e=y.playerController.node.worldPosition.clone();return l.distance(t,e)},a.start=function(){this.isPick=!1,this.status=d.FLY;var t=y.meatPosition.worldPosition.clone(),e=this.node.parent.getComponent(h).convertToNodeSpaceAR(t),s=P.getRandomInt(-0,0),n=P.getRandomInt(-0,0);new l(e.x+s,e.y+n,e.z)},a.update=function(t){(this.node.setScale(1,1),1!=y.playerController.maxEffect.active)&&(!this.isPick&&this.status===d.DROP&&this.checkDis()<70&&(this.isPick=!0,this.status=d.FINISH,y.playerController.collect_resources({type:f.Meat1,target:this.node})?m.soundPlay("collect"):(this.isPick=!1,this.status=d.DROP)))},a.drop_delay=function(){var t=o(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(.2,this);case 2:this.status=d.CHACK,y.meatPoint.submit_resources(this.node,l.ZERO,90,.2),console.trace(">>> drop_delay called by:"),this.isPick=!0,this.status=d.FINISH;case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.drop_delay_player=function(){var t=o(r().mark((function t(){var e,s,n=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(.01,this);case 2:this.status=d.CHACK,y.playerController.collect_resources({type:f.Meat1,target:this.node})?(this.isPick=!0,this.status=d.FINISH,m.soundPlay("collect")):(this.isPick=!1,this.status=d.DROP,e=this.node.position.clone(),s=new l(e.x,e.y),new l(0,0,0),this.move_to_mark(s,.6,(function(){n.status=d.DROP})));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e}(p)).prototype,"meatNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=_))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/MeatDuplicator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DropBase.ts","./Body2.ts","./ResourcesDistributivePoint.ts","./GameGlobal.ts"],(function(e){var t,n,i,o,r,a,l,s,c,u,p,f,y,P,d,b,m,h,g,v,w,C,D,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,l=e._decorator,s=e.Prefab,c=e.Node,u=e.Sprite,p=e.Animation,f=e.Color,y=e.Collider2D,P=e.Contact2DType,d=e.instantiate,b=e.Vec3,m=e.Label,h=e.UIOpacity,g=e.tween,v=e.Component},function(e){w=e.DropBase},function(e){C=e.ResourcesType},function(e){D=e.ResourcesDistributivePoint},function(e){M=e.GameGlobal}],execute:function(){var N,z,O,x,S,T,_,B,E,G,A,R,I,L,F,H,W,U,j,k,J;a._RF.push({},"1250aNcGRdNW4GUCcJcLac2","MeatDuplicator",void 0);var V=l.ccclass,q=l.property;e("MeatDuplicator",(N=V("MeatDuplicator"),z=q({type:D,displayName:"双倍资源点"}),O=q({type:s,displayName:"肉预制体"}),x=q({type:D,displayName:"主角站位"}),S=q({type:c,displayName:"复制肉的位置"}),T=q({type:u,displayName:"圆圈外观"}),_=q(p),B=q(c),E=q({type:s,displayName:"+1飘字预制体"}),G=q(c),N((I=t((R=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"nextPoint",I,o(t)),i(t,"meatPrefab",L,o(t)),i(t,"playerPos",F,o(t)),i(t,"newMeatPos",H,o(t)),i(t,"circleSprite",W,o(t)),i(t,"x2animation",U,o(t)),i(t,"x2SpineParent",j,o(t)),i(t,"plusOnePrefab",k,o(t)),i(t,"meatPoint",J,o(t)),t.playerCtrl=null,t.highlightColor=new f(33,208,49),t.meatCount=0,t}n(t,e);var a=t.prototype;return a.start=function(){this.playerCtrl=M.playerController;var e=this.playerPos.getComponent(y);e&&(e.on(P.BEGIN_CONTACT,this.onPosBegin,this),e.on(P.END_CONTACT,this.onPosEnd,this))},a.onPosBegin=function(e,t){"Player"===t.node.name&&(this.circleSprite.color=this.highlightColor)},a.onPosEnd=function(e,t){t.node;"Player"===t.node.name&&(this.circleSprite.color=f.WHITE)},a.update=function(e){this.playerPos.have_resources&&this.collectAndDuplicateMeat()},a.collectAndDuplicateMeat=function(){var e=this;if(this.playerPos&&this.nextPoint)for(var t,n=this.playerPos.root.children.slice(),i=r(n);!(t=i()).done;){var o=t.value,a=o.getComponent(w);if(a&&a.type===C.Meat1&&!a.duplicated){a.duplicated=!0;o.worldPosition.clone();this.scheduleOnce((function(){var t=2;"MeatDuplicator-001"==e.node.name&&(t=4);for(var n=0;n<t;n++){var i=d(e.meatPrefab),o=i.getComponent(w);o&&(o.duplicated=!1),i.setParent(e.node),i.setWorldPosition(e.newMeatPos.worldPosition.clone()),e.nextPoint.submit_resources(i,new b(0,0,0),30,.25,!0)}e.playPlusOneEffect(e.newMeatPos.worldPosition)}),.1)}}},a.playPlusOneEffect=function(e,t){if(void 0===t&&(t="+1"),this.plusOnePrefab){var n=d(this.plusOnePrefab),i=0+8.5*(this.meatPoint?this.meatPoint.children.length:0);n.setParent(this.x2SpineParent),n.setPosition(0,i,0);var o=n.getComponent(m);o&&("MeatDuplicator-001"==this.node.name&&(t="+3"),o.string=t);var r=n.getComponent(h);r||(r=n.addComponent(h)),r.opacity=255,g(n).parallel(g().by(1.4,{position:new b(0,80,0)}),g().to(1.4,{scale:new b(1.3,1.3,1)}),g(r).to(1.3,{opacity:0})).call((function(){return n.destroy()})).start()}},t}(v)).prototype,"nextPoint",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(R.prototype,"meatPrefab",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(R.prototype,"playerPos",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(R.prototype,"newMeatPos",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(R.prototype,"circleSprite",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(R.prototype,"x2animation",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(R.prototype,"x2SpineParent",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(R.prototype,"plusOnePrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(R.prototype,"meatPoint",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=R))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/MeatTableController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameGlobal.ts","./CarryWorker.ts"],(function(r){var o,t,e,i,n,a,s,l,c,h,u,g,d,p;return{setters:[function(r){o=r.applyDecoratedDescriptor,t=r.inheritsLoose,e=r.initializerDefineProperty,i=r.assertThisInitialized},function(r){n=r.cclegacy,a=r._decorator,s=r.Node,l=r.Color,c=r.Collider2D,h=r.Contact2DType,u=r.Sprite,g=r.Component},function(r){d=r.GameGlobal},function(r){p=r.CarryWorker}],execute:function(){var y,f,m,w,C,k,W,P,b;n._RF.push({},"b95dfdJTMdEeJ1iXgs8Fqdl","MeatTableController",void 0);var v=a.ccclass,T=a.property;r("MeatTableController",(y=v("MeatTableController"),f=T(s),m=T(p),w=T(s),y((W=o((k=function(r){function o(){for(var o,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return o=r.call.apply(r,[this].concat(n))||this,e(o,"meatPosition",W,i(o)),e(o,"carryWorker",P,i(o)),e(o,"node1",b,i(o)),o.triggerNames=["Player","CarryWorker"],o.swordWorkerIsFetching=!1,o.highlightColor=new l(33,208,49),o}t(o,r);var n=o.prototype;return n.onLoad=function(){this.meatPosition||(this.meatPosition=this.node.getChildByName("meatPosition")),this.initCollider()},n.start=function(){this.scheduleOnce((function(){var r=d.actorController.waitingQueue[0];r&&(r.stopFetch=!0)}),1)},n.update=function(r){if(this.carryWorker&&this.meatPosition){var o=this.carryWorker.node.worldPosition,t=this.meatPosition.worldPosition,e=o.x-t.x,i=o.y-t.y;Math.sqrt(e*e+i*i)<=10?this.carryWorker.working||(this.carryWorker.working=!0):this.carryWorker.working&&(this.carryWorker.working=!1)}},n.initCollider=function(){if(this.meatPosition){var r=this.meatPosition.getComponent(c);r&&(r.on(h.BEGIN_CONTACT,this.onSwordBegin,this),r.on(h.END_CONTACT,this.onSwordEnd,this))}},n.onSwordBegin=function(r,o){var t=o.node,e=this.meatPosition.getComponent(u);if(-1!==this.triggerNames.indexOf(t.name)){var i=d.actorController.waitingQueue[0];if("CarryWorker"===t.name){if(this.swordWorkerIsFetching)return;this.swordWorkerIsFetching=!0,d.stopget1=!1,e.color=this.highlightColor,i.onPlayerTouchSword()}else"Player"===t.name&&(this.swordWorkerIsFetching||(i.stopFetch=!1,d.stopget1=!1,e.color=this.highlightColor,i.onPlayerTouchSword()))}},n.onSwordEnd=function(r,o){var t=o.node,e=this.meatPosition.getComponent(u);if(-1!==this.triggerNames.indexOf(t.name)){var i=d.actorController;if(i&&0!==i.waitingQueue.length){var n=i.waitingQueue[0];"CarryWorker"===t.name?this.swordWorkerIsFetching&&(this.swordWorkerIsFetching=!1,d.stopget1=!0,n.stopFetchSword(),e.color=l.WHITE):"Player"===t.name&&(this.swordWorkerIsFetching||(d.stopget1=!0,n.stopFetchSword(),e.color=l.WHITE))}}},o}(g)).prototype,"meatPosition",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=o(k.prototype,"carryWorker",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=o(k.prototype,"node1",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=k))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/Money.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DropBase.ts"],(function(e){var t,n,o,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator},function(e){r=e.DropBase}],execute:function(){var c;n._RF.push({},"ded69eoHcpGQ7Nyql4n18GW","Money",void 0);var s=o.ccclass;o.property,e("Money",s("Money")(c=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var o=n.prototype;return o.start=function(){},o.update=function(e){this.node.setScale(1,1)},n}(r))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/NpcLayerControl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,o,i,c,a,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,c=e._decorator,a=e.Node,l=e.Component}],execute:function(){var u,s,p,d,f;i._RF.push({},"148b6KCPFFMfYI1dBWmxFT6","NpcLayerControl",void 0);var y=c.ccclass,h=c.property;e("NpcLayerControl",(u=y("NpcLayerControl"),s=h([a]),u((f=t((d=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return t=e.call.apply(e,[this].concat(i))||this,n(t,"excludeNodes",f,o(t)),t}return r(t,e),t.prototype.update=function(){var e=this,t=this.node.children.filter((function(t){return-1===e.excludeNodes.indexOf(t)}));[].concat(t).sort((function(e,t){return t.position.y-e.position.y})).forEach((function(e,t){e.setSiblingIndex(t)}))},t}(l)).prototype,"excludeNodes",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=d))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/Object.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Collider.ts","./Shape.ts"],(function(t){var e,i,n,r,o,s,a,u,c,h,l,p,y,g,f,b,d,m,S,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.ccenum,u=t.CCInteger,c=t.Vec2,h=t.Vec3,l=t.PhysicsSystem,p=t.UITransform,y=t.Node,g=t.Component,f=t.Layers},function(t){b=t.cCollider},function(t){d=t.ShapeType,m=t.cPolygon,S=t.cSphere,w=t.cBox}],execute:function(){var v,T,x,R,z,D,A,C,O,P,B,N,V,L,F,I,j,k,_,E,M,K,U,H,J;o._RF.push({},"536a1gJdFZMKLX9hAiVKc1W","Object",void 0);var W=s.ccclass,X=s.property,Z=t("Trigger",function(t){return t[t.default=0]="default",t[t.enter=1]="enter",t[t.stay=2]="stay",t[t.exit=3]="exit",t}({})),q=t("Dirty",function(t){return t[t.R=1]="R",t[t.T=2]="T",t[t.S=4]="S",t[t.RTS=7]="RTS",t[t.RS=5]="RS",t[t.NON=0]="NON",t}({}));a(d);t("cObject",(v=W("cObject"),T=X({group:"Body"}),x=X({type:u,group:"Body"}),R=X({type:d,group:"Shape"}),z=X({group:"Shape"}),D=X({group:"Shape",visible:function(){return this.type==d.Box}}),A=X({group:"Shape",visible:function(){return this.type==d.Sphere}}),C=X({type:[c],group:"Shape",visible:function(){return this.type==d.Polygon}}),O=X({group:"Agent"}),P=X({min:.01,max:1,step:.01,group:"Agent",visible:function(){return this.agent}}),B=X({group:"Agent",visible:function(){return this.agent}}),N=X({group:"Agent",visible:function(){return this.agent}}),v((F=e((L=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"trigger",F,r(e)),n(e,"group",I,r(e)),n(e,"type",j,r(e)),n(e,"center",k,r(e)),n(e,"size",_,r(e)),n(e,"radius",E,r(e)),n(e,"points",M,r(e)),n(e,"agent",K,r(e)),n(e,"weight",U,r(e)),n(e,"maxRadius",H,r(e)),n(e,"maxVelocity",J,r(e)),e.tryVelocity=new h,e.velocity=new h,e.isDirty=q.RTS,e.shape=null,e.body=null,e}i(e,t);var o=e.prototype;return o.onLoad=function(){switch(this.type){case d.Box:this.shape=new w(this.center,this.size);break;case d.Sphere:this.shape=new S(this.center,this.radius);break;case d.Polygon:this.shape=new m(this.center,this.points)}this.body=b.inst.create(this),this.body.shape=this.shape,this.body.group=this.group,this.body.isAgent=this.agent,this.body.weight=this.weight,this.body.neighborDist=this.maxRadius,this.body.maxVelocity=this.maxVelocity,this.body.mask=l.instance.collisionMatrix[this.group],b.inst.insert(this.body),this.isDirty=q.RTS},o.setPosition=function(t){this.node.position=t,this.isDirty|=q.T},o.setRotation=function(t){this.node.rotation=t,this.isDirty|=q.R},o.setScale=function(t){this.node.scale=t,this.isDirty|=q.S},o.setAnchor=function(t){var e=this.center,i=this.shape.center,n=this.node.getComponent(p);if(n){n.anchorPoint=t;var r=n.contentSize;i.x=(.5-t.x)*r.width+e.x,i.y=(.5-t.y)*r.height+e.y,this.isDirty|=q.T}},o.getRotation=function(){return this.node.rotation},o.getPosition=function(){return this.node.position},o.getScale=function(){return this.node.scale},o.remove=function(t){return void 0===t&&(t=!0),b.inst.remove(this.body,t),this.node.removeFromParent(),this.node},o.insert=function(t){b.inst.insert(this.body,!0),this.node.parent!=t&&t.addChild(this.node)},o.setAnimation=function(t){},o.setColor=function(t){},o.init1=function(){},o.onTrigger=function(t,e){switch(e){case Z.enter:case Z.stay:case Z.exit:}},o.hasChangeDirty=function(){var t=this.isDirty,e=this.node.hasChangedFlags;return e&&(e&y.TransformBit.POSITION&&(t|=q.T),e&y.TransformBit.ROTATION&&(t|=q.R),e&y.TransformBit.SCALE&&(t|=q.S)),this.isDirty=q.NON,t},o.onDestroy=function(){b.inst.remove(this.body,!0),this.unscheduleAllCallbacks(),this.shape=null,this.body=null},e}(g)).prototype,"trigger",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=e(L.prototype,"group",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.Enum.DEFAULT}}),j=e(L.prototype,"type",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.Box}}),k=e(L.prototype,"center",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h}}),_=e(L.prototype,"size",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h}}),E=e(L.prototype,"radius",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=e(L.prototype,"points",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=e(L.prototype,"agent",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),U=e(L.prototype,"weight",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),H=e(L.prototype,"maxRadius",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=e(L.prototype,"maxVelocity",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),V=L))||V));o._RF.pop()}}}));

System.register("chunks:///_virtual/Obstacle.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"cae97C7vU9LMLVDNwCeph9O","Obstacle",void 0);i("default",(function(){this.next_=void 0,this.previous_=void 0,this.direction_=void 0,this.point_=void 0,this.id_=void 0,this.convex_=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/PlacingSlack.ts",["cc"],(function(c){var t,e;return{setters:[function(c){t=c.cclegacy,e=c._decorator}],execute:function(){t._RF.push({},"ea491nftMdBnq2rLSF5yNhx","PlacingSlack",void 0);e.ccclass,e.property;c("PlacingSlack",function(){function c(){}return c.enabled=function(t,e){c.thread=setTimeout((function(){null==e||e()}),1e3*t)},c.cancel=function(){-1!=c.thread&&(clearTimeout(c.thread),c.thread=-1)},c}()).thread=-1,t._RF.pop()}}}));

System.register("chunks:///_virtual/PlayableSDK.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var o,t,e,i;return{setters:[function(n){o=n.createClass},function(n){t=n.cclegacy,e=n.Vec3,i=n.game}],execute:function(){t._RF.push({},"d07003x1AlKcK9OBeSDqu6C","PlayableSDK",void 0);var a=n("PlatForm",function(n){return n.Aarki="Aarki",n.Applovin="Applovin",n.Facebook="Facebook",n.Google="Google",n.Ironsource="Ironsource",n.Liftoff="Liftoff",n.Mintegral="Mintegral",n.Moloco="Moloco",n.Tiktok="Tiktok",n.Unity="Unity",n.Vungle="Vungle",n.Wechat="Wechat",n.Preview="Preview",n}({})),r=n("PlayableSDK",function(){function n(){}return n.hideLoadingBar=function(){window.setLoadingProgress&&window.setLoadingProgress(100)},n.getGameConfs=function(n){return"GameConfs"in window?window.GameConfs[n]:null},n.download=function(o){void 0===o&&(o="download"),window.xsd_playable?window.xsd_playable.download():n.platform===a.Wechat&&window.wx.notifyMiniProgramPlayableStatus({isEnd:!0}),window.AnalyticsIns&&window.AnalyticsIns.reportActionbar(o)},n.autoDownload=function(){n.getGameConfs("autoDownload")&&setTimeout((function(){return n.download()}),1e3)},n.reportGameStart=function(n){void 0===n&&(n=""),window.AnalyticsIns&&window.AnalyticsIns.reportGameStart(n)},n.reportGameEnd=function(n,o){void 0===o&&(o=""),window.AnalyticsIns&&window.AnalyticsIns.reportGameEnd(n,o)},n.reportGameInteraction=function(n){window.AnalyticsIns&&i.totalTime-this.lastReportTime>=1e3&&(this.lastReportTime=i.totalTime,window.AnalyticsIns.reportGameInteraction(this.coordinate_old,n),this.coordinate_old=n)},n.reportGameTouch=function(n,o){window.AnalyticsIns&&(window.AnalyticsIns.reportGameTouch(n,this.coordinate_old,o),this.coordinate_old=o)},n.getPlatform=function(){return"Google"==window.__PLATFORM},n.adapter=function(){window.xsd_playable&&window.xsd_playable.adapter()},n.gameReady=function(){window.xsd_playable&&window.xsd_playable.gameReady()},n.gameEnd=function(){window.xsd_playable&&window.xsd_playable.gameEnd()},n.onInteracted=function(){this.isFirstClick||(window.xsd_playable&&window.xsd_playable.onInteracted(),this.isFirstClick=!0)},n.HttpAPI=function(){},n.unicodeEncode=function(n){for(var o="",t=0;t<n.length;t++){var e=n.charCodeAt(t);o+="\\u"+this.padLeft(e.toString(16),"0",4)}return o},n.unicodeDecode=function(n){return n.replace(/\\u([\d\w]{4})/gi,(function(n,o){return String.fromCharCode(parseInt(o,16))}))},n.padLeft=function(n,o,t){for(;n.length<t;)n=o+n;return n},o(n,null,[{key:"platform",get:function(){return"__PLATFORM"in window&&window.__PLATFORM?a[window.__PLATFORM]:window.wx?a.Wechat:a.Preview}}]),n}());r.isFirstClick=!1,r.lastReportTime=0,r.coordinate_old=new e,r.androidUrl="",r.iosUrl="",t._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActorBase.ts","./GameGlobal.ts","./Contants.ts","./SpineUtils.ts","./Body2.ts","./DropBase.ts","./ResourcesDistributivePoint.ts","./Icarus.ts","./AudioManager.ts","./Money.ts"],(function(t){var e,i,o,n,a,s,r,c,l,h,u,f,m,g,p,d,y,k,_,v,D,A,E,C,R,b,w,T,N,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,o=t.inheritsLoose,n=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,r=t._decorator,c=t.Node,l=t.BoxCollider2D,h=t.sp,u=t.Vec3,f=t.Contact2DType,m=t.PolygonCollider2D,g=t.Vec2,p=t.ProgressBar,d=t.game},function(t){y=t.ActorBase},function(t){k=t.GameGlobal,_=t.MEAT_HEIGHT,v=t.SWORD_HEIGHT,D=t.BRICK_HEIGHT},function(t){A=t.GroupDefine,E=t.Direction_Type},function(t){C=t.SpineUtils},function(t){R=t.ResourcesType},function(t){b=t.DropBase},function(t){w=t.ResourcesDistributivePoint},function(t){T=t.Icarus},function(t){N=t.AudioManager},function(t){P=t.Money}],execute:function(){var L,S,U,M,O,x,B,I,G,z,H,K,F,X,j,q,W,V,Z,J,Q,Y,$,tt,et,it,ot,nt,at,st,rt,ct,lt,ht,ut,ft,mt,gt;s._RF.push({},"f946bjUssxDaa6HIAZ4nEeE","PlayerController",void 0);var pt=r.ccclass,dt=r.property,yt=function(t){return t.Idle="idle",t.Run="run",t.Attack="attack",t.AttackRun="attackrun",t}(yt||{}),kt=function(t){return t.Down="LookDown",t.Up="LookUp",t.Left="LookLeft",t.Right="LookRight",t.LeftUp="LookUpLeft",t.RightUp="LookUpRight",t.LeftDown="LookDownLeft",t.RightDown="LookDownRight",t.DownLeft="LookDownLeft",t}(kt||{}),_t=t("Packge",(L=pt("Packge"),S=dt({type:R,displayName:"资源类型"}),U=dt({displayName:"数量"}),M=dt({type:c,displayName:"根节点"}),L((B=e((x=function(){i(this,"type",B,this),i(this,"count",I,this),i(this,"root",G,this)}).prototype,"type",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.Meat1}}),I=e(x.prototype,"count",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=e(x.prototype,"root",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=x))||O));t("PlayerController",(z=pt("PlayerController"),H=dt({type:l,displayName:"碰撞体"}),K=dt({type:h.Skeleton,displayName:"攻击特效"}),F=dt({type:[c],displayName:"包裹挂点"}),X=dt({type:c,displayName:"max特效"}),j=dt({type:h.Skeleton,displayName:"打铁特效"}),q=dt(c),W=dt(c),V=dt(c),Z=dt({type:c,displayName:"攻击范围右"}),J=dt({type:c,displayName:"攻击范围左"}),Q=dt({type:c,displayName:"攻击范围上"}),Y=dt({type:c,displayName:"攻击范围下"}),$=dt({type:_t}),z((it=e((et=function(t){function e(){for(var e,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,i(e,"collider2D",it,n(e)),i(e,"attack_effect",ot,n(e)),i(e,"packge_root",nt,n(e)),i(e,"maxEffect",at,n(e)),i(e,"forgeEffect",st,n(e)),i(e,"forgeEffectNode",rt,n(e)),i(e,"ResourcesGroup",ct,n(e)),i(e,"NPCLayer",lt,n(e)),i(e,"attackAreaR",ht,n(e)),i(e,"attackAreaL",ut,n(e)),i(e,"attackAreaU",ft,n(e)),i(e,"attackAreaD",mt,n(e)),e.moveDir=new u,e.isMoving=!1,e.targetsEnemy=[],e.targetsEnemyL=[],e.targetsEnemyR=[],e.targetsEnemyU=[],e.targetsEnemyD=[],e.isAttackComplete=!0,e.isKnockingBack=!1,e.spawnPoint=new u(0,0,0),i(e,"packge",gt,n(e)),e.request_resources=-1,e.take_resources_from_point=!1,e.addhp=!1,e.lastMoveDir=new u,e.isForging=!1,e.allowCollect=!0,e.joinAttackArea=!1,e.anim=null,e.curDirection=null,e.currentState=null,e.currentLookDir=null,e.isAttacking=!1,e.maxEffectTimer=0,e.maxEffectActiveTime=0,e}o(e,t);var s=e.prototype;return s.onLoad=function(){k.playerController=this,this.spawnPoint=this.node.worldPosition.clone()},s.start=function(){t.prototype.init.call(this,0,"playerController",A.P),this.curDirection=this.animNode.getScale().x>0?E.Left:E.Right,this.collider2D.on(f.BEGIN_CONTACT,this.onStartCollider,this),this.collider2D.on(f.END_CONTACT,this.onEndCollider,this);var e=this.getComponents(m);e&&(e[0].on(f.BEGIN_CONTACT,this.onStartColliderAttack,this),e[0].on(f.END_CONTACT,this.onEndColliderAttack,this),e[1].on(f.BEGIN_CONTACT,this.onStartColliderAttack,this),e[1].on(f.END_CONTACT,this.onEndColliderAttack,this),e[2].on(f.BEGIN_CONTACT,this.onStartColliderAttack,this),e[2].on(f.END_CONTACT,this.onEndColliderAttack,this),e[3].on(f.BEGIN_CONTACT,this.onStartColliderAttack,this),e[3].on(f.END_CONTACT,this.onEndColliderAttack,this)),this.spawnPoint=this.node.worldPosition.clone(),this.anim=this.animNode.getComponent(h.Skeleton),this.maxEffect.active=!1,this.attackAreaD.active=!1,this.attackAreaL.active=!1,this.attackAreaR.active=!1,this.attackAreaU.active=!1,this.maxEffectTimer=0},s.update=function(t){if(!this.isForging&&!k.GameEnd){if(this.cleanDeadEnemies(),this.joinAttackArea&&this.DoAttack(),this.isMoving){var e=this.node.getPosition(),i=this.moveDir.clone().multiplyScalar(this.moveSpeed*t),o=e.add(i);this.node.setPosition(o)}if(!k.BossDead&&k.enemy)g.distance(this.node.worldPosition.clone(),k.enemy.worldPosition.clone())>1100?(this.bloodBar.active=!1,this.Addhp()):this.bloodBar.active=!0;this.maxEffect&&this.maxEffect.active?(this.maxEffectActiveTime+=t,this.maxEffectActiveTime>=1&&(this.maxEffect.active=!1,this.maxEffectActiveTime=0)):this.maxEffectActiveTime=0}},s.onStartCollider=function(t,e){var i=e.node;"BrickResource"==i.name||"SwordResource"==i.name||"MeatResource"==i.name||"DoubleMeatResource"==i.name||"MoneyResource"==i.name||"DoubleMeatResource-001"==i.name?("MoneyResource"==i.name&&this.node.setParent(this.ResourcesGroup),this.take_resources_from_point=!0,this.collect_resources_from_resources({type:i.getComponent(w).type,target:i.getComponent(w)})):"Resource_root"==i.name||"submitTable"==i.name||"submitTable2"==i.name||"MeatDuplicatorPos"==i.name?i.getComponent(w).jiaofu():"EnemyController"==i.name&&(k.joinAttackCount++,this.joinAttackArea=!0,k.allActors.push(this))},s.onEndCollider=function(t,e){var i=e.node;if("BrickResource"==i.name||"SwordResource"==i.name||"MeatResource"==i.name||"DoubleMeatResource"==i.name||"MoneyResource"==i.name||"DoubleMeatResource-001"==i.name)"MoneyResource"==i.name&&this.node.setParent(this.NPCLayer),this.take_resources_from_point=!1,clearTimeout(this.request_resources),this.unscheduleAllCallbacks();else if("root"==i.name)i.getComponent(w).stop_jiaofu();else if("Resource_root"==i.name||"submitTable"==i.name||"submitTable2"==i.name||"MeatDuplicatorPos"==i.name)i.getComponent(w).stop_jiaofu();else if("EnemyController"==i.name){k.joinAttackCount=Math.max(0,k.joinAttackCount-1),this.joinAttackArea=!1;var o=k.allActors.indexOf(this);-1!==o&&k.allActors.splice(o,1)}},s.onStartColliderAttack=function(t,e){var i=e.node;if(i.name.startsWith("Enemy")){var o=i.getComponent(y);o&&1==t.tag?-1!==this.targetsEnemyR.indexOf(o)||o.isDead||this.targetsEnemyR.push(o):o&&2==t.tag?-1!==this.targetsEnemyL.indexOf(o)||o.isDead||this.targetsEnemyL.push(o):o&&3==t.tag?-1!==this.targetsEnemyU.indexOf(o)||o.isDead||this.targetsEnemyU.push(o):o&&4==t.tag&&(-1!==this.targetsEnemyD.indexOf(o)||o.isDead||this.targetsEnemyD.push(o))}},s.onEndColliderAttack=function(t,e){var i=e.node;if(i.name.startsWith("Enemy")){var o=i.getComponent(y);if(o&&1==t.tag){var n=this.targetsEnemyR.indexOf(o);-1!==n&&this.targetsEnemyR.splice(n,1)}else if(o&&2==t.tag){var a=this.targetsEnemyL.indexOf(o);-1!==a&&this.targetsEnemyL.splice(a,1)}else if(o&&3==t.tag){var s=this.targetsEnemyU.indexOf(o);-1!==s&&this.targetsEnemyU.splice(s,1)}else if(o&&4==t.tag){var r=this.targetsEnemyD.indexOf(o);-1!==r&&this.targetsEnemyD.splice(r,1)}}},s.toBossDis=function(){var t=this.node.worldPosition,e=k.enemy.worldPosition;u.distance(t,e)},s.Addhp=function(){this.hp+=.5,this.hp>=this.maxHp?(this.hp=this.maxHp,this.bloodBar.active=!1):this.bloodBar.active=!0,this.bloodBar&&(this.bloodBar.getComponent(p).progress=this.hpPercent)},s.packge_count=function(t){for(var e=0;e<this.packge.length;e++)if(this.packge[e].type==t)return this.packge[e].root.children.length;return 0},s.get_packge=function(t){for(var e=0;e<this.packge.length;e++){var i=this.packge[e];if(i.type==t)return i}var o=new _t;o.type=t;for(var n=0;n<this.packge_root.length;n++){var a=this.packge_root[n];if(0==a.children.length)return o.root=a,this.packge.push(o),o}return null},s.check_packge_position=function(){for(var t=[new u(-12,54,0),new u(-13,48,0),new u(-26,48,0),new u(-30,48,0)],e=0;e<this.packge.length;++e){var i=this.packge[e],o=t[e];i&&i.root?o||console.warn("⚠️ 没有定义第 "+e+" 个 point 坐标"):console.warn("⚠️ 第 "+e+" 个包裹不存在或未初始化")}},s.collect_resources_from_resources=function(t){var e=this,i=this.get_packge(t.type),o=i.root.children.length;if(o>=(t.type==R.Meat1?k.MAX_BRICK_COUNT:k.MAX_STACKING_COUNT)){if(0==t.target.root.children.length)return;return this.maxEffect.active=!0,void this.scheduleOnce((function(){e.maxEffect.active=!1}),.7)}if(k.uiController.refreshCoinUI(),t.target.have_resources()){var n=new u(0,(t.type==R.Meat1?_:v)*o,0);t.target.request_resources(i.root,n,(function(e){e.active||(e.active=!0);var o=i.root.children.indexOf(e);o<k.MAX_STACKING_COUNT?e.setPosition(new u(0,(t.type==R.Meat1?_:v)*o,0)):e.setPosition(new u(0,(t.type==R.Meat1?_:v)*(k.MAX_STACKING_COUNT-1),0)),e.getComponent(P)?N.soundPlay("collect_money"):N.soundPlay("collect"),o>=k.MAX_STACKING_COUNT&&(e.setPosition(new u(0,(t.type==R.Brick?D:_)*k.MAX_STACKING_COUNT,0)),e.active=!1)}),new u(0,0,0),!1);this.check_packge_position(),this.request_resources=setTimeout((function(){e.collect_resources_from_resources(t)}),1e3*T.actor_request_time)}else this.take_resources_from_point&&(this.request_resources=setTimeout((function(){e.collect_resources_from_resources(t)}),1e3*T.actor_request_time))},s.collect_resources=function(t){var e=this,i=t.target.getComponent(b);if(!i.drop_action){var o=this.get_packge(t.type),n=t.target.worldPosition.clone(),a=t.target.worldRotation.clone(),s=o.root.children.length;if(s>=(t.type==R.Meat1?k.MAX_BRICK_COUNT:k.MAX_STACKING_COUNT))return this.maxEffect.active=!0,this.scheduleOnce((function(){e.maxEffect.active=!1}),.7),!1;t.target.setParent(o.root),t.target.setWorldRotation(a),t.target.setWorldPosition(n),s>=k.MAX_STACKING_COUNT+21&&(s=k.MAX_STACKING_COUNT+21);var r=new u(0,(t.type==R.Brick?D:_)*s,0);return i.move_to_position(r,new u(0,0,0),.3,(function(e){var n=o.root.children.indexOf(e);n>k.MAX_STACKING_COUNT+20?(n=k.MAX_STACKING_COUNT+20,i.scheduleOnce((function(){e.setPosition(new u(0,(t.type==R.Brick?D:_)*k.MAX_STACKING_COUNT,0)),e.active=!1}),.01)):e.setPosition(new u(0,(t.type==R.Brick?D:_)*n,0))}),20),this.check_packge_position(),k.uiController.refreshCoinUI(),!0}},s.take_resources=function(t){this.allowCollect=!0;for(var e=0;e<this.packge.length;e++)if(this.packge[e].type==t){if(0==this.packge[e].root.children.length)return null;var i=this.packge[e].root.children[this.packge[e].root.children.length-1];return i.active||(i.active=!0),i}},s.DoAttack=function(){var t=this;if(console.log(0),(this.targetsEnemyL&&0!==this.targetsEnemyL.length||this.targetsEnemyR&&0!==this.targetsEnemyR.length||this.targetsEnemyU&&0!==this.targetsEnemyU.length||this.targetsEnemyD&&0!==this.targetsEnemyD.length)&&!this.isDead){var e=d.totalTime;if(this.lastAttackTime<=0&&(this.lastAttackTime=e),!(e<this.lastAttackTime)){this.lastAttackTime=e+this.attackTime,this.isAttacking=!0,this.isAttackComplete=!1,0===this.moveDir.length()&&this.lastMoveDir&&(this.moveDir=this.lastMoveDir.clone());var i=this.getLookDirection(this.moveDir);console.log("下敌人数",this.targetsEnemyD.length),console.log("上敌人数",this.targetsEnemyU.length),console.log("左敌人数",this.targetsEnemyL.length),console.log("右敌人数",this.targetsEnemyR.length),(this.curDirection!==E.Left||this.targetsEnemyL&&0!==this.targetsEnemyL.length)&&(this.curDirection!==E.Right||this.targetsEnemyR&&0!==this.targetsEnemyR.length)&&(this.curDirection!==E.Up||this.targetsEnemyU&&0!==this.targetsEnemyU.length)&&(this.curDirection!==E.Down||this.targetsEnemyD&&0!==this.targetsEnemyD.length)?(this.scheduleOnce((function(){N.soundPlay("actorAttack")}),.15),this.isMoving?this.playAnimation(yt.AttackRun,i,!1):this.playAnimation(yt.Attack,i,!1),console.log(5),i==kt.Down?(this.attack_effect.node.setScale(-1,1),this.attack_effect.node.setPosition(-4.4,-11.5),this.attack_effect.node.setRotationFromEuler(0,0,13)):i==kt.DownLeft?(this.attack_effect.node.setScale(-1,1),this.attack_effect.node.setPosition(-41,12),this.attack_effect.node.setRotationFromEuler(0,0,-14)):i==kt.Left?(this.attack_effect.node.setScale(-1,1),this.attack_effect.node.setPosition(-55,41),this.attack_effect.node.setRotationFromEuler(0,0,-49)):i==kt.LeftUp?(this.attack_effect.node.setScale(-1,1),this.attack_effect.node.setPosition(-41,84),this.attack_effect.node.setRotationFromEuler(0,0,-88)):i==kt.Up?(this.attack_effect.node.setScale(-1,1),this.attack_effect.node.setPosition(-6,116),this.attack_effect.node.setRotationFromEuler(0,0,-138)):i==kt.Right?(this.attack_effect.node.setScale(1,1),this.attack_effect.node.setPosition(72,38),this.attack_effect.node.setRotationFromEuler(0,0,48)):i==kt.RightDown?(this.attack_effect.node.setScale(1,1),this.attack_effect.node.setPosition(60,20),this.attack_effect.node.setRotationFromEuler(0,0,32)):i==kt.RightUp&&(this.attack_effect.node.setScale(1,1),this.attack_effect.node.setPosition(31,97),this.attack_effect.node.setRotationFromEuler(0,0,114)),this.scheduleOnce((function(){t.attack_effect.setAnimation(0,"animation",!1)}),.15),this.scheduleOnce((function(){var e=[];switch(t.curDirection){case E.Left:e=t.targetsEnemyL,t.attackAreaL.active=!0;break;case E.Right:e=t.targetsEnemyR,t.attackAreaR.active=!0;break;case E.Up:e=t.targetsEnemyU,t.attackAreaU.active=!0;break;case E.Down:e=t.targetsEnemyD,t.attackAreaD.active=!0}if(t.scheduleOnce((function(){t.attackAreaD.active=!1,t.attackAreaL.active=!1,t.attackAreaR.active=!1,t.attackAreaU.active=!1}),.3),!e||0===e.length)return t.isAttackComplete=!0,void(t.isAttacking=!1);for(var i,o=a(e);!(i=o()).done;){var n=i.value;n&&!n.isDead&&n.subHp(t,t.attack,!0)}t.isAttackComplete=!0}),.3),console.log(8),i=this.getLookDirection(this.moveDir),C.setAnimationWithEvent(this,this.animNode,this.isMoving?"attackrun":"attack","end",(function(){}),(function(){t.isAttacking=!1,t.playAnimation(t.isMoving?yt.Run:yt.Idle,i,!0),console.log(9)}))):this.isAttacking=!1}}},s.subHp=function(e,i){if(!this.isDead){var o=e;o&&(t.prototype.subHp.call(this,o,i),this.hp<50&&k.uiController.fanHong(),this.hp)}},s.playerMove=function(t){if(!this.isDead&&!this.isForging){this.anim.timeScale=1.3,this.moveDir=t.clone(),this.moveDir.normalize();var e=this.getLookDirection(this.moveDir);this.currentState===yt.Run&&this.currentLookDir===e||(this.currentState=yt.Run,this.currentLookDir=e,this.playAnimation(yt.Run,e,!0));this.moveDir.y,this.moveDir.x;Math.abs(this.moveDir.x)>Math.abs(this.moveDir.y)?this.moveDir.x>0?this.curDirection=E.Right:this.curDirection=E.Left:this.moveDir.y>0?this.curDirection=E.Up:this.curDirection=E.Down,console.log(this.curDirection);var i=this.packge_root[0].parent,o=this.node.getChildByName("Bag").getChildByName("Meat"),n=this.node.getChildByName("Bag").getChildByName("money");e==kt.LeftUp||e==kt.Up||e==kt.RightUp?(i.setSiblingIndex(7),e==kt.Up?(o.setPosition(-19,38),o.setScale(1,1),n.setPosition(-8,41),n.setScale(1,1)):e==kt.RightUp?(o.setPosition(-42,41),o.setScale(1,1),n.setPosition(-32,42),n.setScale(1,1)):e==kt.LeftUp&&(o.setPosition(28,41),o.setScale(-1,1),n.setPosition(39,39),n.setScale(-1,1))):(i.setSiblingIndex(6),e==kt.Down?(o.setPosition(11,64),o.setScale(1,1),n.setPosition(26,73),n.setScale(1,1)):e==kt.DownLeft?(o.setPosition(19,59),o.setScale(1,1),n.setPosition(34,66),n.setScale(1,1)):e==kt.RightDown?(o.setPosition(-15,59),o.setScale(-1,1),n.setPosition(-31,67),n.setScale(-1,1)):e==kt.Right?(o.setPosition(-21,49),o.setScale(-1,1),n.setPosition(-38,56),n.setScale(-1,1)):e==kt.Left&&(o.setPosition(20,56),o.setScale(1,1),n.setPosition(31,67),n.setScale(1,1))),this.isMoving=!0,this.lastMoveDir=this.moveDir.clone()}},s.playerStopMove=function(){this.isMoving=!1;var t=this.getLookDirection(this.moveDir);this.anim.timeScale=1,this.currentState=yt.Idle,this.playAnimation(yt.Idle,t,!0)},s.cleanDeadEnemies=function(){this.targetsEnemyL=this.targetsEnemyL.filter((function(t){return t&&t.hp>0})),this.targetsEnemyR=this.targetsEnemyR.filter((function(t){return t&&t.hp>0})),this.targetsEnemyU=this.targetsEnemyU.filter((function(t){return t&&t.hp>0})),this.targetsEnemyD=this.targetsEnemyD.filter((function(t){return t&&t.hp>0}))},s.getLookDirection=function(t){var e=(180*Math.atan2(t.y,t.x)/Math.PI+360)%360;return e>=337.5||e<22.5?kt.Right:e>=22.5&&e<67.5?kt.RightUp:e>=67.5&&e<112.5?kt.Up:e>=112.5&&e<157.5?kt.LeftUp:e>=157.5&&e<202.5?kt.Left:e>=202.5&&e<247.5?kt.LeftDown:e>=247.5&&e<292.5?kt.Down:e>=292.5&&e<337.5?kt.RightDown:kt.Down},s.playAnimation=function(t,e,i){if(void 0===i&&(i=!0),this.anim){var o=!1,n=e;switch(e){case kt.Right:n=kt.Left,o=!0;break;case kt.RightUp:n=kt.LeftUp,o=!0;break;case kt.RightDown:n=kt.LeftDown,o=!0}var a=t+"_"+n,s=t;this.anim.setSkin(a),this.anim.setSlotsToSetupPose(),this.animNode.setScale(new u(o?-1:1,1,1)),this.anim.setAnimation(0,s,i)}},e}(y)).prototype,"collider2D",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(et.prototype,"attack_effect",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(et.prototype,"packge_root",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),at=e(et.prototype,"maxEffect",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(et.prototype,"forgeEffect",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(et.prototype,"forgeEffectNode",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(et.prototype,"ResourcesGroup",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(et.prototype,"NPCLayer",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=e(et.prototype,"attackAreaR",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=e(et.prototype,"attackAreaL",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=e(et.prototype,"attackAreaU",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=e(et.prototype,"attackAreaD",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gt=e(et.prototype,"packge",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),tt=et))||tt));s._RF.pop()}}}));

System.register("chunks:///_virtual/playPlusOneEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,c,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t._decorator,r=t.Component}],execute:function(){var o;n._RF.push({},"8a2a1ekdchDkL1bKp/9RxJ9","playPlusOneEffect",void 0);var u=c.ccclass;c.property,t("playPlusOneEffect",u("playPlusOneEffect")(o=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var c=n.prototype;return c.start=function(){},c.update=function(t){},n}(r))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/ResourcesDistributivePoint.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Body2.ts","./GameGlobal.ts","./DropBase.ts","./Brick.ts","./Icarus.ts","./AudioManager.ts"],(function(t){var e,o,i,n,r,s,a,c,l,u,h,_,d,f,p,v,y,P,m,g,T,O,I,N;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,c=t.Vec3,l=t.Component},function(t){u=t.ResourcesType},function(t){h=t.MONEY_POINT,_=t.MEAT_POINT,d=t.SHIELD_POINT,f=t.SWORD_POINT,p=t.BRICK_POINT,v=t.MEAT_HEIGHT,y=t.BRICK_HEIGHT,P=t.BRICK_POINT1,m=t.GameGlobal,g=t.BRICK_HEIGHT1},function(t){T=t.DropBase},function(t){O=t.Brick},function(t){I=t.Icarus},function(t){N=t.AudioManager}],execute:function(){var b,w,M,k,C,R,x,D,B,S,E,G,A;r._RF.push({},"554a06Q0l1E65cv/FoG5a2v","ResourcesDistributivePoint",void 0);var W=s.ccclass,H=s.property;t("ResourcesDistributivePoint",(b=W("ResourcesDistributivePoint"),w=H({type:a,displayName:"根节点"}),M=H({type:u,displayName:"资源类型"}),k=H({displayName:"定点交付"}),C=H({displayName:"最高持有数量"}),R=H({displayName:"交付产物自动销毁"}),b((B=e((D=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(e,"root",B,n(e)),i(e,"type",S,n(e)),i(e,"point_delivery",E,n(e)),i(e,"max_count",G,n(e)),e.POINT=[],e.on_collecting=!1,i(e,"auto_destory",A,n(e)),e.have_count=0,e.player=null,e.haveWork=!1,e.on_collecting_actor=!0,e.actor_collecting_thread=null,e}o(e,t);var r=e.prototype;return r.onLoad=function(){switch(this.type){case u.Brick:this.POINT=p;break;case u.Sword:this.POINT=f;break;case u.Shield:this.POINT=d;break;case u.Meat1:case u.Meat2:case u.Meat4:this.POINT=_;break;case u.Money:this.POINT=h}},r.start=function(){},r.update=function(t){this.node.name,this.refresh(),"MeatDuplicatorPos"!=this.node.name&&(this.root.children.length>this.max_count?this.auto_destory=!0:this.auto_destory=!1)},r.refresh=function(){this.have_count=this.root.children.length},r.have_resources=function(){return!!this.root&&this.root.children.length>0},r.resources_count=function(){return this.root.children.length},r.submit_resources=function(t,e,o,i,n){var r=this;void 0===e&&(e=new c(0,0,0)),void 0===o&&(o=.5),void 0===i&&(i=.25);try{var s=t.getComponent(T),a=t.getComponent(O);if(a&&a.setSprite(!1),s&&s.drop_action)return;var l=t.worldPosition.clone(),h=t.worldRotation.clone();t.setParent(this.root),t.setWorldRotation(h),t.setWorldPosition(l);var _=this.root.children.indexOf(t);if(-1===_&&(_=Math.max(0,this.root.children.length-1)),!this.POINT||0===this.POINT.length)return void console.error("submit_resources: POINT is empty or undefined",this.POINT);var d=this.POINT.length>0?_%this.POINT.length:0,f=this.POINT[d];if(!f)return void console.error("submit_resources: no point template at idx",d,"POINT=",this.POINT);var p=f.clone(),P=Math.floor(_/this.POINT.length),m=s&&s.type==u.Meat1?v:y;p.y+=P*m,"MoneyResource"==this.node.name&&(m=9),this.point_delivery&&(p=new c(0,0,0)),s&&s.type==u.Brick?s.move_to_position(p,e,i,(function(t){if(a&&a.setSprite(!0),r.auto_destory)t.destroy();else{var e=r.root.children.indexOf(t);-1===e&&(e=r.root.children.length-1);var o=r.POINT[e%r.POINT.length].clone();o.y+=Math.floor(e/r.POINT.length)*(s.type==u.Brick?y:v),t.setPosition(o)}}),o):s.move_to_position(p,e,i,(function(e){if(r.auto_destory)return t.setParent(r.root),t.setPosition(c.ZERO),void r.scheduleOnce((function(){e.destroy()}),0);"submitTable"==r.node.name&&(r.POINT=[new c(-19,14,0),new c(17,-13,0)]),"submitTable2"==r.node.name&&(r.POINT=[new c(-19,14,0),new c(17,-13,0)]),"DoubleMeatResource"==r.node.name&&(r.POINT=[new c(-16,19.6,0),new c(20.4,-7,0)]),"MeatDuplicatorPos"==r.node.name&&(r.POINT=[new c(0,0,0)]),s.type==u.Meat1&&N.soundPlay("collect");var o=r.root.children.indexOf(e);-1===o&&(o=r.root.children.length-1);var i=r.POINT[o%r.POINT.length].clone();"MoneyResource"==r.node.name?i.y=9:(i.y+=Math.floor(o/r.POINT.length)*(s.type,u.Meat1,v),e.setPosition(i))}),o)}catch(e){var g,I;console.error("submit_resources error:",e),console.debug({resourcesName:t.name,POINT_len:null==(g=this.POINT)?void 0:g.length,rootChildren_len:null==(I=this.root)||null==(I=I.children)?void 0:I.length})}},r.submit_resources_brick=function(t,e,o,i,n){var r=this;void 0===e&&(e=new c(0,0,0)),void 0===o&&(o=.5),void 0===i&&(i=.25);try{var s=t.getComponent(T),a=t.getComponent(O);if(a&&a.setSprite(!1),s.drop_action)return;var l=t.worldPosition.clone(),h=t.worldRotation.clone();t.setParent(this.root),t.setWorldRotation(h),t.setWorldPosition(l),t.setScale(new c(1,1,1)),this.POINT=P;var _=this.root.children.indexOf(t);_>=m.MAX_STACKING_COUNT*this.POINT.length&&(_=m.MAX_STACKING_COUNT*this.POINT.length+_%this.POINT.length);var d=this.POINT[_%this.POINT.length].clone();d.y+=Math.floor(_/this.POINT.length)*(s.type==u.Sword?v:g),this.point_delivery&&(d=new c(0,0,0)),s.move_to_position(d,e,i,(function(t){if(a&&a.setSprite(!0),r.auto_destory)t.destroy();else{var e=r.root.children.indexOf(t),o=r.POINT[e%r.POINT.length].clone();o.y+=Math.floor(e/r.POINT.length)*(s.type==u.Brick?g:v),t.setPosition(o),a&&a.setSprite(!1)}}),o)}catch(t){}},r.request_resources=function(t,e,o,i,n){var r=this;if(void 0===i&&(i=new c(0,90,0)),void 0===n&&(n=!1),this.root.children.length>0){if("submitTable"==this.node.name){for(var s=0,a=function(){var a=r.root.children[l],c=a.getComponent(T);if(c&&null==c.drop_action){if(s++,r.auto_destory)return r.have_count--,c.destroy_self(),1;var u=a.worldPosition.clone();a.active||(a.active=!0),a.setParent(t),a.setWorldPosition(u),c.move_to_position(e,i,.25,(function(t){o&&o(t),n&&c.destroy_self()}),30)}},l=this.root.children.length-1;l>=0&&s<2;l--)a();return s>0}if("submitTable2"==this.node.name){for(var u=0,h=function(){var s=r.root.children[_],a=s.getComponent(T);if(a&&null==a.drop_action){if(u++,r.auto_destory)return r.have_count--,a.destroy_self(),1;var c=s.worldPosition.clone();s.active||(s.active=!0),s.setParent(t),s.setWorldPosition(c),a.move_to_position(e,i,.25,(function(t){o&&o(t),n&&a.destroy_self()}),30)}},_=this.root.children.length-1;_>=0&&u<4;_--)h();return u>0}for(var d,f=function(){var s=r.root.children[p],a=s.getComponent(T);if(a&&null==a.drop_action){if(r.auto_destory)return r.have_count--,a.destroy_self(),{v:!0};var c=s.worldPosition.clone();return s.active||(s.active=!0),s.setParent(t),s.setWorldPosition(c),a.move_to_position(e,i,.25,(function(t){o&&o(t),n&&a.destroy_self()}),30),{v:!0}}},p=this.root.children.length-1;p>=0;p--)if(d=f())return d.v}return!1},r.jiaofu=function(){this.on_collecting_actor=!0,this.player=m.playerController,this.take_resources()},r.take_resources=function(){var t=this;if(this.on_collecting_actor)if(this.have_count>=this.max_count+100)null!=this.player&&this.player.take_resources(this.type)?this.actor_collecting_thread=setTimeout((function(){t.jiaofu()}),100*I.table_request_time):(this.on_collecting_actor=!1,this.player=null);else{var e=m.playerController.take_resources(this.type);if(e){var o=e.getComponent(T);if(o)if("MeatDuplicatorPos"==this.node.name&&o.duplicated,e)e.getComponent(T).type==u.Meat1?(this.submit_resources(e,new c(0,0,0),50,.25,!1),N.soundPlay("collect")):this.submit_resources(e,new c(0,0,0),50,.25,!1),this.have_count++,this.have_count<this.max_count+100?this.actor_collecting_thread=setTimeout((function(){t.jiaofu()}),1e3*I.table_request_time):(this.on_collecting_actor=!1,this.player=null);else this.on_collecting_actor=!1}else this.on_collecting_actor=!1}},r.stop_jiaofu=function(){clearTimeout(this.actor_collecting_thread),this.player=null},r.jiaofu_work=function(t){return!(this.have_count>=this.max_count)&&(this.on_collecting=!0,this.take_resources_work(t),!0)},r.take_resources_work=function(t){var e=this;if(this.on_collecting)if(this.have_count>=this.max_count+100)this.scheduleOnce((function(){e.take_resources_work(t)}),I.table_request_time);else{var o=t.take_resources();if(!o)return this.on_collecting=!1,void t.check_find();this.submit_resources(o,c.ZERO,.5,.25,!0),this.have_count++,this.scheduleOnce((function(){e.take_resources_work(t)}),I.table_request_time)}},e}(l)).prototype,"root",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(D.prototype,"type",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u.Money}}),E=e(D.prototype,"point_delivery",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=e(D.prototype,"max_count",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),A=e(D.prototype,"auto_destory",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=D))||x));r._RF.pop()}}}));

System.register("chunks:///_virtual/RVOConfig.ts",["cc","./Vector2.ts"],(function(e){var t,i;return{setters:[function(e){t=e.cclegacy},function(e){i=e.default}],execute:function(){t._RF.push({},"31a0bJzYl1KTIqYORDC8HWs","RVOConfig",void 0);var n=e("default",(function(){}));n.neighborDist=150,n.radius=150,n.maxSpeed=300,n.velocity=new i(0,0),n.maxNeighbors=30,n.timeHorizon=20,n.timeHorizonObst=20,n.gameTimeStep=.01,t._RF.pop()}}}));

System.register("chunks:///_virtual/RVOManager.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"1046aVQuEFJxK64cuX11gv0","RVOManager",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/RVOMath.ts",["cc","./Vector2.ts"],(function(t){var n,r;return{setters:[function(t){n=t.cclegacy},function(t){r=t.default}],execute:function(){n._RF.push({},"a43220OBZFKgZeBEN5rLzEV","RVOMath",void 0);var u=t("default",function(){function t(){}return t.abs=function(t){return this.sqrt(this.absSq(t))},t.absSq=function(t){return r.multiply(t,t)},t.normalize=function(t){return r.division(t,this.abs(t))},t.det=function(t,n){return t.x*n.y-t.y*n.x},t.distSqPointLineSegment=function(t,n,u){var s=r.multiply(r.subtract(u,t),r.subtract(n,t))/this.absSq(r.subtract(n,t));return s<0?this.absSq(r.subtract(u,t)):s>1?this.absSq(r.subtract(u,n)):this.absSq(r.subtract(u,r.addition(t,r.multiply2(s,r.subtract(n,t)))))},t.fabs=function(t){return Math.abs(t)},t.leftOf=function(t,n,u){return this.det(r.subtract(t,u),r.subtract(n,t))},t.sqr=function(t){return t*t},t.sqrt=function(t){return Math.sqrt(t)},t.transfromFloat=function(t){return Math.floor(10*t)/10},t}());u.RVO_EPSILON=1e-5,u.RVO_POSITIVEINFINITY=1e13,n._RF.pop()}}}));

System.register("chunks:///_virtual/Shape.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AILib.ts"],(function(t){var e,n,i,r,s,o,a,h;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t.Vec3,r=t.Vec2},function(t){s=t.obbIntersect,o=t.sphereAABBDistance,a=t.sphereOBBDistance,h=t.default}],execute:function(){n._RF.push({},"dce6d+QUiFEp5PjeDYWbBIF","Shape",void 0);var u=t("ShapeType",function(t){return t[t.Box=1]="Box",t[t.Sphere=2]="Sphere",t[t.Polygon=4]="Polygon",t}({})),c=t("cShape",function(){function t(t,e){this.radius=0,this.height=0,this.type=u.Box,this.point2Ds=[],this.size={x:0,y:0,z:0},this.scale={x:1,y:1,z:1},this.center={x:0,y:0,z:0},this.aabb=[0,0,0,0,0,0],this.type=e,this.center.x=t.x,this.center.y=t.y,this.center.z=t.z}return t.prototype.updateAABB=function(t,e,n){void 0===n&&(n=!0);var i=this.size,r=this.center,s=t.x,o=t.y,a=t.z,h=r.x,u=r.y,c=r.z,g=.5*i.x,y=.5*i.y,l=.5*i.z,p=this.aabb;if(n)g=Math.abs(g*s),y=Math.abs(y*o),l=Math.abs(l*a),p[0]=h*s-g,p[1]=u*o-y,p[2]=c*a-l,p[3]=h*s+g,p[4]=u*o+y,p[5]=c*a+l;else{var x=e.m00*s,f=e.m01*s,z=e.m02*s,b=e.m03*o,S=e.m04*o,d=e.m05*o,B=e.m06*a,P=e.m07*a,v=e.m08*a,M=x*h+b*u+B*c,m=f*h+S*u+P*c,C=z*h+d*u+v*c,R=Math.abs(x)*g+Math.abs(b)*y+Math.abs(B)*l,w=Math.abs(f)*g+Math.abs(S)*y+Math.abs(P)*l,D=Math.abs(z)*g+Math.abs(d)*y+Math.abs(v)*l;p[0]=M-R,p[1]=m-w,p[2]=C-D,p[3]=M+R,p[4]=m+w,p[5]=C+D}return p},t}()),g=(t("cBox",function(t){function n(e,n){var i;(i=t.call(this,e,u.Box)||this).size.x=n.x,i.size.y=n.y,i.size.z=n.z;var s=i.point2Ds;return s[0]=new r(-n.x/2,n.y/2),s[1]=new r(n.x/2,n.y/2),s[2]=new r(n.x/2,-n.y/2),s[3]=new r(-n.x/2,-n.y/2),i}return e(n,t),n}(c)),t("cSphere",function(t){function n(e,n){var i;return(i=t.call(this,e,u.Sphere)||this).radius=n,i.size.x=2*n,i.size.y=2*n,i.size.z=2*n,i}return e(n,t),n}(c)),t("cPolygon",function(t){function n(e,n){var i;(i=t.call(this,e,u.Polygon)||this).point2Ds=n;for(var r=n[0].x,s=n[0].y,o=r,a=s,h=n.length,c=1;c<h;c++){var g=n[c].x,y=n[c].y;r>=g?r=g:o<=g&&(o=g),s>=y?s=y:a<=y&&(a=y)}return i.size.x=o-r,i.size.y=a-s,i.size.z=0,i}return e(n,t),n}(c)),new i),y=new r,l=t("ShapeSupport",[]);l[u.Box|u.Box]=function(t,e){return!(!t.isIdentity||!e.isIdentity)||s(t.getCenter(),t.getHalfSize(),t.getRotMat3(),e.getCenter(),e.getHalfSize(),e.getRotMat3())},l[u.Box|u.Sphere]=function(t,e){return t.isIdentity?(i.subtract(g,e.getCenter(),t.getCenter()),o(g,e.getRaidus(),t.getHalfSize())):a(e.getCenter(),e.getRaidus(),t.getCenter(),t.getRotation(),t.getHalfSize())},l[u.Sphere|u.Sphere]=function(t,e){var n=t.getCenter(),r=e.getCenter();i.subtract(g,n,r);var s=g.lengthSqr(),o=t.getRaidus()+e.getRaidus();return s<=o*o},l[u.Box|u.Polygon]=function(t,e){return h.polygonPolygon(t.getPoints(),e.getPoints())},l[u.Sphere|u.Polygon]=function(t,e){var n=t.getCenter(),i=t.getRaidus();return y.x=n.x,y.y=n.y,h.polygonCircle(e.getPoints(),y,i)},l[u.Polygon|u.Polygon]=function(t,e){return h.polygonPolygon(t.getPoints(),e.getPoints())},n._RF.pop()}}}));

System.register("chunks:///_virtual/Shield.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DropBase.ts"],(function(t){var e,r,n,o;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator},function(t){o=t.DropBase}],execute:function(){var c;r._RF.push({},"c5ad804l61GPYv+ZqYQz1VQ","Shield",void 0);var i=n.ccclass;n.property,t("Shield",i("Shield")(c=function(t){function r(){return t.apply(this,arguments)||this}e(r,t);var n=r.prototype;return n.start=function(){},n.update=function(t){},r}(o))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/Simulator.ts",["cc","./Agent2.ts","./KdTree.ts","./Obstacle.ts","./RVOMath.ts","./Vector2.ts"],(function(t){var e,i,n,s,o,a;return{setters:[function(t){e=t.cclegacy},function(t){i=t.default},function(t){n=t.default},function(t){s=t.default},function(t){o=t.default},function(t){a=t.default}],execute:function(){e._RF.push({},"5a038JztaNLYYWxG/DutPpS","Simulator",void 0);t("default",function(){function t(t){this.s_totalID=0,this.agentNo2indexDict_=void 0,this.index2agentNoDict_=void 0,this.agents_=[],this.obstacles_=[],this.kdTree_=void 0,this.timeStep_=void 0,this.defaultAgent_=void 0,this.globalTime_=void 0,this.agentMap={},"number"==typeof t&&(this.s_totalID=t),this.init()}var e=t.prototype;return e.init=function(){this.agents_=[],this.agentNo2indexDict_=new Map,this.index2agentNoDict_=new Map,this.defaultAgent_=null,this.kdTree_=new n,this.kdTree_.simulator=this,this.obstacles_=[],this.globalTime_=0,this.timeStep_=.1},e.doStep=function(){this.updateDeleteAgent(),this.kdTree_.buildAgentTree();for(var t=0,e=this.agents_.length;t<e;t++){var i=this.agents_[t];i.computeNeighbors(),i.computeNewVelocity()}for(var n=0,s=this.agents_.length;n<s;n++){this.agents_[n].update()}return this.globalTime_+=this.timeStep_,this.globalTime_},e.updateDeleteAgent=function(){for(var t=!1,e=this.agents_.length-1;e>=0;e--)this.agents_[e].needDelete_&&(this.agents_.splice(e,1),t=!0);t&&this.onDelAgent()},e.addAgent=function(t,e,n){if(void 0===n&&(n=0),null==this.defaultAgent_)return-1;var s=new i;s.id_=this.s_totalID,this.s_totalID++;var o=(null==e?void 0:e.maxNeighbors)||0,a=(null==e?void 0:e.neighborDist)||0,_=(null==e?void 0:e.radius)||0,h=(null==e?void 0:e.timeHorizon)||0,g=(null==e?void 0:e.timeHorizonObst)||0,l=(null==e?void 0:e.avoidenceWeight)||0;return s.maxNeighbors_=o||this.defaultAgent_.maxNeighbors_,s.maxSpeed_=this.defaultAgent_.maxSpeed_,s.neighborDist_=a||this.defaultAgent_.neighborDist_,s.position_=t,s.radius_=_||this.defaultAgent_.radius_,s.timeHorizon_=h||this.defaultAgent_.timeHorizon_,s.timeHorizonObst_=g||this.defaultAgent_.timeHorizonObst_,s.velocity_=this.defaultAgent_.velocity_,s.avoidenceWeight_=l||this.defaultAgent_.avoidenceWeight_,s.simulator=this,s.type=n,this.agents_.push(s),this.onAddAgent(),this.agentMap[s.id_]=s,s.id_},e.updateAgent=function(t,e){var i=this.agentMap[t];null!=i?(i.maxNeighbors_=(null==e?void 0:e.maxNeighbors)||i.maxNeighbors_,i.neighborDist_=(null==e?void 0:e.neighborDist)||i.neighborDist_,i.radius_=(null==e?void 0:e.radius)||i.radius_,i.timeHorizon_=(null==e?void 0:e.timeHorizon)||i.timeHorizon_,i.timeHorizonObst_=(null==e?void 0:e.maxNeighbors)||i.timeHorizonObst_):console.error("updateAgent error, sid not found:",t)},e.addObstacle=function(t){if(t.length<2)return-1;for(var e=this.obstacles_.length,i=0;i<t.length;++i){var n=new s;n.point_=t[i],0!=i&&(n.previous_=this.obstacles_[this.obstacles_.length-1],n.previous_.next_=n),i==t.length-1&&(n.next_=this.obstacles_[e],n.next_.previous_=n),n.direction_=o.normalize(a.subtract(t[i==t.length-1?0:i+1],t[i])),2==t.length?n.convex_=!0:n.convex_=o.leftOf(t[0==i?t.length-1:i-1],t[i],t[i==t.length-1?0:i+1])>=0,n.id_=this.obstacles_.length,this.obstacles_.push(n)}return e},e.delAgentBySid=function(t){var e=this.agentMap[t];e&&(e.needDelete_=!0,delete this.agentMap[t])},e.onDelAgent=function(){this.agentNo2indexDict_.clear(),this.index2agentNoDict_.clear();for(var t=0;t<this.agents_.length;t++){var e=this.agents_[t].id_;this.agentNo2indexDict_.set(e,t),this.index2agentNoDict_.set(t,e)}},e.onAddAgent=function(){if(0!=this.agents_.length){var t=this.agents_.length-1,e=this.agents_[t].id_;this.agentNo2indexDict_.set(e,t),this.index2agentNoDict_.set(t,e)}},e.getAgentPosition=function(t){var e=this.agents_[this.agentNo2indexDict_.get(t)];return e?e.position_:new a(0,0)},e.setAgentPosition=function(t,e){var i=this.agents_[this.agentNo2indexDict_.get(t)];i&&(i.position_=e)},e.getAgentPrefVelocity=function(t){return this.agents_[this.agentNo2indexDict_.get(t)].prefVelocity_},e.getAgentNeighbors=function(t){return this.agents_[this.agentNo2indexDict_.get(t)].agentNeighbors_.length},e.getAgent=function(t){return this.agents_.find((function(e){return e.id_===t}))||null},e.setTimeStep=function(t){this.timeStep_=t},e.setAgentDefaults=function(t,e,n,s,o,a,_){null==this.defaultAgent_&&(this.defaultAgent_=new i),this.defaultAgent_.maxNeighbors_=e,this.defaultAgent_.maxSpeed_=a,this.defaultAgent_.neighborDist_=t,this.defaultAgent_.radius_=o,this.defaultAgent_.timeHorizon_=n,this.defaultAgent_.timeHorizonObst_=s,this.defaultAgent_.velocity_=_},e.processObstacles=function(){this.kdTree_.buildObstacleTree()},e.setAgentPrefVelocity=function(t,e){var i=this.agents_[this.agentNo2indexDict_.get(t)];i&&(i.prefVelocity_=e)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Soldier_Work.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActorBase.ts","./SpineUtils.ts","./Contants.ts","./GameGlobal.ts","./Icarus.ts","./AudioManager.ts"],(function(t){var i,e,o,n,s,a,r,c,h,l,u,d,k,p,f,g,m,L,y,D;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,s=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,r=t._decorator,c=t.BoxCollider2D,h=t.Node,l=t.sp,u=t.Contact2DType,d=t.Vec3,k=t.game},function(t){p=t.ActorBase},function(t){f=t.SpineUtils},function(t){g=t.GroupDefine,m=t.SOLDIER_ACTION},function(t){L=t.GameGlobal},function(t){y=t.Icarus},function(t){D=t.AudioManager}],execute:function(){var v,A,S,P,w,b,N,_,x;a._RF.push({},"ff930tVYlBBmZSWkoi2rzez","Soldier_Work",void 0);var C=r.ccclass,R=r.property,I=function(t){return t[t.LookDown=0]="LookDown",t[t.LookDownLeft=1]="LookDownLeft",t[t.LookLeft=2]="LookLeft",t[t.LookUpLeft=3]="LookUpLeft",t[t.LookUp=4]="LookUp",t[t.LookUpRight=5]="LookUpRight",t[t.LookRight=6]="LookRight",t[t.LookDownRight=7]="LookDownRight",t}(I||{});function T(t){return(t=(t+360)%360)>=337.5||t<22.5?I.LookRight:t>=22.5&&t<67.5?I.LookUpRight:t>=67.5&&t<112.5?I.LookUp:t>=112.5&&t<157.5?I.LookUpLeft:t>=157.5&&t<202.5?I.LookLeft:t>=202.5&&t<247.5?I.LookDownLeft:t>=247.5&&t<292.5?I.LookDown:I.LookDownRight}t("Soldier_Wrok",(v=C("Soldier_Wrok"),A=R({type:c,displayName:"碰撞体"}),S=R({type:h,displayName:"巡逻点1"}),P=R({type:h,displayName:"巡逻点2"}),v((N=i((b=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,o(i,"collider2D",N,n(i)),o(i,"point1",_,n(i)),o(i,"point2",x,n(i)),i.currentPointIndex=0,i.reachedPoints=!1,i.isAttacking=!1,i.anim=null,i.lastSkin="",i.lastDir=I.LookDown,i.working=!1,i.pos=void 0,i}e(i,t);var a=i.prototype;return a.onLoad=function(){var i=this;t.prototype.init.call(this,0,"ActorSoldier",g.S),this.anim=this.animNode.getComponent(l.Skeleton),this.collider2D.on(u.BEGIN_CONTACT,this.onStartCollider,this),this.collider2D.on(u.END_CONTACT,this.onEndCollider,this),this.scheduleOnce((function(){i.node.active=!1}),0),this.pos=this.node.position.clone()},a.start=function(){},a.enable_work=function(){var t=this;this.scheduleOnce((function(){t.node.active=!0,t.working=!0,L.allActors.push(t),t.node.setPosition(t.pos),D.soundPlay("Apprence")}),0)},a.update=function(t){if(!this.isDead&&!L.GameEnd)if(this.reachedPoints)if(this.target&&this.target.isValid&&!this.target.isDead||(this.target=this.findNearestEnemy(),this.target)){var i=this.node.getPosition(),e=this.target.node.getPosition();if(d.distance(i,e)>this.attackRadius){if(this.isAttacking)return;var o=new d(e.x-i.x,e.y-i.y,0),n=T(180*Math.atan2(o.y,o.x)/Math.PI),s=y.lerp_move_by_speed(i,this.node,e,this.moveSpeed,t).position;this.node.setPosition(s),this.changeSkinByDirection("run",n)}else this.isAttacking||this.DoAttack()}else this.changeAnim(m.FRONT_IDLE,!0);else this.moveToPoints(t)},a.moveToPoints=function(t){var i=[this.point1,this.point2];if(this.currentPointIndex>=i.length)return this.reachedPoints=!0,void this.changeSkinByDirection("idle",this.lastDir);var e=i[this.currentPointIndex];if(e){var o=this.node.getPosition(),n=e.getPosition(),s=new d(n.x-o.x,n.y-o.y,0),a=T(180*Math.atan2(s.y,s.x)/Math.PI);if(d.distance(o,n)>10){var r=y.lerp_move_by_speed(o,this.node,n,this.moveSpeed,t).position;this.node.setPosition(r),this.changeSkinByDirection("run",a)}else this.currentPointIndex++}else this.currentPointIndex++},a.setFacing=function(t){var i=this.node.getPosition().x,e=this.animNode.getScale();t<i?this.animNode.setScale(new d(-Math.abs(e.x),e.y,e.z)):this.animNode.setScale(new d(Math.abs(e.x),e.y,e.z))},a.onStartCollider=function(t,i){"EnemyController"==i.node.name&&L.joinAttackCount++},a.onEndCollider=function(t,i){"EnemyController"==i.node.name&&(L.joinAttackCount=Math.max(0,L.joinAttackCount-1))},a.DoAttack=function(){var t=this;if(!this.isDead&&!this.isAttacking){var i=k.totalTime;if(this.lastAttackTime<=0&&(this.lastAttackTime=i),!(i<this.lastAttackTime)){this.lastAttackTime=i+this.attackTime,this.isAttacking=!0;var e=this.node.getPosition(),o=this.target.node.getPosition(),n=new d(o.x-e.x,o.y-e.y,0),s=T(180*Math.atan2(n.y,n.x)/Math.PI);this.changeSkinByDirection("attack",s),this.scheduleOnce((function(){t.target&&!t.target.isDead&&t.target.subHp(t,t.attack,!1)}),.3),this.scheduleOnce((function(){t.isAttacking=!1,t.changeSkinByDirection("idle",s)}),.6)}}},a.findNearestEnemy=function(){for(var t,i=null,e=Number.MAX_VALUE,o=this.node.getPosition(),n=s(L.enemies);!(t=n()).done;){var a=t.value;if(a&&a.isValid){var r=a.getComponent(p);if(r&&!r.isDead){var c=d.distance(o,a.node.getPosition());c<e&&(e=c,i=r)}}}return i},a.changeAnim=function(t,i){this.curAnimName!==t&&(this.curAnimName=t,f.setAnimation(this.animNode.getComponent(l.Skeleton),this.curAnimName,i))},a.changeSkinByDirection=function(t,i){var e=!1,o=i;switch(i){case I.LookRight:o=I.LookLeft,e=!0;break;case I.LookUpRight:o=I.LookUpLeft,e=!0;break;case I.LookDownRight:o=I.LookDownLeft,e=!0}var n=t+"_"+I[o];this.lastSkin!==n&&(this.anim.setSkin(n),this.anim.setAnimation(0,t,!0),this.lastSkin=n),this.anim.node.scale=new d(e?-1:1,1,1),this.lastDir=i},i}(p)).prototype,"collider2D",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(b.prototype,"point1",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(b.prototype,"point2",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=b))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/SpineUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,t,o,i,s,a;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator,i=n.Node,s=n.sp,a=n.Component}],execute:function(){var l;t._RF.push({},"a9198v0m91N1YDTu/C9xOUs","SpineUtils",void 0);var c=o.ccclass;o.property,n("SpineUtils",c("SpineUtils")(l=function(n){function t(){return n.apply(this,arguments)||this}return e(t,n),t.setAnimation=function(n,e,t){void 0===t&&(t=!1),n instanceof i&&(n=n.getComponent(s.Skeleton),console.log("动画存在")),n.skeletonData.getRuntimeData().findAnimation(e)?n.setAnimation(0,e,t):console.log("------------动画"+e+"不存在！")},t.setAnimationWithEvent=function(n,e,t,o,a,l){e instanceof i&&(e=e.getComponent(s.Skeleton)),e.node.active=!0,e.setAnimation(0,t,!1),n.curAnimName=t,e.setEventListener((function(n,e){e.data.name===o&&a()})),e.setCompleteListener((function(){l&&l(),e.setCompleteListener(null)}))},t.setAnimationCall=function(n,e,t){n instanceof i&&(n=n.getComponent(s.Skeleton)),n.skeletonData.getRuntimeData().findAnimation(e)?(n.node.active=!0,n.setAnimation(0,e,!1),n.setCompleteListener((function(){t(),n.setCompleteListener(null)}))):console.log("-----------------动画不存在:"+e)},t.setAnimationHide=function(n,e){n instanceof i&&(n=n.getComponent(s.Skeleton)),n.skeletonData.getRuntimeData().findAnimation(e)?(n.node.active=!0,n.setAnimation(0,e,!1),n.setCompleteListener((function(){n.node.active=!1}))):console.log("-----------------动画不存在:"+e)},t.setAnimationTwoCall=function(n,e,t,o,a){void 0===o&&(o=!1),n instanceof i&&(n=n.getComponent(s.Skeleton)),n.skeletonData.getRuntimeData().findAnimation(e)?n.skeletonData.getRuntimeData().findAnimation(t)?(n.node.active=!0,n.setAnimation(0,e,!1),n.setCompleteListener((function(){a&&a(),n.setAnimation(0,t,o),n.setCompleteListener(null)}))):console.log("-----------------动画不存在:"+t):console.log("-----------------动画不存在:"+e)},t.setAnimationWithEvent2=function(n,e,t,o,a){n instanceof i&&(n=n.getComponent(s.Skeleton)),n.node.active=!0,n.setAnimation(0,e,!1),n.setEventListener((function(n,e){e.data.name===t&&o&&o()})),n.setCompleteListener((function(){a&&a(),n.setCompleteListener(null)}))},t.setSkin=function(n,e){n instanceof i&&(n=n.getComponent(s.Skeleton)),n.setSkin(e)},t.setColor=function(n,e){n instanceof i&&(n=n.getComponent(s.Skeleton)),n.color=e},t}(a))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/StakeController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesDistributivePoint.ts","./Icarus.ts","./GameGlobal.ts","./StakeWork.ts"],(function(e){var t,r,i,o,n,s,a,l,c,u,f,h,g,k,d,p,y,m,b,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,a=e.PolygonCollider2D,l=e.Node,c=e.Prefab,u=e.sp,f=e.Color,h=e.Contact2DType,g=e.Sprite,k=e.Vec3,d=e.instantiate,p=e.Component},function(e){y=e.ResourcesDistributivePoint},function(e){m=e.Icarus},function(e){b=e.GameGlobal},function(e){C=e.StakeWork}],execute:function(){var S,v,R,_,F,E,W,O,w,D,P,I,z,N,q,A,B;n._RF.push({},"e965aOcvStHc6D5RJjDrVEJ","StakeController",void 0);var T=s.ccclass,L=s.property;e("StakeController",(S=T("StakeController"),v=L({type:y,displayName:"铁块资源点"}),R=L({type:y,displayName:"剑资源点"}),_=L({type:a,displayName:"碰撞体"}),F=L({type:C,displayName:"锻造工人"}),E=L(l),W=L(c),O=L({type:u.Skeleton,displayName:"打铁特效"}),S((P=t((D=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,i(t,"resourceRoot",P,o(t)),i(t,"swordresourceRoot",I,o(t)),i(t,"collider2D",z,o(t)),i(t,"stakeWrok",N,o(t)),i(t,"zhanwei",q,o(t)),i(t,"swordPrefab",A,o(t)),i(t,"forgeEffect",B,o(t)),t.currentBrick=null,t.request_res=!1,t.highlightColor=new f(36,255,64),t.brickReady=null,t.OnStake=!1,t.stakeWorkerIsForging=!1,t}r(t,e);var n=t.prototype;return n.start=function(){this.collider2D&&(this.collider2D.on(h.BEGIN_CONTACT,this.onStartCollider,this),this.collider2D.on(h.END_CONTACT,this.onEndCollider,this))},n.update=function(e){var t;this.OnStake&&!this.request_res&&(null==(t=this.resourceRoot)?void 0:t.resources_count())>0&&this.startForging(),this.tryPlayerForge()},n.onStartCollider=function(e,t){var r=t.node,i=this.collider2D.getComponent(g);if("StakeWorker"!==r.name&&"ShieldWorker"!==r.name||(i.color=this.highlightColor),"StakeWorker"!==r.name&&"ShieldWorker"!==r.name||this.stakeWorkerIsForging||(this.stakeWorkerIsForging=!0,this.OnStake=!0,this.startForging()),"Player"===r.name&&(i.color=this.highlightColor),"Player"===r.name){var o;b.playerController;!this.stakeWorkerIsForging&&(null==(o=this.resourceRoot)?void 0:o.resources_count())>0&&(this.OnStake=!0,this.startForging())}},n.onEndCollider=function(e,t){var r=t.node,i=this.collider2D.getComponent(g);"Player"===r.name&&(this.stakeWorkerIsForging||(i.color=f.WHITE,this.OnStake=!1))},n.startForging=function(){var e=this;if(!this.request_res)if(this.stakeWorkerIsForging&&this.brickReady)this.scheduleOnce((function(){e.finishForging()}),.3);else if(this.brickReady)this.scheduleOnce((function(){e.finishForging()}),.3);else if(!this.resourceRoot||this.resourceRoot.resources_count()<=0)this.request_res=!1;else{this.request_res=!0;b.playerController;this.scheduleOnce((function(){e.resourceRoot.request_resources(e.zhanwei,k.ZERO,(function(t){e.currentBrick=t,e.brickReady=t;var r=b.playerController;e.OnStake&&r.isNearStake(e)&&!e.stakeWorkerIsForging&&(r.startForgingAtStake(e),e.scheduleOnce((function(){e.forgeEffect.node.active=!0,e.forgeEffect.setAnimation(0,"animation",!1),e.scheduleOnce((function(){e.forgeEffect.setAnimation(0,"animation",!1),e.forgeEffect.setCompleteListener((function(){e.forgeEffect.node.active=!1,e.forgeEffect.setCompleteListener(null)}))}),.15)}),.1)),e.stakeWorkerIsForging&&e.stakeWrok&&(e.stakeWrok.play_forge_anim(!0),e.scheduleOnce((function(){e.forgeEffect.node.active=!0,e.forgeEffect.setAnimation(0,"animation",!1),e.scheduleOnce((function(){e.forgeEffect.setAnimation(0,"animation",!1),e.forgeEffect.setCompleteListener((function(){e.forgeEffect.node.active=!1,e.forgeEffect.setCompleteListener(null)}))}),.15)}),.1)),e.currentBrick=t,setTimeout((function(){return e.finishForging()}),1e3*m.forge_time)}),k.ZERO,!1)||(e.request_res=!1,e.currentBrick=null)}),.3)}},n.finishForging=function(){var e;if(this.currentBrick){var t=b.playerController;if(this.stakeWorkerIsForging||t.isNearStake(this)){this.stakeWrok&&this.stakeWrok.play_idle_anim(),this.currentBrick.destroy(),this.currentBrick=null,this.brickReady=null,this.request_res=!1;var r=d(this.swordPrefab);r.setParent(this.zhanwei),r.setPosition(k.ZERO),null==(e=this.swordresourceRoot)||e.submit_resources(r),this.resourceRoot.refresh()}else this.request_res=!1}},n.tryPlayerForge=function(){var e=this,t=b.playerController;this.OnStake&&t.isNearStake(this)&&this.brickReady&&(this.request_res||(t.startForgingAtStake(this),this.scheduleOnce((function(){e.finishForging()}),.3)))},t}(p)).prototype,"resourceRoot",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(D.prototype,"swordresourceRoot",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(D.prototype,"collider2D",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(D.prototype,"stakeWrok",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(D.prototype,"zhanwei",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(D.prototype,"swordPrefab",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(D.prototype,"forgeEffect",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=D))||w));n._RF.pop()}}}));

System.register("chunks:///_virtual/StakeController1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesDistributivePoint.ts","./Icarus.ts","./GameGlobal.ts"],(function(e){var r,t,i,o,n,s,l,a,u,c,h,g,f,k,d,p,y,b;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,l=e.PolygonCollider2D,a=e.Node,u=e.Prefab,c=e.Color,h=e.Contact2DType,g=e.Sprite,f=e.Vec3,k=e.instantiate,d=e.Component},function(e){p=e.ResourcesDistributivePoint},function(e){y=e.Icarus},function(e){b=e.GameGlobal}],execute:function(){var C,R,F,m,v,S,_,w,O,D,I,P,z;n._RF.push({},"f4204jntChHm7h4ucCjgII3","StakeController1",void 0);var N=s.ccclass,q=s.property;e("StakeController",(C=N("StakeController"),R=q({type:p,displayName:"铁块资源点"}),F=q({type:p,displayName:"剑资源点"}),m=q({type:l,displayName:"碰撞体"}),v=q(a),S=q(u),C((O=r((w=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n))||this,i(r,"resourceRoot",O,o(r)),i(r,"swordresourceRoot",D,o(r)),i(r,"collider2D",I,o(r)),i(r,"zhanwei",P,o(r)),i(r,"swordPrefab",z,o(r)),r.currentBrick=null,r.request_res=!1,r.highlightColor=new c(36,255,64),r.brickReady=null,r.OnStake=!1,r.stakeWorkerIsForging=!1,r}t(r,e);var n=r.prototype;return n.start=function(){this.collider2D&&(this.collider2D.on(h.BEGIN_CONTACT,this.onStartCollider,this),this.collider2D.on(h.END_CONTACT,this.onEndCollider,this))},n.update=function(e){var r;this.OnStake&&!this.request_res&&(null==(r=this.resourceRoot)?void 0:r.resources_count())>0&&this.startForging(),this.tryPlayerForge()},n.onStartCollider=function(e,r){var t=r.node,i=this.collider2D.getComponent(g);if("StakeWorker"!==t.name||this.stakeWorkerIsForging||(i.color=this.highlightColor,this.stakeWorkerIsForging=!0,this.OnStake=!0,this.startForging()),"Player"===t.name){var o;b.playerController;!this.stakeWorkerIsForging&&(null==(o=this.resourceRoot)?void 0:o.resources_count())>0&&(i.color=this.highlightColor,this.OnStake=!0,this.startForging())}},n.onEndCollider=function(e,r){var t=r.node,i=this.collider2D.getComponent(g);"Player"===t.name&&(this.stakeWorkerIsForging||(i.color=c.WHITE,this.OnStake=!1))},n.startForging=function(){var e=this;if(!this.request_res)if(this.stakeWorkerIsForging&&this.brickReady)this.scheduleOnce((function(){e.finishForging()}),.3);else if(this.brickReady)this.scheduleOnce((function(){e.finishForging()}),.3);else if(!this.resourceRoot||this.resourceRoot.resources_count()<=0)this.request_res=!1;else{this.request_res=!0;b.playerController;this.scheduleOnce((function(){e.resourceRoot.request_resources(e.zhanwei,f.ZERO,(function(r){e.currentBrick=r,e.brickReady=r;var t=b.playerController;e.OnStake&&t.isNearStake(e)&&!e.stakeWorkerIsForging&&t.startForgingAtStake(e),e.currentBrick=r,setTimeout((function(){return e.finishForging()}),1e3*y.forge_time)}),f.ZERO,!1)||(e.request_res=!1,e.currentBrick=null)}),.3)}},n.finishForging=function(){var e;if(this.currentBrick){var r=b.playerController;if(this.stakeWorkerIsForging||r.isNearStake(this)){this.currentBrick.destroy(),this.currentBrick=null,this.brickReady=null,this.request_res=!1;var t=k(this.swordPrefab);t.setParent(this.zhanwei),t.setPosition(f.ZERO),null==(e=this.swordresourceRoot)||e.submit_resources(t),this.resourceRoot.refresh()}else this.request_res=!1}},n.tryPlayerForge=function(){var e=this,r=b.playerController;this.OnStake&&r.isNearStake(this)&&this.brickReady&&(this.request_res||(r.startForgingAtStake(this),this.scheduleOnce((function(){e.finishForging()}),.3)))},r}(d)).prototype,"resourceRoot",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=r(w.prototype,"swordresourceRoot",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=r(w.prototype,"collider2D",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=r(w.prototype,"zhanwei",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=r(w.prototype,"swordPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=w))||_));n._RF.pop()}}}));

System.register("chunks:///_virtual/StakeWork.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./ResourcesDistributivePoint.ts"],(function(e){var t,i,n,a,r,o,l,c,u,s,f,p,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,l=e.CircleCollider2D,c=e.Node,u=e.sp,s=e.Contact2DType,f=e.Component},function(e){p=e.AudioManager},function(e){d=e.ResourcesDistributivePoint}],execute:function(){var y,h,m,k,b,g,_,v,S,D,C,P,N;r._RF.push({},"6d028rRUHVJ7a2vydtL9BRs","StakeWork",void 0);var A=o.ccclass,T=o.property;e("ClerkState",function(e){return e[e.Take=0]="Take",e[e.Pay=1]="Pay",e[e.TakeWay=2]="TakeWay",e[e.Backoff=3]="Backoff",e[e.Birth=4]="Birth",e}({})),e("StakeWork",(y=A("StakeWork"),h=T({type:l,displayName:"碰撞体"}),m=T({type:c,displayName:"出生特效"}),k=T({type:u.Skeleton,displayName:"动画"}),b=T({type:u.Skeleton,displayName:"打铁特效"}),g=T({type:d,displayName:"guide"}),y((S=t((v=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"collider2D",S,a(t)),n(t,"birth_effect",D,a(t)),n(t,"animation",C,a(t)),n(t,"forgeEffect",P,a(t)),n(t,"guide",N,a(t)),t.workerOnStake=!1,t.currentStake=null,t}i(t,e);var r=t.prototype;return r.start=function(){this.collider2D&&this.collider2D.on(s.BEGIN_CONTACT,this.onStartCollider,this)},r.update=function(e){},r.onStartCollider=function(e,t){t.node},r.play_birth_effect=function(){var e=this;this.birth_effect&&this.scheduleOnce((function(){"StakeWorker"==e.node.name&&(e.guide.haveWork=!0),p.soundPlay("NPCApprence"),e.node.active=!0,e.animation.setAnimation(0,"1_idle3",!0),e.birth_effect.active=!0}),.3)},r.play_forge_anim=function(e){void 0===e&&(e=!1),this.animation&&(this.scheduleOnce((function(){p.soundPlay("datie")}),.2),this.scheduleOnce((function(){p.soundPlay("datie")}),.35),this.animation.setAnimation(0,"1_forge",e),this.animation.timeScale=2)},r.play_idle_anim=function(e){void 0===e&&(e=!0),this.animation&&(this.animation.setAnimation(0,"1_idle3",e),this.animation.timeScale=1)},t}(f)).prototype,"collider2D",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(v.prototype,"birth_effect",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(v.prototype,"animation",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(v.prototype,"forgeEffect",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(v.prototype,"guide",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=v))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/StoveController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesDistributivePoint.ts","./Brick.ts"],(function(o){var t,e,r,n,i,c,a,s,l,u,p,h,f,C;return{setters:[function(o){t=o.applyDecoratedDescriptor,e=o.inheritsLoose,r=o.initializerDefineProperty,n=o.assertThisInitialized},function(o){i=o.cclegacy,c=o._decorator,a=o.Prefab,s=o.Color,l=o.Collider2D,u=o.Contact2DType,p=o.Sprite,h=o.Component},function(o){f=o.ResourcesDistributivePoint},function(o){C=o.Brick}],execute:function(){var v,y,g,b,d,m,R;i._RF.push({},"48750WjVGJCi5LbuTf8vMmh","StoveController",void 0);var P=c.ccclass,B=c.property;o("StoveController",(v=P("StoveController"),y=B({type:f,displayName:"铁块资源点"}),g=B(a),v((m=t((d=function(o){function t(){for(var t,e=arguments.length,i=new Array(e),c=0;c<e;c++)i[c]=arguments[c];return t=o.call.apply(o,[this].concat(i))||this,r(t,"resourceRoot",m,n(t)),r(t,"brickPrefab",R,n(t)),t.highlightColor=new s(36,255,64),t}e(t,o);var i=t.prototype;return i.start=function(){if(this.resourceRoot){var o=this.resourceRoot.getComponent(l);o&&(o.on(u.BEGIN_CONTACT,this.onBeginContact,this),o.on(u.END_CONTACT,this.onEndContact,this))}},i.onBeginContact=function(o,t,e){if("Player"===t.node.name||"CarryWorker"===t.node.name){var r=this.resourceRoot.getComponent(p);r&&(r.color=this.highlightColor)}},i.onEndContact=function(o,t,e){if("Player"===t.node.name||"CarryWorker"===t.node.name){var r=this.resourceRoot.getComponent(p);r&&(r.color=s.WHITE)}},i.update=function(o){this.resourceRoot&&this.resourceRoot.root&&this.resourceRoot.root.children.forEach((function(o){var t=o.getComponent(C);t&&(t.isBurning||t.playBurnAnimation(1))}))},t}(h)).prototype,"resourceRoot",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(d.prototype,"brickPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=d))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/Sword.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DropBase.ts"],(function(t){var r,o,e,n;return{setters:[function(t){r=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator},function(t){n=t.DropBase}],execute:function(){var c;o._RF.push({},"2f8e2sDwclPzJwGgwqWs6E+","Sword",void 0);var s=e.ccclass;e.property,t("Sword",s("Sword")(c=function(t){function o(){return t.apply(this,arguments)||this}r(o,t);var e=o.prototype;return e.start=function(){},e.update=function(t){},o}(n))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/SwordTableController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameGlobal.ts"],(function(o){var t,r,e,i,n,s,l,a,c,h,d,u,g;return{setters:[function(o){t=o.applyDecoratedDescriptor,r=o.inheritsLoose,e=o.initializerDefineProperty,i=o.assertThisInitialized},function(o){n=o.cclegacy,s=o._decorator,l=o.Node,a=o.Color,c=o.Collider2D,h=o.Contact2DType,d=o.Sprite,u=o.Component},function(o){g=o.GameGlobal}],execute:function(){var w,p,f,C,m;n._RF.push({},"8ee85Vk1+5N/KH4lPBMvkQD","SwordTableController",void 0);var P=s.ccclass,v=s.property;o("SwordTableController",(w=P("SwordTableController"),p=v(l),w((m=t((C=function(o){function t(){for(var t,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=o.call.apply(o,[this].concat(n))||this,e(t,"swordPosition",m,i(t)),t.triggerNames=["Player","SwordWorker"],t.swordWorkerIsFetching=!1,t.highlightColor=new a(36,255,64),t}r(t,o);var n=t.prototype;return n.onLoad=function(){this.swordPosition||(this.swordPosition=this.node.getChildByName("swordPosition")),this.initCollider()},n.start=function(){this.scheduleOnce((function(){var o=g.actorController.waitingQueue[0];o&&(o.stopFetch=!0)}),1)},n.initCollider=function(){if(this.swordPosition){var o=this.swordPosition.getComponent(c);o&&(o.on(h.BEGIN_CONTACT,this.onSwordBegin,this),o.on(h.END_CONTACT,this.onSwordEnd,this))}},n.onSwordBegin=function(o,t){var r=t.node,e=this.swordPosition.getComponent(d);if(-1!==this.triggerNames.indexOf(r.name)){var i=g.actorController;if(i&&0!==i.waitingQueue.length){var n=i.waitingQueue[0];"SwordWorker"===r.name?(this.swordWorkerIsFetching=!0,n.stopFetch=!1,g.stopget1=!1,e.color=this.highlightColor,n.onPlayerTouchSword()):"Player"===r.name&&(this.swordWorkerIsFetching||(n.stopFetch=!1,g.stopget1=!1,n.onPlayerTouchSword(),e.color=this.highlightColor))}}},n.onSwordEnd=function(o,t){var r=t.node,e=this.swordPosition.getComponent(d);if(-1!==this.triggerNames.indexOf(r.name)){var i=g.actorController;if(i&&0!==i.waitingQueue.length){var n=i.waitingQueue[0];"SwordWorker"===r.name||"Player"===r.name&&(this.swordWorkerIsFetching||(g.stopget1=!0,n.stopFetchSword(),e.color=a.WHITE))}}},t}(u)).prototype,"swordPosition",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=C))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/SwordWorker.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(e){var t,i,r,n,o,a,l,c,u,f,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Collider2D,c=e.Node,u=e.sp,f=e.Component},function(e){p=e.AudioManager}],execute:function(){var s,d,y,h,b,m,g,v,_,w,k;o._RF.push({},"82799y9IvVP37QHDIjh1Jgx","SwordWorker",void 0);var S=a.ccclass,z=a.property;e("SwordWorker",(s=S("SwordWorker"),d=z({type:l,displayName:"碰撞检测"}),y=z({type:c,displayName:"出生特效"}),h=z({type:u.Skeleton,displayName:"动画"}),b=z({type:u.Skeleton,displayName:"打铁特效"}),s((v=t((g=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"collider",v,n(t)),r(t,"birth_effect",_,n(t)),r(t,"animation",w,n(t)),r(t,"forgeEffect",k,n(t)),t}i(t,e);var o=t.prototype;return o.start=function(){this.node.active=!1},o.update=function(e){},o.play_birth_effect=function(){var e=this;this.birth_effect&&(this.scheduleOnce((function(){p.soundPlay("NPCApprence"),e.node.active=!0}),.3),this.animation.setAnimation(0,"2_idle2",!0),this.birth_effect.active=!0)},t}(f)).prototype,"collider",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(g.prototype,"birth_effect",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(g.prototype,"animation",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(g.prototype,"forgeEffect",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=g))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/TestCollider.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var n,e,t,r,i;return{setters:[function(o){n=o.inheritsLoose},function(o){e=o.cclegacy,t=o._decorator,r=o.Collider2D,i=o.Component}],execute:function(){var l;e._RF.push({},"17ceean2m9CpJK4QM4mbs84","TestCollider",void 0);var s=t.ccclass;t.property,o("TestCollider",s("TestCollider")(l=function(o){function e(){return o.apply(this,arguments)||this}n(e,o);var t=e.prototype;return t.start=function(){var o=this.getComponent(r);o?(o.on("onTriggerEnter",this.onTriggerEnter,this),o.on("onCollisionEnter",this.onCollisionEnter,this)):console.warn("⚠️ 没有找到 Collider2D 组件")},t.onTriggerEnter=function(o){console.log("✅ 触发器进入: ",o)},t.onCollisionEnter=function(o){console.log("💥 碰撞进入: ",o)},e}(i))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/UIController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameGlobal.ts","./Body2.ts","./PlacingSlack.ts","./AudioManager.ts","./EndCard.ts","./FaildCard.ts"],(function(t){var i,n,e,o,a,r,s,c,l,h,u,d,p,y,f,g,v,C,m,T;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Node,c=t.Animation,l=t.input,h=t.Input,u=t.UITransform,d=t.Vec3,p=t.Label,y=t.Component},function(t){f=t.GameGlobal},function(t){g=t.ResourcesType},function(t){v=t.PlacingSlack},function(t){C=t.AudioManager},function(t){m=t.EndCard},function(t){T=t.FaildCard}],execute:function(){var E,S,b,U,N,k,w,I,H,P,_,j,A,O,D;a._RF.push({},"081bcIAEilEF7mw7mXKHAmE","UIController",void 0);var F=r.ccclass,M=r.property;t("UIController",(E=F("UI控制器"),S=M({type:s,displayName:"摇杆"}),b=M({type:s,displayName:"肉UI"}),U=M({type:s,displayName:"提示手"}),N=M({type:m,displayName:"胜利卡片"}),k=M({type:T,displayName:"失败卡片"}),w=M({type:s,displayName:"红框"}),E((P=i((H=function(t){function i(){for(var i,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return i=t.call.apply(t,[this].concat(a))||this,e(i,"joyStick",P,o(i)),e(i,"meatUI",_,o(i)),e(i,"tishi",j,o(i)),e(i,"endCard",A,o(i)),e(i,"faildCard",O,o(i)),e(i,"hong",D,o(i)),i.Dish=null,i.Pole=null,i.isFanHong=!1,i}n(i,t);var a=i.prototype;return a.start=function(){var t=this;this.initJoyStick(),this.tishi.active=!1,this.joyStick.active=!1,this.scheduleOnce((function(){t.tishi.active=!0}),2),window.setLoadingProgress&&window.setLoadingProgress(100),this.hong.active=!1,this.hong.getComponent(c).on(c.EventType.FINISHED,(function(){t.isFanHong=!1}),this)},a.update=function(t){},a.onLoad=function(){f.uiController=this},a.onDestroy=function(){this.unregisteringTouchEvent()},a.initJoyStick=function(){this.joyStick&&(this.Dish=this.joyStick.getChildByName("Dish"),this.Pole=this.joyStick.getChildByName("Pole"),this._registeringTouchEvent())},a._registeringTouchEvent=function(){l.on(h.EventType.TOUCH_START,this.onTouchStart,this),l.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this),l.on(h.EventType.TOUCH_END,this.onTouchEnd,this),l.on(h.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},a.unregisteringTouchEvent=function(){l.off(h.EventType.TOUCH_START,this.onTouchStart,this),l.off(h.EventType.TOUCH_MOVE,this.onTouchMove,this),l.off(h.EventType.TOUCH_END,this.onTouchEnd,this),l.off(h.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.joyStick.active=!1},a.onTouchStart=function(t){if(f.GameStart){C.musicPlay("bgm",!0),this.joyStick.active=!0;var i=t.getUILocation(),n=this.node.getComponent(u).convertToNodeSpaceAR(i.toVec3());this.joyStick.setPosition(n),v.cancel(),this.tishi.active=!1}},a.onTouchMove=function(t){if(f.GameStart&&(f.homeUp&&console.log("开始计时"),!f.GameEnd)){var i=t.getUILocation(),n=this.joyStick.getComponent(u).convertToNodeSpaceAR(i.toVec3()),e=n.length()/(.3*this.Dish.getComponent(u).width);e>1&&n.divide(new d(e,e,1)),this.Pole.setPosition(n),f.playerController.playerMove(n),v.cancel()}},a.onTouchEnd=function(t){var i=this;f.GameStart&&(this.Pole.setPosition(d.ZERO),this.joyStick.active=!1,f.playerController.playerStopMove(),v.enabled(3,(function(){i.tishi.active=!0})))},a.refreshCoinUI=function(){var t=f.playerController.packge_count(g.Money);this.meatUI.getChildByName("Num").getComponent(p).string=t.toString()},a.showEndCard=function(){this.endCard&&(this.endCard.node.active=!0,this.endCard.show())},a.showFaildCard=function(){this.faildCard&&(this.faildCard.node.active=!0)},a.fanHong=function(){this.isFanHong||(this.hong.active=!0,this.isFanHong=!0,this.hong.getComponent(c).play())},i}(y)).prototype,"joyStick",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(H.prototype,"meatUI",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(H.prototype,"tishi",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(H.prototype,"endCard",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(H.prototype,"faildCard",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(H.prototype,"hong",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=H))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc","./GameGlobal.ts"],(function(t){var e,o,n,i,a,s,r,l,d,c,u,f,y,m,p,h,v,g,P,w,C;return{setters:[function(t){e=t.cclegacy,o=t.v3,n=t.tween,i=t.Vec3,a=t.Node,s=t.Layers,r=t.MobilityMode,l=t.UITransform,d=t.Sprite,c=t.resources,u=t.SpriteFrame,f=t.ImageAsset,y=t.Texture2D,m=t.UIOpacity,p=t.RenderTexture,h=t.screen,v=t.gfx,g=t.instantiate,P=t.error,w=t.misc},function(t){C=t.GameGlobal}],execute:function(){e._RF.push({},"5b53aB++7lMOqDp99oL5BUr","Utils",void 0);t("FlyToDataType",(function(t,e,o,n,i,a,s,r,l,d,c,u,f,y,m,p){this.duration=void 0,this.delay=void 0,this.flyNode=void 0,this.fromNode=void 0,this.fromPos=void 0,this.fromPosAdd=void 0,this.middleNode=void 0,this.middlePos=void 0,this.middlePosAdd=void 0,this.toNode=void 0,this.toPos=void 0,this.toPosAdd=void 0,this.toScale=void 0,this.startCall=void 0,this.centerCall=void 0,this.endCall=void 0,this.duration=t,this.delay=e,this.flyNode=o,this.fromNode=n,this.fromPos=i.clone(),this.fromPosAdd=a.clone(),this.middleNode=s,this.middlePos=r.clone(),this.middlePosAdd=l.clone(),this.toNode=d,this.toPos=c.clone(),this.toPosAdd=u.clone(),this.toScale=f.clone(),this.startCall=y,this.centerCall=m,this.endCall=p}));var b=o(),I=o(),N=(o(),o());o(),t("Utils",function(){function t(){}return t.flyToUseBezier=function(e){n(e.flyNode).delay(e.delay).call((function(){e.startCall&&e.startCall()})).parallel(n(e.flyNode).to(e.duration,{worldPosition:o()},{onUpdate:function(o,n){b=e.fromNode?e.fromNode.getWorldPosition():e.fromPos.clone(),i.add(b,b,e.fromPosAdd),I=e.middleNode?e.middleNode.worldPosition.clone():e.middlePos.clone(),i.add(I,I,e.middlePosAdd),N=e.toNode?e.toNode.worldPosition:e.toPos,i.add(N,N,e.toPosAdd),e.flyNode.worldPosition=t.bezierCurve(n,b,I,N)},onComplete:function(t){}}),n(e.flyNode).by(.6*e.duration,{scale:o(.1,.1,.1)}).call((function(){e.centerCall&&e.centerCall()})).by(.4*e.duration,{scale:o(-.1,-.1,-.1)}).call((function(){e.flyNode.setScale(o(.1,.1,.1))})).call((function(){e.endCall&&e.endCall()})).to(.1,{scale:e.toScale},{easing:"quadOut"})).start()},t.getUIPos=function(t,e){return C.mainCamera.convertToUINode(t.getWorldPosition(),e)},t.randomRange=function(t,e){var o=e-t;return t+Math.random()*o},t.randomPos=function(t,e){var o=t.x-e/2+Math.random()*e,n=t.y-e/2+Math.random()*e;return new i(o,n,0)},t.createSprite=function(t){var e=new a;e.layer=s.Enum.UI_2D,e.mobility=r.Static;e.addComponent(l);var o=e.addComponent(d);o.sizeMode=d.SizeMode.TRIMMED,o.type=d.Type.SIMPLE,o.trim=!0;var n=c.get(t+"/spriteFrame",u);return n&&(o.spriteFrame=n),e},t.setSpriteFrame=function(t,e,o){var n=t.getComponent(d),i=c.get(e);if(i){if(i instanceof u)n.spriteFrame=i,o&&o();else if(i instanceof f){var a=new y;a.image=i;var s=new u;s.texture=a,n.spriteFrame=s}}else c.load(e,u,(function(t,e){n.spriteFrame=e,o&&o()}))},t.nodeMoving=function(t,e,o,a,s,r){n(t.position).delay(s).to(.3,a,{onUpdate:function(n,s){var r,l,d,c,u,f;t.position=(d=o,c=a,u=(1-(r=s))*(1-r)*(l=e).x+2*r*(1-r)*d.x+r*r*c.x,f=(1-r)*(1-r)*l.y+2*r*(1-r)*d.y+r*r*c.y,new i(u,f,0))},onComplete:function(t){r&&r()}}).start()},t.coinFlyTo=function(t,e,a,s,r,l,d,c){n(t).delay(r).call((function(){l&&l()})).parallel(n(t).to(.5,{position:s},{onUpdate:function(o,n){var r,l,d,c,u,f;t.position=(d=a,c=s,u=(1-(r=n))*(1-r)*(l=e).x+2*r*(1-r)*d.x+r*r*c.x,f=(1-r)*(1-r)*l.y+2*r*(1-r)*d.y+r*r*c.y,new i(u,f,0))}}),n(t).by(.3,{scale:o(.1,.1,1)}).call((function(){d&&d()})).by(.2,{scale:o(-.1,-.1,1)}).call((function(){t.setScale(o(.1,.1,0))})).call((function(){c&&c()})).by(.2,{scale:o(.6,.6,1)},{easing:"quadOut"})).start()},t.coinFlyFrom=function(t,e,a,s,r,l){n(t).delay(r).parallel(n(t).to(.6,{position:s},{onUpdate:function(o,n){var r,l,d,c,u,f;t.position=(d=a,c=s,u=(1-(r=n))*(1-r)*(l=e).x+2*r*(1-r)*d.x+r*r*c.x,f=(1-r)*(1-r)*l.y+2*r*(1-r)*d.y+r*r*c.y,new i(u,f,0))},onComplete:function(t){l&&l()}}),n(t).by(.3,{scale:o(.1,.1,1),angle:50}).by(.3,{scale:o(-.1,-.1,1),angle:-50})).start()},t.jellyEffect=function(t,e,i){var a=t.getComponent(m);a||(a=t.addComponent(m)),a.opacity=0,n(t).to(.06,{scale:o(1.4*e,.53*e,1*e)}).to(.12,{scale:o(.8*e,1.2*e,1*e)}).to(.07,{scale:o(1.2*e,.7*e,1*e)}).to(.07,{scale:o(.85*e,1.1*e,1*e)}).to(.07,{scale:o(1*e,1*e,1*e)}).call((function(){i&&i()})).start(),n(a).to(.06,{opacity:255}).start()},t.breathEffect=function(t){n(t).repeatForever(n(t).by(.8,{scale:o(.05,.05,0)},{easing:"quadInOut"}).by(.8,{scale:o(-.05,-.05,0)},{easing:"quadInOut"})).start()},t.qTanEffect=function(t,e,i){n(t).by(.03,{scale:o(.1*e,.083*e,.1*e)}).by(.03,{scale:o(.2*e,.2*e,.2*e)}).by(.03,{scale:o(.1*e,.1*e,.1*e)}).call((function(){i&&i()})).start()},t.breathLight=function(t){var e=t.getComponent(m);e.opacity=0,t.active=!0,n(e).repeatForever(n(e).to(.25,{opacity:255},{easing:"quadInOut"}).to(.25,{opacity:0},{easing:"quadInOut"}).to(.35,{opacity:255},{easing:"quadInOut"}).to(.35,{opacity:0},{easing:"quadInOut"})).start()},t.pulsationEffect=function(t){n(t).repeatForever(n(t).by(.25,{scale:o(.05,.05,0)},{easing:"sineOut"}).by(.25,{scale:o(-.05,-.05,0)},{easing:"sineOut"}).by(.35,{scale:o(.14,.14,0)},{easing:"sineOut"}).by(.35,{scale:o(-.14,-.14,0)},{easing:"sineIn"}).delay(.5)).start()},t.floatEffect=function(t,e,i){n(t).delay(e).call((function(){i&&i()})).by(.2,{position:o(0,10,0)},{easing:"quadOut"}).by(.2,{position:o(0,-10,0)},{easing:"quadIn"}).start()},t.buildingAppear=function(t,e,i){var a=t.getScale().clone();t.setScale(0,0),n(t).delay(e).to(.15,{scale:o(1.3*a.x,1.3*a.y,1)},{easing:"sineInOut"}).to(.1,{scale:o(1*a.x,1*a.y,1)},{easing:"sineOutIn"}).call((function(){i&&i()})).start()},t.delayCall=function(t,e,o){n(t).delay(e).call((function(){o&&o()})).start()},t.createRenderTexture=function(t,e){void 0===e&&(e=1);var o=new p,n=h.windowSize,i=Math.min(1.5,h.devicePixelRatio),a=n.width*i*t,s=n.height*i*t,r=a/s;a>2048&&(s=(a=2048)/r),s>2048&&(a=(s=2048)*r);for(var l=[],d=0;d<e;++d)l.push(new v.ColorAttachment(v.Format.RGBA8));return o.reset({width:a,height:s,passInfo:new v.RenderPassInfo(l,new v.DepthStencilAttachment(v.Format.DEPTH_STENCIL))}),o.setFilters(y.Filter.LINEAR,y.Filter.LINEAR),o.setWrapMode(y.WrapMode.CLAMP_TO_BORDER,y.WrapMode.CLAMP_TO_BORDER),o},t.syncCameraParameters=function(t,e){t.fov=e.fov,t.near=e.near,t.far=e.far,t.orthoHeight=e.orthoHeight},t.syncCameraTransform=function(t,e){t.node.worldPosition=e.node.worldPosition,t.node.worldScale=e.node.worldScale,t.node.worldRotation=e.node.worldRotation},t.bezierCurve=function(t,e,o,n,i){i.x=(1-t)*(1-t)*e.x+2*t*(1-t)*o.x+t*t*n.x,i.y=(1-t)*(1-t)*e.y+2*t*(1-t)*o.y+t*t*n.y,i.z=(1-t)*(1-t)*e.z+2*t*(1-t)*o.z+t*t*n.z},t.CloneNode=function(t,e,n){void 0===e&&(e=o());var a=g(t);a.parent=t.parent;var s=o();return i.add(s,t.position,e),a.setPosition(s),n&&t.destroy(),a},t.getRandomInt=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t},t.getTowPointAngle=function(t,e){var o,n;if(t instanceof a&&e instanceof a)o=t.getPosition(),n=e.getPosition();else{if(!(t instanceof i&&e instanceof i))return P("getTowPointAngle 非法参数"),0;o=t,n=e}var s=o.subtract(n),r=Math.atan2(s.x,s.y);return w.radiansToDegrees(r)},t.getTowPointDistanceInRadius=function(t,e,o){var n,s;return t instanceof a&&e instanceof a?(n=t.worldPosition,s=t.worldPosition,i.distance(n,s)<=o):t instanceof i&&e instanceof i?(n=t,s=e,i.distance(n,s)<=o):(P("getTowPointDistance 非法参数"),!1)},t.getTowPointVector=function(t,e){var o,n,s;return t instanceof a&&e instanceof a?(o=t.worldPosition,n=t.worldPosition,i.subtract(s,o,n),s):t instanceof i&&e instanceof i?(o=t,n=e,i.subtract(s,o,n),s):(P("getTowPointDistance 非法参数"),i.ZERO)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Vector2.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"e4a9b+T4WhBHZDgoBYxOT45","Vector2",void 0);n("default",function(){function n(n,t){this.x=void 0,this.y=void 0,null!=n&&(this.x=n),null!=t&&(this.y=t)}return n.multiply=function(n,t){return n.x*t.x+n.y*t.y},n.multiply2=function(t,u){return new n(u.x*t,u.y*t)},n.division=function(t,u){return new n(t.x/u,t.y/u)},n.subtract=function(t,u){return new n(t.x-u.x,t.y-u.y)},n.addition=function(t,u){return new n(t.x+u.x,t.y+u.y)},n}());t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});